function AjaxURL(){var n=Next.Settings.Channel.HttpsEnabled?Next.Settings.Channel.SiteUrl:window.isAccountPortal||window.location.pathname.indexOf("/secure/checkout")!=-1||window.location.protocol=="https:"?Next.Settings.Channel.SecureSiteUrl:Next.Settings.Channel.SiteUrl;return Next.Settings.Channel.MainSiteAbsolutePath.length>0&&(n=n+"/"),Next.Settings.Channel.IsTotalPlatformLiteClient&&Next.Settings.Channel.TotalPlatformLiteClientParentBagFunctionality&&Next.Settings.Channel.TotalPlatformLiteClientMainSiteUrl&&(n=Next.Settings.Channel.TotalPlatformLiteClientMainSiteUrl+"/"),n}function CurrencyFormat(n){var u=window,i=parseFloat(n),f,t,r;return isNaN(i)&&(i=0),f=i<0?"-":"",i=Math.abs(i),i=parseFloat(i.toFixed(2)),t=new String(i),t.indexOf(".")<0&&(t+=".00"),t.indexOf(".")===t.length-2&&(t+="0"),t=f+t,Next.Settings.Channel.CurrencyPosition==="rightwithspace"?(t+=" ",t+=u.Next.Settings.Channel.CurrencySymbol||"£",r=t):Next.Settings.Channel.CurrencyPosition==="right"?(t+=u.Next.Settings.Channel.CurrencySymbol||"£",r=t):Next.Settings.Channel.CurrencyPosition==="leftwithspace"?(r=u.Next.Settings.Channel.CurrencySymbol,r+=" ",r+=t):r=Next.Settings.Channel.CurrencyPosition==="left"?(u.Next.Settings.Channel.CurrencySymbol||"£")+t:(u.Next.Settings.Channel.CurrencySymbol||"£")+t,r}function NextBasketItems(n){this.Version=n;this.Items=[];this.MediaCode="";this.ItemAdd=function(n,t,i,r,u){r===null||r===undefined?u===null||u===undefined?this.Items.push({id:n,option:t,chain:i,quantity:1}):this.Items.push({id:n,option:t,chain:i,quantity:u}):u===null||u===undefined?this.Items.push({id:n,option:t,chain:i,linkeditem:r,quantity:1}):this.Items.push({id:n,option:t,chain:i,linkeditem:r,quantity:u})}}function ConsoleLog(n){window.console&&console.log&&console.log(n)}function GoogleTagManager(n,t){if(!Next.Settings.Channel.PlatModGoogleAnalyticsSDK){var i=t?t:"";(function(n,t,r,u,f){n[u]=n[u]||[];n[u].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var o=t.getElementsByTagName(r)[0],e=t.createElement(r),s=u!="dataLayer"?"&l="+u:"";e.async=!0;e.src="https://www.googletagmanager.com/gtm.js?id="+f+s+i;o.parentNode.insertBefore(e,o)})(window,document,"script","dataLayer",n)}}function AddTrackGAEventToDataLayer(n,t,i,r){Next.Settings.Channel.PlatModGoogleAnalyticsSDK||(dataLayer!=undefined?dataLayer.push({event:"TrackGAEvent",link_category:n,link_id:t,link_name:i,link_value:r}):TrackGAEvent(n,t,i,r))}function TrackGAEvent(n,t,i,r){Next.Settings.Channel.PlatModGoogleAnalyticsSDK?window.subjects&&window.subjects["$ GA_TRACK_EVENT"]?window.subjects["$ GA_TRACK_EVENT"].next({Category:n,Action:t,Label:i,Value:r}):console.log("Error Tracking GA Event"):(GAEnabled&&GoogleAnalyticsEnabled==!0&&(_gaq.push(["_trackEvent",n,t,i,r]),ConsoleLog("GAEvent - "+n+" - "+t+" - "+i)),AddTrackGAEventToDataLayer(n,t,i,r))}function TrackGAPageView(n){Next.Settings.Channel.PlatModGoogleAnalyticsSDK?window.subjects&&window.subjects["$ GA_TRACK_PAGE_VIEW"]?window.subjects["$ GA_TRACK_PAGE_VIEW"].next({Path:n}):console.log("Error Tracking GA Page View"):(GAEnabled&&GoogleAnalyticsEnabled==!0&&(n!=""?_gaq.push(["_trackPageview",n]):_gaq.push(["_trackPageview"]),ConsoleLog("GAPage - "+n)),dataLayer!=undefined&&n!=""&&dataLayer.push({event:"VirtualPageView",virtual_page_url:n}))}function ReturnValidString(n){return n&&n!=""&&n!="undefined"?n:""}function TrackPlatModGAEvent(n,t,i,r,u){u||(u="");GAEnabled&&GoogleAnalyticsEnabled===!0&&(_gaq.push(["_trackEvent",n,t,i,r,u]),ConsoleLog(n+" - "+t+" - "+i+" - "+r+" - "+u));dataLayer!==undefined&&dataLayer.push({event:n,variant1:t,variant2:i,variant3:r,variant4:u})}function TrackLinkID(n){if(Next.Settings.Channel.PlatModGoogleAnalyticsSDK)window.subjects&&window.subjects["$ GA_TRACK_LINK"]?window.subjects["$ GA_TRACK_LINK"].next({Link:n}):console.log("Error Tracking GA Link");else{var t=ReturnValidString($(n).attr("data-link-id")),i=ReturnValidString($(n).attr("data-link-name"));t!=""&&TrackGAEvent("LID",t,i,0)}}function TrackPlatModLinkID(n,t,i,r,u){t||(t=ReturnValidString($(n).data("ga-v1")));i||(i=ReturnValidString($(n).data("ga-v2")));r||(r=ReturnValidString($(n).data("ga-v3")));u||(u=ReturnValidString($(n).data("ga-v4")));t!==""&&TrackPlatModGAEvent("Nav Bar",t,i,r,u)}function callCheckForRecentlyViewed(){if(typeof NextBasket=="undefined"||NextBasket.VisitorID=="")setTimeout(function(){callCheckForRecentlyViewed()},100);else try{SetRecentlyViewedDisplay()}catch(n){}}function clearRecentlyViewed(){$(".RecentlyViewed").ItemScroller("clearList")}var GoogleAnalyticsEnabled,GoogleAnalyticsAccount,_gaq,preventCollapse;$(function(){var n=NextBasket;n.SubscribeToEvents&&!Next.Settings.Channel.EnableModernisedHeader&&n.SubscribeToEvents()});Next.Settings.Channel.PlatModGoogleAnalyticsSDK||(GoogleAnalyticsEnabled=!1,_gaq=_gaq||[]);$(document).on("featureSettingsReady",function(){callCheckForRecentlyViewed()});preventCollapse=!1