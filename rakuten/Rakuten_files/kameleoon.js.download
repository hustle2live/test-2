if (undefined === window.Kameleoon){(function(){!function(e,t){e.kbowser=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.find=function(e,t){var r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){var n=e[r];if(t(n,r))return n}},e.assign=function(e){for(var t,r,i=e,n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e}();t.default=n,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.OS_MAP=t.PLATFORMS_MAP=void 0;t.PLATFORMS_MAP={t:"tablet",m:"mobile",d:"desktop"};t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",Linux:"Linux"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){}var t,r,i;return e.parse=function(e){return new n.default(e).getResult()},t=e,i=[],(r=null)&&a(t.prototype,r),i&&a(t,i),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=o(r(92)),n=o(r(93)),s=o(r(94)),a=o(r(17));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UA parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i};var s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var a=[{test:[/windows phone/i],describe:function(e){return{name:s.OS_MAP.WindowsPhone}}},{test:[/windows /i],describe:function(e){return{name:s.OS_MAP.Windows}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(e){return{name:s.OS_MAP.iOS}}},{test:[/macintosh/i],describe:function(e){return{name:s.OS_MAP.MacOS}}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){return{name:s.OS_MAP.iOS}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){return{name:s.OS_MAP.Android}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}}];t.default=a,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var a=[{test:[/googlebot/i],describe:function(){return{type:"bot"}}},{test:[/huawei/i],describe:function(e){return{type:s.PLATFORMS_MAP.m}}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){return{type:s.PLATFORMS_MAP.m}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"android"===e.getOSName(!0)&&Number(String(e.getOSVersion()).split(".")[0])>=3},describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}}];t.default=a,e.exports=t.default}})}));class APIConfiguration{constructor(e){this.generationTime=e.scriptProduceTime;this.goals=e.goals.map((e=>new APIGoal(e)));this.singlePageSupport=Kameleoon.Internals.runtime?Kameleoon.Internals.runtime.singlePageSupport:e.singlePageSupport;this.siteCode=e.siteCode}}class APIAction{constructor(i,t){const e=0===t;const a=Kameleoon.Internals.runtime.Visitor.currentVisit;const n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer",e?"experimentsTriggered":"personalizationsTriggered",{});this.dateLaunched=i.dateStatusModified;this.dateModified=i.dateModified;this.id=i.id;this.name=i.name;this.targetSegment=new APISegment(i.targetingSegment);this.active=i.targeting&&!i.disabled&&i.displayedVariation&&null!=i.displayedVariation.id;this.triggered=i.targeting||!1;this.goals=Kameleoon.Internals.configuration.goals.filter((t=>-1!=(i.goals||[]).indexOf(t.id))).map((i=>new APIGoal(i)));this.untrackedTrafficReallocationTime=i.untrackedRespoolTime||null;this.triggeredInVisit=n[this.id]?!0:!1;const o=i=>Kameleoon.Internals.runtime.variations.filter((t=>t.id==i))[0];if(e){this.mainGoal=i.kameleoonTracking&&i.kameleoonTracking.mainGoalId?new APIGoal(Kameleoon.Internals.configuration.goals.filter((t=>t.id==i.kameleoonTracking.mainGoalId))[0]):null;let t=o(i.registeredVariationId);this.associatedVariation=t?new APIVariation(t,i):null;this.trafficDeviation={};this.variations=[];this.redirectProcessed=i.redirectProcessed||!1;for(let t in i.deviation){this.trafficDeviation[t]=100*i.deviation[t];this.variations.push(new APIVariation(o(parseInt(t)),i))}this.activatedInVisit=a.ExperimentActivations[this.id]?!0:!1}else{this.mainGoal=new APIGoal(Kameleoon.Internals.configuration.goals.filter((t=>t.id==i.mainGoalId))[0]);this.associatedVariation=new APIVariation(o(i.associatedVariation.id),i);this.activatedInVisit=this.triggeredInVisit&&a.PersonalizationActivations[this.id]?!0:!1}}}class APIActionActivation{constructor(i,t,n){const a=0===i;const o=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(t,a);const s=a?"ExperimentActivations":"PersonalizationActivations";const e=n[s][t].associatedVariationID;const c=Kameleoon.Internals.configuration.variations.filter((i=>i.id==e))[0];if(a){this.experimentID=t;this.experiment=o?new APIAction(o,0):null}else{this.personalizationID=t;this.personalization=o?new APIAction(o,1):null}this.times=n[s][t].times;this.associatedVariationID=e;this.associatedVariation=c?new APIVariation(c,o):null}}class APIActions{constructor(e){const i=0===e;const t=()=>{if(Kameleoon.Internals.runtime)return Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(e);else return[]};const n=i=>new APIAction(i,e);this.getAll=()=>t().map(n);this.getActive=()=>t().filter((e=>(!0===e.targeting||e.trackingPerformed)&&1!=e.disabled&&e.displayedVariation&&null!=e.displayedVariation.id)).map(n);this.getTriggeredInVisit=()=>t().map(n).filter((e=>e.triggeredInVisit));this.getActivatedInVisit=()=>t().map(n).filter((e=>e.activatedInVisit));const a=(e,i)=>{const a=t().filter((t=>t[e]==i))[0];if(a)return n(a);return null};this.getById=e=>a("id",e);this.getByName=e=>a("name",e);if(i){this.assignVariation=(e,i,n)=>{const a=t().filter((i=>i.id==e))[0];if(a)if(void 0===a.registeredVariationId||n){a.registeredVariationId=i;a.assignmentTime=(new Date).getTime();a.writeLocalData()}};this.block=(e,t=!1)=>{const n=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e,i);if(n){if(t){const i=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","blockedExperiments",[]);i.push(e);Kameleoon.Internals.runtime.storedData.saveField("Runtime","blockedExperiments",i)}n.setBlocked("API")}};this.trigger=(e,t)=>{const n=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e,i);if(n)if(t){if(n){n.performVariationAssignment(!0);Kameleoon.Analyst.Actions.performActionsTracking([n])}}else{n.trigger();Kameleoon.Analyst.Actions.process([n])}};this.triggerExperiment=(e,i)=>{this.trigger(e,i);}}else{this.block=(e,t=!1)=>{};this.disable=e=>{};this.trigger=(e,t)=>{}}}}class APIGoal{constructor(t){if(t){this.id=t.id;this.name=t.name;this.type=t.type}}}class APISegment{constructor(i){if(i){this.id=i.id;this.name=i.name}}}class APITemplate{constructor(s,t){this.name=s;this.customFields=t}}class APIVariation{constructor(e,t={}){if(e){this.id=e.id;this.name=e.name;if(t.experimentAction){const i=t.variations.filter((t=>t.id==e.id))[0];this.reallocationTime=i?i.respoolTime:null}else this.reallocationTime=null;this.instantiatedTemplate=e.widgetTemplateInputData?new APITemplate(e.widgetTemplateName,e.widgetTemplateInputData):null}}}class APIVisit{constructor(t){this.pageViews=t.obtainPageNumberViews();this.duration=t.lastActivityDate-t.startDate;this.locale=Kameleoon.Utils.getLocale();this.startDate=t.startDate;this.index=t.visitNumber;this.currentProduct=null;this.products=[];this.clicks=t.clicks||0;this.pageURLsVisited=t.pageURLsVisited;this.activatedSegments=t.activatedSegments;this.lastActivityDate=t.lastActivityDate;this.activatedExperiments=Object.keys(t.ExperimentActivations).map((e=>new APIActionActivation(0,parseInt(e),t)));this.activatedPersonalizations=Object.keys(t.PersonalizationActivations).map((e=>new APIActionActivation(1,parseInt(e),t)));if(t==Kameleoon.Internals.runtime.Visitor.currentVisit){this.device=new Device;this.geolocation=t.Geolocation;if(Kameleoon.Internals.runtime.mentalistRun)Object.defineProperty(this,"initialConversionPredictions",{enumerable:!0,get:function(){return Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(null)}});}this.conversions=Kameleoon.Utils.clone(t.conversions);this.customData={};const e=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const i in t.customData){const a=e[i];if(null!=a)this.customData[a.name]=Kameleoon.Gatherer.CustomData.obtainParsedValue(i,t.customData[i])}let i="<OTHER / UNKNOWN>";let a=[];let n=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","firstReferrersIndices",[]);for(let t=0,e=n.length;t<e;t++){let e=n[t];let s;if(0==e)s="<RESTART>";else{let t=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[e-1];s=null==t?i:t.name}a.push(s)}this.acquisitionChannel=a[0];this.landingPageURL=t.landingPageURL;this.weather=t.Weather}}class APIVisitor{constructor(){this.getCustomDataVisitor=()=>{const t={};const i=Kameleoon.Internals.runtime.Visitor.customData;const s=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const e in i)if(s[e])t[s[e].name]=Kameleoon.Gatherer.CustomData.obtainParsedValue(e,i[e]);return t};this.setVisitorCode=t=>{Kameleoon.Internals.runtime.Visitor.setVisitorCode(t)};const{Visitor:t,personalizationsActive:i,Consent:s}=Kameleoon.Internals.runtime;this.numberOfVisits=t.totalVisits;this.timeStartedEldestVisit=t.timeStartedEldestVisit;this.customData=this.getCustomDataVisitor();this.personalizationsActive=i;this.code=t.currentVisit.visitorCode;this.currentVisit=new APIVisit(t.currentVisit);this.visits=t.visits.map((t=>new APIVisit(t)));this.previousVisit=t.visits.length>1?new APIVisit(t.visits.slice(-2)[0]):null;this.experimentLegalConsent=s.AB_TESTING;this.personalizationLegalConsent=s.PERSONALIZATION;this.productRecommendationLegalConsent=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","productRecommendation")?!0:!1;this.firstVisitStartDate=t.timeStartedEldestVisit}}class Analyst{constructor(){this.initialize=e=>{this.isTimeout=!1;if(window.kameleoonDisplayPage){if(null==Kameleoon.Internals.configuration.behaviorWhenTimeout||document.getElementById("kameleoonLoadingStyleSheet"))window.clearTimeout(window.kameleoonDisplayPageTimeOut);else if(null==window.kameleoonEndLoadTime)this.isTimeout=!0;try{window.kameleoonDisplayPage(!0)}catch(e){}window.kameleoonDisplayPage=null}window.kameleoonEndLoadTime=(new Date).getTime();e()};this.load=()=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"load",time:(new Date).getTime()});Kameleoon.Utils.runProtectedFunction((function(){if(window.kameleoonQueue)window.kameleoonQueue=new CommandQueue(window.kameleoonQueue,"IMMEDIATE");window.addEventListener("error",(e=>{if(e.error&&e.error.stack&&e.error.stack.match(/kameleoon/gi)){Kameleoon.Utils.Logger.send(e.error.stack,"kameleoon.js");return!1}}));Kameleoon.Analyst.initialize((()=>{const e=Kameleoon.Analyst.checkBlockingElements();const o=window.kameleoonEndLoadTime-(window.kameleoonStartLoadTime||window.kameleoonEndLoadTime)-25;let n=!1;Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Loaded",{timeout:"TIMEOUT"==e,loadTime:o});if(Kameleoon.Internals.runtime){n=!0;Kameleoon.Internals.runtime.clear()}if(0==e.length){Kameleoon.Internals.runtime=new Runtime(n);Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Internals.runtime.run()}))}else{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"abort",blockingReason:e});Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Aborted",{reason:e})}}))}))};this.loadKameleoonFull=(e,o)=>{if(!Kameleoon.Internals.runtime.kameleoonFull&&(this.kameleoonFullNeeded()||o)){const o="kameleoonFullApplicationCode";const n=o=>{Kameleoon.Utils.runProtectedScript(o+"\n;"+"("+e.toString()+")()","kameleoonFull.js")};const a=sessionStorage.getItem(o);if(null!=a)n(a);else{const{STATIC_HOST_NAME:e,DOMAIN:a}=Kameleoon.Internals.configuration;Kameleoon.Utils.performBeaconServerCall("https://"+e+"."+a+"/kameleoon-full.js?cache="+Kameleoon.Utils.obtainRandomString(16),(e=>{if(void 0===e.readyState||4==e.readyState&&200==e.status){sessionStorage.setItem(o,e.responseText);n(e.responseText)}}))}}else e()};this.Actions=new Actions;this.Goals=new Goals}checkBlockingElements(){let e=!1;try{const o="kameleoonPrivateMode";if(window.localStorage||window.sessionStorage){localStorage.getItem(o);sessionStorage.getItem(o)}else e=!0}catch(o){e=!0}if(e)return"STORAGE";if(this.isTimeout){return"TIMEOUT"}document.removeEventListener("visibilitychange",Kameleoon.Analyst.load);if("prerender"==document.visibilityState){document.addEventListener("visibilitychange",Kameleoon.Analyst.load);return"PRERENDER"}if(-1!=location.href.indexOf("kameleoonDisabled"))return"PARAMETER";return""}kameleoonFullNeeded(){const{parameters:e,simulationMode:o}=Kameleoon.Internals.runtime;if(sessionStorage.getItem("kameleoonFullApplicationCode")||sessionStorage.getItem("kameleoonLightExtension")||e.kameleoon||e.kameleoonVariationId||e["kameleoon-simulation"]||e.kameleoonLightExtension||o||Kameleoon.Utils.readLocalData("kameleoonSimulationParameters","COOKIE"))return!0;return!1}loadSimulation(e){if(!Kameleoon.Internals.runtime.parameters.kameleoonVariationId)Object.keys(localStorage).forEach((e=>{if(-1!==e.indexOf("kameleoonVariation-"))localStorage.removeItem(e)}))}loadVariationFromServer(e,o){}processSimulations(){}}Analyst.CODE_ALPHABET="abcdefghijklmnopqrstuvwxyz0123456789";class API{constructor(){this.Core={enableLegalConsent:function(e="BOTH"){Kameleoon.Internals.runtime.Consent.enable(e)},disableLegalConsent:function(e="BOTH"){Kameleoon.Internals.runtime.Consent.disable(e)},enableSinglePageSupport:function(){Kameleoon.Internals.runtime.enableSinglePageSupport.apply(Kameleoon.Internals.runtime,arguments)},enableDynamicRefresh:function(){Kameleoon.Internals.runtime.enableDynamicRefresh.apply(Kameleoon.Internals.runtime,arguments)},getConfiguration:()=>new APIConfiguration(Kameleoon.Internals.configuration),load:function(){Kameleoon.Analyst.load.apply(Kameleoon.Analyst,arguments)},processRedirect:function(){Kameleoon.Utils.processRedirect.apply(Kameleoon.Utils,arguments)},runWhenConditionTrue:(e,n,t=200)=>{if(e())Kameleoon.Utils.runProtectedFunction(n,!0);else{const o=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(o);this.Core.runWhenConditionTrue.apply(Kameleoon,[e,n,t])}),t,!0)}},runWhenElementPresent:(e,n,t,o)=>{const a=null==t;const r=Kameleoon.Utils.querySelectorAll(e);const i=n;if(o)n=n=>{KMutationObserver.setMutationObserverSPA();const t=`data-kameleoon-dynamic-class-${Kameleoon.Utils.obtainRandomString(4)}`;const o=e=>{e.forEach((e=>e.setAttribute(t,"true")))};o(n);i(n);Kameleoon.Internals.runtime.waitingDynamicElements.push({selector:e,attribute:t,callback:e=>{o(e);i(e)}})};if(!Kameleoon.Internals.runtime.querySelectorAllHasError)if(0<r.length)Kameleoon.Utils.runProtectedFunction((()=>{n(r)}),!0);else if(Kameleoon.Internals.runtime.cantUseMutationObserver||!a){const n=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(n);this.Core.runWhenElementPresent.apply(Kameleoon,[e,i,t||200,o])}),t||200,!0)}else{Kameleoon.Internals.runtime.waitingElementPresentObjects.push({selector:e,callback:n,useAntiFlicker:a})}},runWhenShadowRootElementPresent:(e,n,t,o)=>{this.Core.runWhenElementPresent(e,(a=>{const r=a.filter((e=>e.shadowRoot));if(0===r.length){const a=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearInterval(a);this.Core.runWhenShadowRootElementPresent.apply(Kameleoon,[e,n,t,o])}),150);return}const i=`data-kameleoon-shadow-class-${Kameleoon.Utils.obtainRandomString(4)}`;const l=()=>{let e=[];r.forEach((t=>{if(t.shadowRoot)e=e.concat(Kameleoon.Utils.querySelectorAll(n,t.shadowRoot))}));if(o)e=e.filter((e=>!e.getAttribute(i))).map((e=>{e.setAttribute(i,"true");return e}));return e};const s=l();if(s.length)t(s);if(!s.length||o){const e=Kameleoon.Utils.setInterval((()=>{const n=l();if(n.length){t(n);!o&&Kameleoon.Utils.clearInterval(e)}}),150)}}))}};this.Goals={cancelConversion:(e,n)=>{try{this.Goals.processConversions(e,n,!0)}catch(e){}},processConversion:(e,n)=>{try{this.Goals.processConversions(e,n,!1)}catch(e){}},processConversions:(e,n,t)=>{Kameleoon.Internals.runtime.goals.forEach((o=>{if(e==o.id||e==o.name)Kameleoon.Analyst.Goals.processConversions([{goal:o,revenue:n,negative:t}])}))}};this.Data={readLocalData:e=>Kameleoon.Internals.runtime.storedData.Vars[e]?Kameleoon.Internals.runtime.storedData.Vars[e].value:null,resetCustomData:e=>{this.Data.setCustomData(e,[],!0)},retrieveDataFromRemoteSource:(e,n)=>{const t={siteCode:Kameleoon.Internals.configuration.siteCode};let o="map";if(e instanceof Array){o="maps";t.keys=encodeURIComponent(JSON.stringify(e))}else t.key=encodeURIComponent(e.toString());Kameleoon.Utils.performBeaconServerCall(Kameleoon.Utils.addParameterToURL(`${Kameleoon.Internals.runtime.DATA_URL}/map/${o}`,Kameleoon.Utils.parseObjectToUrlParams(t),!1),(e=>{if(4==e.readyState){let t={};if(200==e.status)t=JSON.parse(e.responseText);n&&n(t)}}),null)},setCustomData:(e,n,t=!1)=>{if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.gathererRun){let o=null;for(const n in Kameleoon.Internals.runtime.Gatherer.configuration.customData){const t=Kameleoon.Internals.runtime.Gatherer.configuration.customData[n];if(null!=t&&t.name==e){o=parseInt(n);break}}if(null!=o)Kameleoon.Gatherer.CustomData.register(o,{value:n,overwrite:t})}},writeLocalData:(e,n,t)=>{Kameleoon.Internals.runtime.storedData.Vars[e]={value:n,date:(new Date).getTime()+24*60*60*1e3*(t?30:1/24)}},performRemoteSynchronization:(e,n,t)=>{}};this.Events={triggered:[],trigger:e=>{this.Core.runWhenConditionTrue((()=>!0===Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval),(()=>{this.Events.triggered.push(e);if(Kameleoon.Analyst.Actions)Kameleoon.Analyst.Actions.processAllActions();if(Kameleoon.Targeting)Kameleoon.Targeting.processAllTargetingSegments();}),100)}};this.Tracking={processOmniture:e=>{Kameleoon.Tracking.processOmniture&&Kameleoon.Tracking.processOmniture(e)}};this.Experiments=new APIActions(0);this.Personalizations=new APIActions(1);this.Segments={getAll:()=>Kameleoon.Internals.runtime.targetingSegments.map((e=>new APISegment(e))),getById:e=>{const n=Kameleoon.Internals.runtime.targetingSegments.filter((n=>n.id==e))[0];return n?new APISegment(n):null},getByName:e=>{const n=Kameleoon.Internals.runtime.targetingSegments.filter((n=>n.name==e))[0];return n?new APISegment(n):null},reevaluate:e=>{let n=-1;const t=Kameleoon.Internals.runtime.targetingSegments||[];for(let o=0;o<t.length;o++){const a=t[o];if(a.id==e){n=o;break}}if(n>-1){let t;if(Kameleoon.Internals.runtime.simulationMode)t=Kameleoon.Internals.runtime.simulationModeData.targetingSegments.filter((n=>n.id==e))[0];else t=Kameleoon.Internals.configuration.targetingSegments.filter((n=>n.id==e))[0];if(t){Kameleoon.Internals.runtime.targetingSegments.splice(n,1);const o=Kameleoon.Utils.clone(t);Kameleoon.Internals.runtime.targetingSegments.push(o);Kameleoon.Targeting.checkTargetingSegmentsTargeting([o]);Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0).concat(Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(1)).forEach((n=>{n.setTargetingSegment(e);if(n.targetingSegmentId==e)n.forceTargeting=!1}));Kameleoon.Analyst.Actions.processAllActions();return o.targeting}}return;},trigger:e=>{const n=Kameleoon.Internals.runtime.targetingSegments.filter((n=>n.id==e));if(n.length>0){n[0].targeting=!0;Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList("experiments").concat(Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList("personalizations")).forEach((n=>{if(n.targetingSegmentId==e){n.targeting=void 0;n.rescheduleTargeting=!0;n.forceTargeting=!0}}));Kameleoon.Analyst.Actions.processAllActions();Kameleoon.Targeting.processTargetingSegments(n)}}};this.Variations={execute:e=>{let n=Kameleoon.Internals.runtime.variations.filter((n=>n.id==e))[0];if(n){n=new Variation(n);Kameleoon.Utils.addCSSStyleSheet(n.cssCode);return n.applyJavascriptCode(!0)}return null}};this.Utils={addEventListener:function(e,n,t,o){Kameleoon.Utils.addEventListener(e,n,t,o,!0)},addUniversalClickListener:function(e,n,t){const o=Kameleoon.Internals.runtime.mouseDownEvent;this.addEventListener(e,o,(function(e){if(!Kameleoon.Internals.runtime.touchMoveEvent&&("mousedown"==o||!e.target||!e.target.closest||!e.target.closest("[disabled]")))n&&n(e)}))},clearInterval:function(){Kameleoon.Utils.clearInterval.apply(Kameleoon.Utils,arguments)},clearTimeout:function(){Kameleoon.Utils.clearTimeout.apply(Kameleoon.Utils,arguments)},createHash:function(e){return Kameleoon.Utils.computeStringHash.apply(Kameleoon.Utils,arguments)},getURLParameters:function(){return Kameleoon.Utils.parseParameters.apply(Kameleoon.Utils,arguments)},performRequest:(e,n,t,o=5e3)=>Kameleoon.Utils.performBeaconServerCall(e,n,t,o),querySelectorAll:function(e){return Kameleoon.Utils.querySelectorAll.apply(Kameleoon.Utils,arguments)},setInterval:(e,n=200)=>Kameleoon.Utils.setInterval(e,n,!1,!0),setTimeout:(e,n=200)=>Kameleoon.Utils.setTimeout(e,n,!0)};Object.defineProperty(this.Utils,"mouseDownEvent",{enumerable:!0,get:function(){return Kameleoon.Internals.runtime.mouseDownEvent}});Object.defineProperty(this.Utils,"touchMoveEvent",{enumerable:!0,get:function(){return Kameleoon.Internals.runtime.touchMoveEvent}});Object.defineProperty(this,"Visitor",{enumerable:!0,get:function(){try{if(!Kameleoon.Internals.runtime)return{setVisitorCode:e=>{Kameleoon.Internals.configuration.predefinedVisitorCode=e}};else return new APIVisitor}catch(e){return null}}});Object.defineProperty(this,"CurrentVisit",{enumerable:!0,get:function(){try{return new APIVisit(Kameleoon.Internals.runtime.Visitor.currentVisit)}catch(e){return null}}})}}class ElementSet{constructor(){this.appendEmptyElement=e=>{};this.pageElementSets=[];this.pageElementSetsIds={};this.pageElementSetsSpa=[];this.pageElementSetsSpaIds={};window.kameleoonVirtualRootElement=document.createElement("div")}addDuplicatedData(e,t,o){if(!e||!Kameleoon.Internals.runtime.singlePageSupport)return;if(null!=o&&e.getAttribute){const t=e.getAttribute("data-kameleoon-class")||"";if(-1==t.toString().indexOf(o))e.setAttribute("data-kameleoon-class",(t.length>0?t+" ":"")+o)}if(null!=t)e.setAttribute("data-kameleoon-id",t.toString())}addRelativePositionToReferenceElement(e){if("absolute"!=Kameleoon.Utils.obtainComputedStyle(e).position&&document.body!=e)this.setStyle(e,"position","relative",!1)}addClassName(e,t){e.className+=(e.className?" ":"")+t}changeHTMLContent(e,t,o,l,n){}checkElementIsInDocument(e,t){let o=null,l=document;if(t.context){o=Kameleoon.Utils.querySelectorAll(t.context);if(o[0])l=o[0].contentWindow.document}while(e&&e!=l.documentElement&&e!=window.kameleoonVirtualRootElement)if(e.parentNode)e=e.parentNode;else return!1;return e==l.documentElement?!0:"VIRTUAL"}checkClassName(e,t){return-1!=(" "+e.className+" ").indexOf(" "+t+" ")}checkElementLoaded(e){if(!e||!e.parentNode)return!1;return e.nextSibling?!0:this.checkElementLoaded(e.parentNode)}obtainDepth(e){let t=0;while(null!==e.parentNode){++t;e=e.parentNode}return t}obtainElements(e,t,o,l,n){let a,i,s=[];for(let r=0,m=e.length;r<m;++r){if(null===e[r])continue;let m=e[r].selector;let d=e[r].currentQuery;let u=e[r].options;let c=null,f=document;if(u.context){c=Kameleoon.Utils.querySelectorAll(u.context);if(!c[0])continue;c=c[0].contentWindow.document;f=c;if(l)Kameleoon.Utils.addCSSStyleSheet(l.css,l.action,c)}if(!c&&n)c=n;if(u.scopeURL&&!new RegExp(u.scopeURL).test(window.location.href))a=[];else if(u.customSelector||u.autoGeneratedSelector||u.contentSelector){a=Kameleoon.Utils.querySelectorAll(m,c);if(0==a.length&&d&&d!=m)a=Kameleoon.Utils.querySelectorAll(d,c);if(u.kameleoonClass)for(let e=0,t=a.length;e<t;++e)if(0==this.checkClassName(a[e],"KameleoonClass"+u.kameleoonClass)){this.saveElementOriginalData(a[e],u.domOperation);this.addClassName(a[e],"KameleoonClass"+u.kameleoonClass);Kameleoon.ElementSet.addDuplicatedData(a[e],null,u.kameleoonClass)}if(u.kameleoonId)for(let e=0,t=a.length;e<t;++e){this.saveElementOriginalData(a[e],u.domOperation);a[e].id="kameleoonId"+u.kameleoonId;Kameleoon.ElementSet.addDuplicatedData(a[e],u.kameleoonId,null)}if(0==a.length){if(u.kameleoonId){let e=document.getElementById("kameleoonId"+u.kameleoonId);a=e?[e]:[]}if(u.kameleoonClass)a=Kameleoon.Utils.querySelectorAll(".KameleoonClass"+u.kameleoonClass,null)}if(0==a.length)a=Kameleoon.Utils.querySelectorAll(m,window.kameleoonVirtualRootElement)}else switch(m.charAt(0)){case"#":let t=m.substr(1);if(Kameleoon.Internals.runtime.singlePageSupport)a=[f.querySelector(m)];else a=[f.getElementById(m.substr(1))];if(!a[0]){let o;if(e[r].element)o=e[r].element;else if(0==t.indexOf("kameleoonElement"))if(u.domOperation){}else if(f.body){o=f.createElement("div");f.body.appendChild(o)}else e[r].evaluated=!1;if(o){o.id=t;Kameleoon.ElementSet.addDuplicatedData(o,t,null);Kameleoon.Internals.runtime.addedIDs["#"+t]=!0;a=[o]}else a=[]}break;default:a=Kameleoon.Utils.querySelectorAll(m,c);break}let p=!1;i=[];for(let l=0,n=a.length;l<n;++l)if(!a[l].getAttribute("kameleoon")){if(e[r].overwrited)e[r].overwrited=!1;if(!t||void 0===u.htmlContent||this.checkElementLoaded(a[l])){if(u.userPosition&&u.userPosition.referenceElement&&!Kameleoon.Utils.querySelectorAll(u.userPosition.referenceElement)[0])continue;i.push({element:a[l],options:Kameleoon.Utils.clone(u)})}}else if(!e[r].overwrited){i.push({element:a[l],options:Kameleoon.Utils.clone(u)});e[r].overwrited=!0}e[r].removeSelector=p||o&&0<a.length&&null!=u.autoGeneratedSelector;s=s.concat(i)}return s}performHTMLReplacements(e,t,o,l,n){let a=null;let i=!0;while(i){a=this.obtainElements(e,t,o,l,n);if(0==a.length)break;a=a.sort(((e,t)=>{let o=this.obtainDepth(e.element),l=this.obtainDepth(t.element);return o<l?-1:o>l?1:0}));a=this.removeDuplicates(a);i=!1;}for(let t=0,o=e.length;t<o;++t)if(e[t]&&e[t].removeSelector)e[t]=null;return a}powerElement(e,t,o){if(!t.dataset||!t.dataset.kameleoonEvaluated||e.overwrited||Kameleoon.Internals.runtime.editorMode||Kameleoon.Internals.runtime.kameleoonSelectionIframeMode){if(!t||Kameleoon.Internals.configuration.specifyElements&&-1==t.className.indexOf("Kameleoon"))return;if(t.dataset)t.dataset.kameleoonEvaluated=!0;this.saveElementOriginalData(t);t.kameleoonData.powered=!0;t.setAttribute("kameleoon","active");if(o.kameleoonId&&(!t.id||0===t.getAttribute("id").indexOf("kameleoonId")||0===t.getAttribute("id").indexOf("kameleoonElement"))){t.id="kameleoonId"+o.kameleoonId;Kameleoon.ElementSet.addDuplicatedData(t,o.kameleoonId,null)}if(o.kameleoonClass&&0==this.checkClassName(t,"KameleoonClass"+o.kameleoonClass)){this.addClassName(t,"KameleoonClass"+o.kameleoonClass);Kameleoon.ElementSet.addDuplicatedData(t,null,o.kameleoonClass)}this.setupNoLinkPropagation(o,t);this.processSpecialCases(t);this.processLinks(t,o.href)}}powerElements(e,t){for(let o=0,l=t.length;o<l;++o)this.powerElement(e,t[o].element,t[o].options)}processAttributesData(e,t){}processDomOperation(e,t,o,l){}processElementSet(e,t,o,l,n,a){if(!e.id)e.id=Math.floor(999999*Math.random());let i=null;let s=[];if(!this.pageElementSetsIds[e.id.toString()]){this.pageElementSetsIds[e.id.toString()]=!0;this.pageElementSets.push(e)}i=this.performHTMLReplacements([e],o,l,t,a);if((Kameleoon.Internals.runtime.singlePageSupport||Kameleoon.Internals.runtime.dynamicRefresh)&&!this.pageElementSetsSpaIds[e.id.toString()]){this.pageElementSetsSpaIds[e.id.toString()]=!0;this.pageElementSetsSpa.push({elementSet:e,potentialElementsWithOptions:i})}if(n)window.editor.services.EngineService.getInstance().refreshCustomizableElements();for(let e=0,t=i.length;e<t;++e){if(o&&i[e].options.userPosition&&"RELATIVE"!=i[e].options.userPosition.positionMode)continue;s.push(i[e])}this.powerElements(e,s);if(0===s.length&&!e.overwrited)e.evaluated=!1;return s?s.length>0:!1}processLinks(e,t){if(!t)return;if("a"==e.nodeName.toLowerCase())e.href=t;else{Kameleoon.Utils.addEventListener(e,"click",(function(){window.location.href=t}));e.style.cursor="pointer"}}processSpecialCases(e){if("body"==e.nodeName.toLowerCase()&&-1!=Kameleoon.Utils.obtainComputedStyle(e).background.indexOf("linear-gradient")){e.style.backgroundRepeat="no-repeat";if(window.innerHeight-document.documentElement.scrollHeight>0)e.style.backgroundAttachment="fixed"}}processUserPosition(e,t,o,l){}removeDuplicates(e){let t=[];for(let o=0,l=e.length;o<l;++o)if(void 0==e[o].element.kameleoonUnique){e[o].element.kameleoonUnique=t.length;if(e[o].options.kameleoonClass)e[o].options.kameleoonClass=[e[o].options.kameleoonClass];t.push(e[o])}else{let l=e[o].element.kameleoonUnique;for(let n in e[o].options)if("kameleoonClass"==n){if(!t[l].options[n])t[l].options[n]=[];t[l].options[n].push(e[o].options[n])}else t[l].options[n]=e[o].options[n]}for(let e=0,o=t.length;e<o;++e)if(void 0!==t[e].element.kameleoonUnique){t[e].element.kameleoonUnique=void 0;t[e].element.removeAttribute("kameleoonUnique")}return t}replaceHTMLContent(e,t,o,l){o=this.replaceImagePlaceholder(o);let n=this.checkElementIsInDocument(e,l);if(0==o.indexOf("kameleoonInputImage:")){this.saveElementOriginalData(e);e.kameleoonData.originalData.imgSrc=e.src;e.src=o.replace("kameleoonInputImage:","");return e}let a=document.createElement(n?e.parentNode.nodeName.toLowerCase():"div");a.innerHTML=o;let i=null;if(0===o.search(/<td>|<tr>/)){let e=document.createElement("table");e.innerHTML=o;a.innerHTML="";a.appendChild(e)}while(a.childNodes.length>0){let o=a.childNodes[0];o.kameleoonData=e.kameleoonData;o.kameleoonData.originalData.replacedElement=e;if(!i){if(3==o.nodeType)return!1;i=o;o.id=e.id;if("copyAttributes"==i.getAttribute("kameleoon")){for(let t=0,o=e.attributes.length;t<o;++t){if("srcset"==e.attributes[t].name){if(i.getAttribute("src"))i.setAttribute("srcset",i.getAttribute("src"));continue}if("src"!=e.attributes[t].name)i.setAttribute(e.attributes[t].name,e.attributes[t].value)}i.removeAttribute("kameleoon")}let t=e.className.match(/(KameleoonClass[^\s]*)/);if(t)o.className+=(o.className?" ":"")+t[1];if(l.kameleoonId){o.id="kameleoonId"+l.kameleoonId;Kameleoon.ElementSet.addDuplicatedData(o,l.kameleoonId,null)}if(l.kameleoonClass&&0==this.checkClassName(o,"KameleoonClass"+l.kameleoonClass)){this.addClassName(o,"KameleoonClass"+l.kameleoonClass);Kameleoon.ElementSet.addDuplicatedData(o,null,l.kameleoonClass)}}if(n)e.parentNode.insertBefore(o,e);if(!0!==n)for(let l=0,n=t.length;l<n;++l)if(e==t[l].element)t[l].element=o;if(!1===n){e=o;o.parentNode.removeChild(o)}}if(n)e.parentNode.removeChild(e);return i}replaceImagePlaceholder(e){return e.replace(/STATIC_IMAGE_PATH/g,Kameleoon.Internals.configuration.IMAGE_PATH)}reserveSpaceForElement(e){}saveElementOriginalData(e,t){if(!e||e.kameleoonData&&e.kameleoonData.originalData)return;if(!e.kameleoonData)e.kameleoonData={};e.kameleoonData.originalData={};e.kameleoonData.originalData.attributesData={};if(e.parentNode)e.kameleoonData.originalData.parentNode=e.parentNode;if(e.nextSibling){e.kameleoonData.originalData.nextSibling=e.nextSibling;if(3===e.nextSibling.nodeType&&e.previousSibling&&3===e.previousSibling.nodeType&&t&&("INSERT_AFTER"===t||"INSERT_BEFORE"===t)){let t=document.createComment("ReplaceHolderComment");let o=e.nextSibling.parentNode.insertBefore(t,e.nextSibling);e.kameleoonData.originalData.placeholderComment=o}}if(e.href)e.kameleoonData.originalData.href=e.getAttribute("href");if(e.nodeValue)e.kameleoonData.originalData.nodeValue=e.nodeValue;if(e.attributes)for(let t=0,o=e.attributes.length;t<o;++t){let o=e.attributes[t];e.kameleoonData.originalData.attributesData[o.nodeName]=o.nodeValue}}setStyle(e,t,o,l){this.saveElementOriginalData(e);let n=e.style.cssText;if(n){n=n.replace(/^\s+|\s+$/g,"");let e=new RegExp("(^|;)(\\s*"+t+"(.*?);)");n=n.replace(e,"$1");if(n){if(n.lastIndexOf(";")<n.length-2)n+=";";if(n.lastIndexOf(" ")!=n.length-1&&o)n+=" "}}else n="";let a=n+(o?t+": "+o+(l?" !important;":";"):"");e.style.cssText=a}setupNoLinkPropagation(e,t){if(e.noLinkPropagation)t.setAttribute("kData","nlp")}}class Gatherer{constructor(){this.MAX_HREF_LENGTH_IN_A_REQUEST=200;this.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST=200}run(e){let t=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.Gatherer);if("string"==typeof t)t=JSON.parse(Kameleoon.Utils.decodeString(t));Kameleoon.Internals.runtime.Gatherer={configuration:t,active:!0,clicks:0};this.Browser=new Browser(t.browsers);this.CustomData=new CustomData(t.customData);this.KeyPage=new KeyPage(t.keyPages);this.Language=new Language;this.OperatingSystem=new OperatingSystem(t.oss);this.Referrer=new Referrer(t.referrers);this.TimeZone=new TimeZone;Kameleoon.Internals.runtime.storedData.saveField("Gatherer","startsOfVisitForCurrentPage",0);Kameleoon.Internals.runtime.Visitor=new Visitor;e();this.track(VisitEvent_Page);this.track(VisitEvent_StaticData);VisitEvent_Activity.initialize();this.CustomData.run();Kameleoon.Mentalist.run();Kameleoon.Internals.runtime.gathererRun=!0}startNewVisit(e,t){Kameleoon.Internals.runtime.Visitor.updateFromStoredData(!0,!0,t);this.track(VisitEvent_Page);this.track(VisitEvent_StaticData);this.CustomData.run();}track(e,t){new VisitEvent(e).track(t)}}class KameleoonEngine{constructor(){this.Analyst=new Analyst;this.API=new API;this.ElementSet=new ElementSet;this.Gatherer=new Gatherer;this.Loader=new Loader;this.Mentalist=new Mentalist;this.Targeting=new Targeting;this.Tracking=new Tracking;this.Utils=new Utils}}class Loader{constructor(){this.enableKameleoonEditorListener=()=>{if(!Kameleoon.Internals.runtime.editorListenerEnabled){Kameleoon.Internals.runtime.editorListenerEnabled=!0;const t=t=>{if(!t)t=window.event;Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,t)};Kameleoon.Utils.addEventListener(document,"keyup",t,!1)}};this.listenKeys=t=>{if(t.shiftKey){if(113==t.keyCode&&Kameleoon.Internals.configuration.webExperimentationSetup){Kameleoon.Internals.runtime.editorMode=!0;Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)}),!0)}if(115==t.keyCode&&(Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.parameters.kameleoonVariationSelection))Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Loader.enableSimulationPanel()}),!0)}};}}class Mentalist{constructor(){this.MAX_VISIT_AGE=90*24*60*60*1e3;this.computeVariationIdToScore=t=>{try{let e=Kameleoon.Internals.configuration.MentalistFeatures;let i=Kameleoon.Internals.runtime.Visitor.currentVisit;let n=this.computePreviousVisits();let r={};let o=this.computeVariationScore(t,null,i,n);if(null!=o)r[0]=o;let l=e.experiments[t].variationIds;for(let e=0,o=l.length;e<o;++e){let o=l[e];let a=this.computeVariationScore(t,o,i,n);if(null!=a)r[o]=a}return r}catch(t){return{}}};this.computeGoalConversionProbabilityPredictionByGoalId=t=>{try{let e=Kameleoon.Internals.configuration.MentalistFeatures;let i=Kameleoon.Internals.configuration.MentalistLearner;let n;if(null==t)n=i.startOfVisitLearner;else{let e=i.targetingSegments[t];if(null==e){n=i.startOfVisitLearner;t=null}else n=e.probabilityLearner}if(0==n.trainingOutputVectorTargetNbUpdates)return{};let r=Kameleoon.Internals.runtime.Visitor.currentVisit;let o=this.computePreviousVisits();let l={};let a=VisitVectorizationUtils.computeVector(r,o,l,!0,null!=t,null,t);let s=Learner.computeProbabilities(n,a,l);let u=n.trainingOutputVectorTargetMean;let c=(null==t?e:e.targetingSegments[t]).outputGoalIds;let m={};for(let t=0,e=c.length;t<e;++t)m[c[t]]=this.computeConversionProbability(u[t],s[t]);return m}catch(t){return{}}};this.computePreviousVisits=()=>new PreviousVisits(Kameleoon.Internals.runtime.Visitor.visits.slice(0,-1).slice(-Kameleoon.Internals.configuration.MentalistFeatures.maxNumberPreviousVisits).filter((t=>(new Date).getTime()-t.startDate<=this.MAX_VISIT_AGE)));this.computeVariationScore=(t,e,i,n)=>{let r=Kameleoon.Internals.configuration.MentalistFeatures;let o=Kameleoon.Internals.configuration.MentalistLearner;let l=o.experiments[t].variationIdToProbabilityLearner[e];if(0==l.trainingOutputVectorTargetNbUpdates)return null;let a={};let s=VisitVectorizationUtils.computeVector(i,n,a,!0,!0,t,null);let u=Learner.computeProbabilities(l,s,a);let c=r.experiments[t].outputGoalWeights;let m=0;for(let t=0,e=c.length;t<e;++t)m+=c[t]*this.computeConversionProbability(l.trainingOutputVectorTargetMean[t],u[t]);return m};this.computeConversionProbability=(t,e)=>{if(0==e)return 0;if(1==e)return 1;if(e>=t)return.5+(e-t)/(1-t)/2;return.5+(e-t)/t/2};this.targetingSegmentsPredictions={}}isSecure(){return null!=Kameleoon.Internals.configuration.MentalistFeatures&&null!=Kameleoon.Internals.configuration.MentalistLearner}run(){Kameleoon.Internals.runtime.mentalistRun=this.isSecure();if(Kameleoon.Internals.runtime.Gatherer.startOfVisit&&Kameleoon.Internals.runtime.mentalistRun&&Kameleoon.Internals.configuration.track){let t=this.computeGoalConversionProbabilityPredictionByGoalId(null);if(!Kameleoon.Utils.testEmptyMap(t)){let e=[];for(let i in t)e.push([parseInt(i),t[i]]);Kameleoon.Gatherer.track(VisitEvent_MentalistPredictionStartOfVisit,{goalIdToConversionProbability:e});Kameleoon.Internals.runtime.storedData.saveField("Gatherer","savedScoresFromMoments",{0:t})}}}}class Runtime{constructor(e){this.isReloaded=e;this.DATA_URL=Kameleoon.Internals.configuration.DATA_URL;this.PAGE_LOADED_POLL_DELAY=250;this.PAGE_LOADING_POLL_DELAY=75;this.enableSinglePageSupport=()=>{this.singlePageSupport=!0;this.href=window.location.href;KMutationObserver.setMutationObserverSPA();Kameleoon.Utils.setInterval((()=>{const e=this.href;this.href=window.location.href;if(e!=this.href)Kameleoon.Analyst.load.apply(this,[])}),100)};this.enableDynamicRefresh=()=>{this.dynamicRefresh=!0;KMutationObserver.setMutationObserverSPA()};this.executeGlobalScript=()=>{if(Kameleoon.Internals.configuration.globalScript&&!this.globalScriptProcessed&&!this.editorMode&&!this.kameleoonSelectionIframeMode){Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"globalScript"});this.globalScriptProcessed=!0;Kameleoon.Utils.runProtectedScript(Kameleoon.Internals.configuration.globalScript,"kameleoonGlobalScript.js")}};this.initializePredefinedVisitorCode=()=>{const{predefinedVisitorCode:e,experiments:t,personalizations:o}=Kameleoon.Internals.configuration;if(e){const i="kameleoonVisitorCode";const n=Kameleoon.Utils.readLocalData(i,"COOKIE")||Kameleoon.Utils.readLocalData(i,"LS");if(n==e)return;const a=this.storedData.Visitor.visits;if(a)a.slice(-1)[0].visitorCode=e;if(this.incomingStoredData)this.incomingStoredData[i]=e;Kameleoon.Utils.saveVisitorCode(e);t.forEach((e=>{Kameleoon.Utils.eraseLocalData("kameleoonExperiment-"+e.id,null,"LS")}));}};this.initializeActions=()=>{if(Kameleoon.Internals.configuration.webExperimentationSetup){this.targetingSegments=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.targetingSegments);this.variations=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.variations);Kameleoon.Internals.configuration.experiments.forEach((e=>{this.Campaigns.addCampaign(new Experiment(e,this.incomingStoredData))}));}};this.initializeActionsAfterGatherer=()=>{};this.initializeIdleTimeListener=()=>{};this.initializeListeners=()=>{Kameleoon.Utils.domReady((()=>{this.domReady=!0;if(!0!==Kameleoon.Internals.configuration.disableEditorLaunchViaKeys)Kameleoon.Loader.enableKameleoonEditorListener();if(this.kameleoonSelectionIframeMode){const e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.setAttribute("src","https://back-office-redesign."+Kameleoon.Internals.configuration.DOMAIN+"/get-script?type=selection");this.headNode.appendChild(e)}if(0==window.kameleoonLightIframe&&window.kameleoonIframeURL)if(this.Gatherer.startOfVisit)Kameleoon.Utils.setTimeout((()=>{const e=document.createElement("iframe");e.src=window.kameleoonIframeURL;e.id="kameleoonExternalIframe";e.style.cssFloat="left !important";e.style.opacity="0.0 !important";e.width="0px";e.height="0px";e.onload=()=>{e.parentNode.removeChild(e)};document.head.appendChild(e)}),5e3)}));if("touchend"==this.mouseDownEvent){Kameleoon.Utils.addEventListener(document,"touchmove",(e=>{this.touchMoveEvent=!0}));Kameleoon.Utils.addEventListener(document,"touchstart",(e=>{this.touchMoveEvent=!1}))}if(!this.iframeLocalStorage)window.addEventListener("storage",(e=>{const t=null==e.key?[""]:e.key.split("-");let o=t[0];if(-1!=o.indexOf("kameleoon")){if(window.document.hasFocus())return;let i;try{i=null==e.newValue?null:JSON.parse(e.newValue).value}catch(e){return}const n={};switch(o){case"kameleoonExperiment":n.type=o;const e=t[1];n.experimentId=parseInt(e);let a;if(null==i)a=null;else{const e=i.split("/")[0];a=isNaN(e)?e:parseInt(e)}n.registeredVariationId=a;break;case"kameleoonGlobalPersonalizationExposition":n.type=o;n.active=null==i?null:"true"==i.split("/")[0];break;case this.dataKeyName:case"kameleoonSimulationVisitorData":n.type=o;n.value=null==i?null:i;break;case"kameleoonLegalConsent":n.type=o;n.saveLegalConsent=null==i?null:i;break}if(null!=n.type)Kameleoon.Utils.processStorageData(n)}}),!1);};this.loadExternalRequests=()=>{this.Geolocation="undefined"!=typeof KGeolocation?new KGeolocation:null;this.IP="undefined"!=typeof IP?new IP:null;};this.loadAudienceSegments=()=>{};this.processPageLoaded=()=>{Kameleoon.Utils.removeBlockingStyleSheet();for(let e=0,t=this.variations.length;e<t;++e){const t="enginePollerForVariation"+this.variations[e].id;if(this[t]){if(this.cantUseMutationObserver)window.clearInterval(this[t]);this[t]=null}}};this.readFromStorageOrExternal=(e,t)=>{if(this.incomingStoredData)return this.incomingStoredData[e];else return Kameleoon.Utils.readLocalData(e,t,!0)};this.setup=()=>{if(this.parameters.kameleoon)Kameleoon.Utils.domReady((()=>{Kameleoon.Loader.enableKameleoonEditor()}));const e="adBlockerCheck";const t=Kameleoon.Utils.setInterval((()=>{let o=document.getElementById(e);if(null==o&&null!=document.body){o=document.createElement("div");o.id=e;o.className="ad-placement";document.body.appendChild(o)}if(null!=o&&0==o.clientWidth){this.adBlocker=!0;Kameleoon.Utils.clearInterval(t)}}),250);const o=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(o);const i=document.getElementById(e);if(null!=i)i.parentNode.removeChild(i);if(null==this.adBlocker){Kameleoon.Utils.clearInterval(t);this.adBlocker=!1}else Kameleoon.Gatherer.track(VisitEvent_AdBlocker)}),2e3);Kameleoon.Utils.addEventListener(window,"pageshow",(e=>{if(e.persisted)this.updateAfterPageCached()}));this.Visitor.updateFromStoredData(!1,!1,!1);if(!Kameleoon.Internals.configuration.requestsAfterConsent)this.loadExternalRequests();KMutationObserver.setMutationObserver();Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Analyst.loadSimulation()}));Kameleoon.Analyst.Actions.processAllActions();Kameleoon.Targeting.processAllTargetingSegments();Kameleoon.Analyst.Goals.checkKameleoonGoals();};this.setupLocalData=e=>{Kameleoon.Utils.addEventListener(window,"message",Kameleoon.Utils.processMessageEvent,!1);if(this.iframeLocalStorage){this.externalIframe=document.getElementById("kameleoonExternalIframe")||window.kameleoonExternalIframe;this.postMessageOrigin=window.kameleoonIframeOrigin||"";this.postMessageCallbacks={};if(null==Kameleoon.Internals.configuration.externalIframeData)Kameleoon.Utils.postMessageToExternalIframe("retrieve",null,null,(t=>{this.incomingStoredData=t;e()}));else{this.incomingStoredData=Kameleoon.Internals.configuration.externalIframeData;e();delete Kameleoon.Internals.configuration.externalIframeData}}else{this.incomingStoredData=null;this.clearOutdatedStorage();e()}};this.updateAfterPageCached=()=>{this.pageCached=!0;if(this.iframeLocalStorage)Kameleoon.Utils.postMessageToExternalIframe("retrieve",null,null,(()=>{}));else{const e=Kameleoon.Utils.readLocalData(this.simulationMode?"kameleoonSimulationVisitorData":this.dataKeyName,"LS",!0);this.storedData.update(e);this.Visitor.updateFromStoredData(!1,!1,!1);Kameleoon.Gatherer.track(VisitEvent_Page)}};this.clearOutdatedStorage=()=>{try{for(let e=0,t=localStorage.length;e<t;e++){const t=localStorage.key(e);if(0===t.indexOf("kameleoon")){const e=JSON.parse(localStorage.getItem(t));if(this.pageStartTime>(e.date||e.expirationDate))localStorage.removeItem(t)}}}catch(e){}};this.getSimulationMode=()=>{const e=this.readFromStorageOrExternal("kameleoonSimulation","LS");return e?!0:!1};this.pageStartTime=(new Date).getTime();this.dataKeyName="kameleoonData";this.Device=new Device;this.deviceType=this.Device.type;this.parameters=Kameleoon.Utils.parseParameters();this.beforeUnloadEvent="Phone"==this.deviceType&&"Safari"==this.Device.browser?"pagehide":"beforeunload";this.headNode=document.getElementsByTagName("head")[0];this.editorMode="true"==this.parameters.kameleoon;this.proxyMode="proxy."+Kameleoon.Internals.configuration.DOMAIN===window.location.hostname;this.disableCache="true"==this.parameters.kameleoonDisableCache||this.parameters.kameleoonVariationId;this.kameleoonSelectionIframeMode="true"==this.parameters.kameleoonSelectionIframeMode;this.iframeLocalStorage=Kameleoon.Internals.configuration.useWideDomainSupport;this.useWideDomainSupport=Kameleoon.Internals.configuration.useWideDomainSupport||null!=window.kameleoonLightIframe;if(0==window.kameleoonLightIframe||null==window.kameleoonLightIframe)this.iframeLocalStorage=!1;this.mouseDownEvent="ontouchend"in document.documentElement?"touchend":"mousedown";this.addedClasses={};this.addedIDs={};this.eventListeners=[];this.listenVariations=[];this.listenSpaCallbacks=[];this.waitingElementPresentObjects=[];this.waitingDynamicElements=[];this.variations=[];this.intervalIds={};this.targetingSegments=[];this.timeoutIds={};this.goals=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.goals);this.cantUseMutationObserver="undefined"==typeof MutationObserver;this.Campaigns=new Campaigns;this.Consent=new Consent;Object.defineProperty(this,"experiments",{get(){return this.Campaigns.obtainCampaignsList(0)}});Object.defineProperty(this,"personalizations",{get(){return this.Campaigns.obtainCampaignsList(1)}})}clear(){this.eventListeners.forEach((e=>{let t;if("window"==e.elementKey||"document"==e.elementKey)t="window"==e.elementKey?window:document;else{t=document.querySelector(`[kameleoonListener-${e.elementKey}=true]`);if(t)t.removeAttribute(`kameleoonListener-${e.elementKey}`)}if(t)t.removeEventListener(e.eventType,e.actionFunction,e.useCapture)}));this.waitingDynamicElements.forEach((e=>{Kameleoon.Utils.querySelectorAll(`[${e.attribute}=true]`).forEach((t=>{t.removeAttribute(e.attribute)}))}));for(const e in this.timeoutIds)Kameleoon.Utils.clearTimeout(parseInt(e));for(const e in this.intervalIds)Kameleoon.Utils.clearInterval(parseInt(e));if(this.RequestManager)this.RequestManager.processRequests();if(this.storedData)this.storedData.save(!0);if(null!=this.mutationObserver)this.mutationObserver.disconnect();if(null!=this.mutationObserverSpa)this.mutationObserverSpa.disconnect();if(Kameleoon.Targeting)Kameleoon.Targeting.segments={};let e=Kameleoon.Utils.querySelectorAll("[id^='kameleoonElement'], [id*='kameleoonScenarioLayerBase'], [id^='kameleoonStyleSheet'], [class*='kameleoonWidget']");for(let t=0;t<e.length;++t)e[t].parentNode.removeChild(e[t]);e=Kameleoon.Utils.querySelectorAll("[id^='kameleoonId'], .kameleoonOverlay");for(let t=0;t<e.length;++t)e[t].removeAttribute("id");e=Kameleoon.Utils.querySelectorAll("[class^='kameleoonClass']");for(let t=0;t<e.length;++t)e[t].removeAttribute("class");if(this.storedData)this.storedData.save(!0);Kameleoon.API.Events.triggered=[]}run(){this.running=!0;Kameleoon.Utils.removeBlockingStyleSheet();this.setupLocalData((()=>{this.simulationMode=this.getSimulationMode();this.storedData=new StoredData(this.incomingStoredData);this.Consent.setup();this.initializePredefinedVisitorCode();this.initializeActions();Kameleoon.Gatherer.run((()=>{this.RequestManager=new RequestManager}));this.initializeActionsAfterGatherer();this.executeGlobalScript();window.kameleoonQueue=new CommandQueue(window.kameleoonQueue);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Started",{newVisitorCode:1==this.Visitor.visits.length});this.initializeListeners();this.setup();this.setupAfterLocalDataRetrieval=!0}))}}class Utils{constructor(){this.events=[];this.addParameterToURL=(e,t,n)=>{if(n)return e+(-1==e.indexOf("#")?"#":"&")+t;let a="";if(-1!=e.indexOf("#")){a=e.substr(e.indexOf("#"));e=e.substr(0,e.indexOf("#"))}e+=(-1==e.indexOf("?")?"?":"&")+t+a;return e};this.computeCurrentPageAbsoluteURLNoProxyMode=function(){let e=Kameleoon.Internals.runtime;if(null==e.currentPageAbsoluteURLNoProxyMode){if(e.proxyMode){let t=e.parameters.kameleoonExperimentId||e.parameters["kameleoon-experiment-id"];if(null!=t){let n=e.Campaigns.obtainCampaign(t,!0);if(n)e.currentPageAbsoluteURLNoProxyMode=n.baseURL}}if(null==e.currentPageAbsoluteURLNoProxyMode)e.currentPageAbsoluteURLNoProxyMode=window.location.href}return e.currentPageAbsoluteURLNoProxyMode};this.computeCurrentPageCanonicalURL=()=>{if(null==Kameleoon.Internals.runtime.currentPageCanonicalURL){let e=this.querySelectorAll('link[rel="canonical"]');if(e.length>0)Kameleoon.Internals.runtime.currentPageCanonicalURL=e[0].href}return Kameleoon.Internals.runtime.currentPageCanonicalURL};this.computeCurrentPageCleanRelativeURL=()=>{if(null==Kameleoon.Internals.runtime.currentPageCleanRelativeURL)Kameleoon.Internals.runtime.currentPageCleanRelativeURL=this.computeRelativeURL(this.computeCurrentPageCleanAbsoluteURL());return Kameleoon.Internals.runtime.currentPageCleanRelativeURL};this.computeIfSuffix=(e,t)=>{let n=e.length-t.length;let a=e.lastIndexOf(t,n);return a>=0&&a==n};this.computeRelativeURL=e=>{let t=document.createElement("a");t.href=e;return t.pathname+t.search+t.hash};this.computeStringSha256=e=>{let t=1,n,a=[],o=[];while(++t<18)for(n=t*t;n<312;n+=t)a[n]=1;function r(e,t){return Math.pow(e,1/t)%1*4294967296|0}for(t=1,n=0;t<313;)if(!a[++t]){o[n]=r(t,2);a[n++]=r(t,3)}function l(e,t){return e>>>t|e<<32-t}let i=o.slice(t=0),s=this.encodeUTF8(e),m=[],u=s.length,c=[],d,f,h;for(;t<u;)c[t>>2]|=(255&s.charCodeAt(t))<<8*(3-t++%4);u*=8;c[u>>5]|=128<<24-u%32;c[h=u+64>>5|15]=u;for(t=0;t<h;t+=16){d=i.slice(n=0,8);for(;n<64;d[4]+=f){if(n<16)m[n]=c[n+t];else m[n]=(l(f=m[n-2],17)^l(f,19)^f>>>10)+(0|m[n-7])+(l(f=m[n-15],7)^l(f,18)^f>>>3)+(0|m[n-16]);let e;d.unshift((f=(d.pop()+(l(e=d[4],6)^l(e,11)^l(e,25))+((e&d[5]^~e&d[6])+a[n])|0)+(0|m[n++]))+(l(u=d[0],2)^l(u,13)^l(u,22))+(u&d[1]^d[1]&d[2]^d[2]&u))}for(n=8;n--;)i[n]=d[n]+i[n]}for(s="";n<63;)s+=(i[++n>>3]>>4*(7-n%8)&15).toString(16);return s};this.computeURLNoKameleoonParameters=e=>{let t=!1;for(let n in Kameleoon.Internals.runtime.parameters)if(-1!=n.indexOf("kameleoon")){t=!0;e=e.replace(new RegExp(n+"="+Kameleoon.Internals.runtime.parameters[n]+"&?"),"")}return t?e.replace(/\?$/,""):e};this.computeURLRegExpNoKameleoonParameters=e=>e?e.replace(/(\\\?|&|#)kameleoon[^&#()]*/g,""):null;this.createLocalData=(e,t,n,a,o,r,l,i)=>{const s="COOKIE"!=o;const m=(new Date).getTime();const u=m+24*n*60*60*1e3;if(!i&&!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){let i=s?"LS":"COOKIE";if(null==Kameleoon.Internals.runtime.localDataMap)Kameleoon.Internals.runtime.localDataMap={};if(null==Kameleoon.Internals.runtime.localDataMap[i])Kameleoon.Internals.runtime.localDataMap[i]={};Kameleoon.Internals.runtime.localDataMap[i][e]={name:e,value:t,days:n,domain:a,forceLocalAccess:o,jsonFormat:r,creationTime:m};if(s)l&&l();return}if(s){const n={value:Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e]&&this.obfuscateString(JSON.stringify(t))||t,expirationDate:u};if(Kameleoon.Internals.runtime.iframeLocalStorage)this.postMessageToExternalIframe("set",e,n,l);else{try{localStorage.setItem(e,JSON.stringify(n))}catch(e){}l&&l()}}else{let o="";let l=r?JSON.stringify(t):t;if(n)o="; expires="+new Date(u).toUTCString();if("CURRENT_HOST"!=a){a=a||Kameleoon.Internals.configuration.customCookieDomainName||this.obtainCurrentRootDomain();o+="; domain="+a}let i="";document.cookie=e+"="+l+o+"; path=/; SameSite=Lax"+i}};this.decodeString=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";let a,o,r;let l,i,s,m;let u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(u<e.length){l=t.indexOf(e.charAt(u++));i=t.indexOf(e.charAt(u++));s=t.indexOf(e.charAt(u++));m=t.indexOf(e.charAt(u++));a=l<<2|i>>4;o=(15&i)<<4|s>>2;r=(3&s)<<6|m;n+=String.fromCharCode(a);if(64!=s)n+=String.fromCharCode(o);if(64!=m)n+=String.fromCharCode(r)}n=this.decodeUTF8(n);return n};this.decodeUTF8=e=>{let t="";let n=0;let a=0,o=0,r;while(n<e.length){a=e.charCodeAt(n);if(a<128){t+=String.fromCharCode(a);n++}else if(a>191&&a<224){o=e.charCodeAt(n+1);t+=String.fromCharCode((31&a)<<6|63&o);n+=2}else{o=e.charCodeAt(n+1);r=e.charCodeAt(n+2);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&r);n+=3}}return t};this.domReady=e=>{if("complete"==document.readyState||"interactive"==document.readyState)return e();else{let t=!1;this.addEventListener(document,"DOMContentLoaded",(()=>{if(t)return;t=!0;e()}),!1);this.addEventListener(window,"load",(()=>{if(t)return;t=!0;e()}),!1)}};this.encodeString=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";let a,o,r,l,i,s,m;let u=0;e=this.encodeUTF8(e);while(u<e.length){a=e.charCodeAt(u++);o=e.charCodeAt(u++);r=e.charCodeAt(u++);l=a>>2;i=(3&a)<<4|o>>4;s=(15&o)<<2|r>>6;m=63&r;if(isNaN(o))s=m=64;else if(isNaN(r))m=64;n=n+t.charAt(l)+t.charAt(i)+t.charAt(s)+t.charAt(m)}return n};this.encodeUTF8=e=>{e=e.replace(/\r\n/g,"\n");let t="";for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);if(a<128)t+=String.fromCharCode(a);else if(a>127&&a<2048){t+=String.fromCharCode(a>>6|192);t+=String.fromCharCode(63&a|128)}else{t+=String.fromCharCode(a>>12|224);t+=String.fromCharCode(a>>6&63|128);t+=String.fromCharCode(63&a|128)}}return t};this.eraseLocalData=(e,t,n)=>{let a="COOKIE"!=n;let o=Kameleoon.Internals.runtime.localDataMap;let r=a?"LS":"COOKIE";if(null!=o&&null!=o[r]&&null!=o[r][e])delete o[r][e];if(a)if(Kameleoon.Internals.runtime.iframeLocalStorage)this.postMessageToExternalIframe("remove",e,null,null);else localStorage.removeItem(e);else this.createLocalData(e,"",-1,t,"COOKIE",!1,null,!0)};this.forceNoFlicker=e=>{let t=document.createElement("style");t.setAttribute("id","kameleoonPageLoading");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("media","screen");let n=e+" { visibility: hidden !important; background-image: none !important; }";t.appendChild(document.createTextNode(n));Kameleoon.Internals.runtime.headNode.appendChild(t)};this.getLocale=e=>{let t=Kameleoon.Gatherer.Language.obtainLocaleTag().substring(0,2);if(e&&"fr"!=t)t="en";return t};this.obtainComputedStyle=e=>{if(window.getComputedStyle)return getComputedStyle(e,"");return null};this.obtainCurrentRootDomain=()=>{if(null==Kameleoon.Internals.runtime.currentRootDomain){const e=window.location.hostname.split(".");const t=e.length-1;const n="testRootDomain";const a="_detectRootDomain";let o=e[t];for(let r=t-1;r>=0;r--){o=e[r]+"."+o;this.createLocalData(a,n,1,o,"COOKIE",!1,void 0,!0);const t=this.readLocalData(a,"COOKIE",!1);if(t){this.eraseLocalData(a,o,"COOKIE");Kameleoon.Internals.runtime.currentRootDomain=o;break}}}return Kameleoon.Internals.runtime.currentRootDomain};this.obtainRandomString=(e,t=Analyst.CODE_ALPHABET)=>{let n=t.length;let a="";for(let o=0;o<e;++o){let e=Math.floor(Math.random()*n);a+=t.substring(e,e+1)}return a};this.parseHostName=e=>{let t=document.createElement("a");t.href=e;return t.hostname};this.processRedirect=(e,t)=>{if(window.location.href!=e){t=t||Kameleoon.Analyst.Actions.currentAction;let n=document.createElement("a");n.href=e;if(!Kameleoon.Internals.runtime.useWideDomainSupport&&-1==window.location.href.indexOf(n.protocol+"//"+n.hostname)){if(t)e=this.addParameterToURL(e,"kameleoonRedirect-"+t.id+"="+t.associatedVariation.id,!0)}else if(t)this.createLocalData("kameleoonRedirect-"+t.id,t.associatedVariation.id,1,null,null,!1,null,!0);if(window.location.href!=e){this.forceNoFlicker("*");this.createLocalData("kameleoonReferrer",Kameleoon.Gatherer.Referrer.obtain(),1/24,null,"COOKIE",!1);window.location.replace(e)}}};this.processStorageData=e=>{if(Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval)switch(e.type){case"kameleoonExperiment":const t=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e.experimentId,!0);if(t)t.registeredVariationId=e.registeredVariationId;break;case"kameleoonGlobalPersonalizationExposition":Kameleoon.Internals.runtime.personalizationsActive=e.active;break;case Kameleoon.Internals.runtime.dataKeyName:case"kameleoonSimulationVisitorData":if(e.type==Kameleoon.Internals.runtime.dataKeyName&&!Kameleoon.Internals.runtime.simulationMode||"kameleoonSimulationVisitorData"==e.type&&Kameleoon.Internals.runtime.simulationMode){if(Kameleoon.Internals.runtime.pageCached)Kameleoon.Internals.runtime.storedData.update(this.readLocalData(e.type,"LS",!0));else Kameleoon.Internals.runtime.storedData.update(JSON.parse(this.unobfuscateString(e.value)));Kameleoon.Internals.runtime.Visitor.updateFromStoredData(!1,!1,!1)}break;case"kameleoonLegalConsent":if(e.saveLegalConsent){let t=e=>e?"enable":"disable";if(null!=e.saveLegalConsent.AB_TESTING){let n=t(e.saveLegalConsent.AB_TESTING);Kameleoon.Internals.runtime.Consent[n]("AB_TESTING",!0)}if(null!=e.saveLegalConsent.PERSONALIZATION){let n=t(e.saveLegalConsent.PERSONALIZATION);Kameleoon.Internals.runtime.Consent[n]("PERSONALIZATION",!0)}}break}};this.querySelectorAll=(e,t)=>{Kameleoon.Internals.runtime.querySelectorAllHasError=!1;let n=!1,a,o=[],r=[];if(null==t)t=document;let l=e.match(/#([0-9]+.*)(?: |$)/);if(l){let t=e.charAt(1);e=e.replace("#"+t,"#\\3"+t+" ")}if(""!==e){if(-1!==e.indexOf("[")&&-1===e.indexOf("']")&&-1===e.indexOf('"]')){let t=e.split(/(?=\.)|(?=#)|(?=\[)/),n,a,o;t.forEach((function(t){if("["===t[0]&&-1===t.indexOf("']")&&-1===e.indexOf('"]')&&-1!==e.indexOf("=")){n=t.split(/=(.+)?/);a=n[1];a=a.substring(0,a.length-1);o=n[0]+"='"+a+"']";e=e.replace(t,o)}}))}if(-1!==e.indexOf(":contains")){n=!0;a=this.treatContainsSelector(e);e=a.newSelector}if(t&&t.querySelectorAll)if(-1!==e.indexOf(":eq"))o=this.treatEqSelector(e,t);else try{o=t.querySelectorAll(e)}catch(e){Kameleoon.Internals.runtime.querySelectorAllHasError=!0;o=[]}for(let e=0,t=o.length;e<t;++e)if(n){if(a.check(a.containText,o[e]))r.push(o[e])}else r.push(o[e])}return r};this.readLocalData=(e,t,n)=>{let a="COOKIE"!=t;let o=(new Date).getTime();try{if(!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){let t=Kameleoon.Internals.runtime.localDataMap;let n=a?"LS":"COOKIE";if(null!=t&&null!=t[n]&&null!=t[n][e]){let a=t[n][e];if(o-24*a.days*60*60*1e3>=a.creationTime)delete t[n][e];else return a.value}}if(a){let t;t=localStorage&&localStorage.getItem(e);if(!t)return null;t=JSON.parse(t);if(Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e])t.value=JSON.parse(this.unobfuscateString(t.value));if(o>(t.date||t.expirationDate)){localStorage.removeItem(e);return null}return t.value}else{let t=null;let a=document.cookie.split(";");for(let o=0,r=a.length;o<r;++o){let r=a[o];let l=r.indexOf("=");if(r.substring(0,l).trim()==e){let e=r.substring(l+1);t=n&&JSON.parse(e)||e;break}}return t}}catch(e){}return null};this.runProtectedFunction=(e,t)=>{try{e()}catch(e){if(t)console.log(e);else this.Logger.send(e,"kameleoon.js");if(Kameleoon.Internals.runtime&&t)Kameleoon.Internals.runtime.processPageLoaded()}};this.runProtectedScript=(e,t,n)=>{if(n)return n();if(e){let n=null;try{let a=t?"//# sourceURL="+t:"";n=eval.call(window,"(function () {\n"+e+"\n})();"+a)}catch(e){n=null;console.log(e)}return n}return null};this.saveVisitorCode=(e,t=!0)=>{const n="kameleoonVisitorCode";if(Kameleoon.Internals.configuration.useWideDomainSupport||Kameleoon.Internals.configuration.useVisitorCodeInLocalStorage)this.createLocalData(n,e,Utils.MAX_STORAGE_DAYS,null,"LS");if(t)this.createLocalData(n,e,Utils.MAX_STORAGE_DAYS,null,"COOKIE")};this.seededRandom=(e,t)=>{let n;if(t){n=this.computeStringSha256(e);return parseInt(n,16)/Math.pow(2,256)}n=this.computeStringHash(e);n=(9301*Math.abs(n)+49297)%233280;return n/233280};this.treatEqSelector=(e,t)=>{if(void 0===e)return null;let n=e.split(/\:eq\([0-9]+\)/g);let a=e.match(/(?!\:eq\()[0-9]+/g)||[];let o=null==t?document:t;for(let t=0;t<n.length;++t){n[t]=n[t].trim();if(">"===n[t].charAt(0))n[t]=n[t].substring(1,e.length).trim();if(null==o||""==n[t].trim())break;if(t>a.length-1)o=o.querySelectorAll(n[t]);else o=o.querySelectorAll(n[t])[a[t]]}if(null==o)return[];if(void 0==o.length)o=[o];let r=Kameleoon.Utils.querySelectorAll(e.replace(/\:eq\([0-9]+\)/g,""));let l=[];for(let e=0;e<r.length;++e)for(let t=0;t<o.length;++t)if(r[e]===o[t]){l.push(o[t]);break}return l};this.Logger=new Logger;this.bowser=window.kbowser||window.bowser}addEventListener(e,t,n,a,o){let r;if(e==window)r="window";else if(e==document)r="document";else{r=this.obtainRandomString(4);e.setAttribute(`kameleoonListener-${r}`,!0)}let l=n;if(o)e.addEventListener(t,l,a);else{l=function(e){Kameleoon.Utils.runProtectedFunction((function(){n(e)}))};e.addEventListener(t,l,a)}Kameleoon.Internals.runtime.eventListeners.push({elementKey:r,eventType:t,actionFunction:l,useCapture:a})}addPostMessageCallback(e){let t=Math.random().toString();Kameleoon.Internals.runtime.postMessageCallbacks[t]=e;return t}addCSSStyleSheet(e,t,n){if(!e)return;let a=n?n:document;let o="kameleoonStyleSheet"+(t?"-"+t.id:"");let r=n?n.getElementById(o):null;let l="";if(r){l=r.textContent;r.parentNode.removeChild(r)}let i=a.createElement("style");i.className="KameleoonStyleSheet";i.setAttribute("id",o);i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");i.setAttribute("media","screen");let s=l+e;if(i.styleSheet)i.styleSheet.cssText=s;else i.appendChild(document.createTextNode(s));if(n)a.getElementsByTagName("head")[0].appendChild(i,a.getElementsByTagName("head")[0].firstChild);else Kameleoon.Internals.runtime.headNode.appendChild(i);if(t)t.loadedCSSStyleSheet=i}addCallbackToObserver(e){KMutationObserver.setMutationObserverSPA();Kameleoon.Internals.runtime.listenSpaCallbacks.push(e)}applyVariation(e){new Variation(e).process()}clearInterval(e){delete Kameleoon.Internals.runtime.intervalIds[e];window.clearInterval(e)}clearTimeout(e){delete Kameleoon.Internals.runtime.timeoutIds[e];window.clearTimeout(e)}clone(e){return JSON.parse(JSON.stringify(e))}computeCurrentPageCleanAbsoluteURL(){if(null==Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL){Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=this.computeURLNoKameleoonParameters(this.computeCurrentPageAbsoluteURLNoProxyMode());try{Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=decodeURIComponent(Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL)}catch(e){}}return Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL}computeStringHash(e,t){e=t?this.computeStringSha256(e):e;let n=0;for(let t=0;t<e.length;++t){n=(n<<5)-n+e.charCodeAt(t);n&=n}return n}secureSessionStorage(e,t,n){try{return window.sessionStorage[e](t,n)}catch(e){return null}}flatten(...e){let t=[];for(let e=0;e<arguments.length;e++)if(arguments[e]instanceof Array)t.push.apply(t,this.flatten.apply(this,arguments[e]));else t.push(arguments[e]);return t}obfuscateString(e){let t="";for(let n=0,a=e.length;n<a;n+=1){let a=e[n];if("’"==a)a="'";t+=String.fromCharCode(a.charCodeAt(0)+16)}return t}parseParameters(){let e={};let t=window.location.hash.substring(1).replace(/\?/g,"&");let n=window.location.search.substring(1);if(n||t){let a=(n?n.split("&"):[]).concat(t?t.split("&"):[]);a.forEach((t=>{let n=t.split("=");try{e[decodeURIComponent(n[0])]=n[1]?decodeURIComponent(n[1]):null}catch(t){e[unescape(n[0])]=n[1]?unescape(n[1]):null}}))}return e}performBeaconServerCall(e,t,n,a){let o=new XMLHttpRequest;o.open("GET",e,!0);if(t)o.onreadystatechange=function(e){t.bind(o)(e.target)};if(n){o.onerror=function(e){n.bind(o)(e.target)};o.ontimeout=function(e){n.bind(o)(e.target)}}o.timeout=a||15*60*1e3;o.send()}postMessageToExternalIframe(e,t,n,a){const o=JSON.stringify({type:e,key:t||void 0,data:null!=n?n:void 0,callbackId:this.addPostMessageCallback(a)});if(!Kameleoon.Internals.runtime.externalIframe||!Kameleoon.Internals.runtime.externalIframe.contentWindow){if(window.kameleoonIframeURL){let e=document.createElement("iframe");e.src=window.kameleoonIframeURL;e.id="kameleoonExternalIframe";e.style.cssFloat="left !important";e.style.height="0px !important";e.style.opacity="0.0 !important";e.style.width="0px !important";e.onload=()=>{Kameleoon.Internals.runtime.externalIframe=e;Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage("kameleoon"+o,"*")};document.head.appendChild(e)}}else Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage("kameleoon"+o,"*")}processMessageEvent(e){if("string"!==typeof e.data)return;if("obtainTagCommanderVariableNames"==e.data){let t=[];if(window.tc_vars)for(let e in window.tc_vars)t.push(e);if(!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker))e.source.postMessage("tagCommanderVariableNames"+JSON.stringify(t),e.origin);return}if(0==e.data.indexOf("checkKameleoonScriptPresent")){if("https://back-office."+Kameleoon.Internals.configuration.DOMAIN==e.origin){let t="";let n=e.data.replace("checkKameleoonScriptPresent","");this.runProtectedScript(n);if(!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker))e.source.postMessage(t,e.origin)}return}if(Kameleoon.Internals.runtime.iframeLocalStorage&&Kameleoon.Internals.runtime.postMessageOrigin==e.origin)try{let t=JSON.parse(e.data);if(t.kameleoonMessage){if(t.callbackId){let e=Kameleoon.Internals.runtime.postMessageCallbacks[t.callbackId];delete Kameleoon.Internals.runtime.postMessageCallbacks[t.callbackId];e&&e(t.data)}if(null!=t.type)this.processStorageData(t)}}catch(e){}}removeBlockingStyleSheet(){let e=document.getElementById("kameleoonPageLoading");if(e&&e.parentNode)e.parentNode.removeChild(e)}removeCSSStyleSheet(e){if(e.loadedCSSStyleSheet){const t="kameleoonStyleSheet-";const n=e.loadedCSSStyleSheet.id.replace(t,"");if(-1==n.indexOf(",")){Kameleoon.Internals.runtime.headNode.removeChild(e.loadedCSSStyleSheet);e.loadedCSSStyleSheet=null}else e.loadedCSSStyleSheet.id=t+n.replace(new RegExp(e.id+",?"),"")}}sendKameleoonCustomEvent(e,t,n){try{let a=document.createEvent("CustomEvent");t.time=(new Date).getTime();a.initCustomEvent("Kameleoon::"+e,!1,!1,t);window.dispatchEvent(a);if(sessionStorage.getItem("kameleoonLightExtension")||Kameleoon.Internals.runtime.parameters.kameleoonLightExtension){t.type=n?n:t.type;window.kameleoonEvents=window.kameleoonEvents||[];window.kameleoonEvents.push(t)}}catch(e){}}setInterval(e,t,n,a){let o=window.setInterval((function(){Kameleoon.Utils.runProtectedFunction((function(){e()}),a)}),t);Kameleoon.Internals.runtime.intervalIds[o]=!0;if(n)e();return o}setTimeout(e,t,n){let a=window.setTimeout((function(){Kameleoon.Utils.runProtectedFunction((function(){e()}),n)}),t);Kameleoon.Internals.runtime.timeoutIds[a]=!0;return a}testEmptyMap(e){return 0==Object.keys(e).length}parseObjectToUrlParams(e){return Object.entries(e).map((e=>e[0]+"="+e[1])).join("&")}treatContainsSelector(e){let t={},n;function a(e,t){let n=!1;if(t.textContent&&-1!==t.textContent.indexOf(e))n=!0;return n}n=e.match(/:contains\(['"]([\s\S]+)['"]\)/);t.containText=n[1];t.newSelector=e.replace(n[0],"");if(""===t.newSelector)t.newSelector="*";t.check=a;return t}unobfuscateString(e){let t="";for(let n=0,a=e.length;n<a;n+=1)t+=String.fromCharCode(e[n].charCodeAt(0)-16);return t}}Utils.LOCAL_STORAGE_OBFUSCATED_KEYS={kameleoonData:!0,kameleoonSimulationVisitorData:!0};Utils.MAX_STORAGE_DAYS=365;class Browser{constructor(e){this.browsers=e}obtain(){let e=Kameleoon.Internals.runtime.Device.browser;if("Internet Explorer"==e||"Microsoft Edge"==e)e="Explorer";return e}obtainIndex(){let e=this.obtain()||"";let r=e.toUpperCase();for(let e in this.browsers)if(this.browsers[e].name.toUpperCase()==r)return parseInt(e);return null}}class CustomData{constructor(t){this.CUSTOM_DATA_CUTOFF=3*1e3;this.CUSTOM_DATA_INTERVAL=3*1e3;this.CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF=100;this.MAX_INTERVAL_API_VISIT_REQUEST=15*60*1e3;this.MAX_NUMBER_REQUESTS_TO_API_VISIT=3;this.inheritVisitorScopeAndTrackVisitorDataFromServer=()=>{if(Kameleoon.Internals.runtime.Visitor.visits.length>1){const t=Kameleoon.Internals.runtime.Visitor.currentVisit.customData;const e=Kameleoon.Internals.runtime.Visitor.visits[Kameleoon.Internals.runtime.Visitor.visits.length-2].customData;for(const a in this.customData){const i=this.customData[a].scope;if("VISITOR"==i&&null==t[a]){const t=e[a];if(null!=t)this.register(parseInt(a),{value:t,overwrite:!0},!0)}}Kameleoon.Internals.runtime.Visitor.saveToStoredData()}};this.register=(t,e,a)=>{const i=this.customData[t];if(i){let n={};const s=e.value;if(null==s)return;const o=e.overwrite;if(a)n=s;else if(s instanceof Array){for(let t=0,e=s.length;t<e;++t)if(null!=s[t]&&(s[t].toString().length<=VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||i.localOnly))n[s[t]]=1}else if(s.toString().length<=VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||i.localOnly)n[s]=1;const r="LIST"==i.type||"COUNT_LIST"==i.type?o:!0;if(r||!Kameleoon.Utils.testEmptyMap(n)){Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"CustomDataSet",{name:i.name,value:s});Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"customData/set",name:i.name,value:s});Kameleoon.Gatherer.track(VisitEvent_CustomData,{index:t,customData:i,overwrite:r,overwriteDefault:o,valueToAdd:n,value:s})}}};this.customDataVisitsRequest=t=>{};this.run=()=>{Kameleoon.Internals.runtime.Visitor.currentVisit.clearCustomDataPage();Kameleoon.Utils.clearInterval(this.intervalId);if(Kameleoon.Internals.runtime.Gatherer.startOfVisit)this.inheritVisitorScopeAndTrackVisitorDataFromServer();this.firstTimeCheck=(new Date).getTime();this.intervalId=Kameleoon.Utils.setInterval(this.obtain.bind(this),this.CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF,!0);Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearInterval(this.intervalId)}),this.CUSTOM_DATA_CUTOFF);Kameleoon.Utils.setInterval(this.obtain.bind(this),this.CUSTOM_DATA_INTERVAL,!1)};this.customData=t}parseNumberValue(t,e){switch(t){case-2:return"true"===e;case-1:return e;default:return parseFloat(e)}}obtainParsedValue(t,e){const a=this.customData[t];switch(a.type){case"COUNT_LIST":const t=[];for(const a in e)t.push({value:a,count:e[a]});return t;case"LIST":const i=[];for(const t in e)i.push(t);return i;default:return this.parseNumberValue(a.format,Object.keys(e)[0])}}obtain(){for(const t in this.customData)if(!this.customData[t].treated){const e=parseInt(t);const a=this.obtainValueMap(e,this.customData[t]);if(a)this.register(e,a)}}obtainValueFromPath(t,e){return t.match(/[^'\]\[\.\"]+/gi).reduce(((t,e)=>t&&t[e]),e)}obtainValueMap(t,e){let a=null;if(null!=e&&!e.disabled)switch(e.method.toUpperCase()){case"GTM":if(window.dataLayer&&e.variableName)for(let t=window.dataLayer.length-1;t>=0;--t){const i=this.obtainValueFromPath(e.variableName,window.dataLayer[t]);if(null!=i){a={value:i,overwrite:!1};break}}break;case"TC":if(window.tc_vars&&e.variableName){let t=this.obtainValueFromPath(e.variableName,window.tc_vars);if("string"==typeof t&&0==t.length)t=null;if(null!=t){a={value:t,overwrite:!1};break}}break;case"CUSTOM_CODE":a=Kameleoon.Utils.runProtectedScript(e.customEvalCode,"kameleoonCustomDataScript-"+t+".js");break;default:break}if(null!=a){e.treated=!0;const i=Kameleoon.Internals.runtime.Visitor.currentVisit.customData[t];const n=a.value;if(null!=n){const t=e.type;if("LIST"==t||"COUNT_LIST"==t||null==i||Object.keys(i)[0]!=n.toString()||Kameleoon.Internals.configuration.enableHistoryReconciliation&&e.mappingIdentifier&&null==Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","visitsRequestSuccess"))return a}}return null}}class KeyPage{constructor(e){this.keyPages=e}obtainIndexes(){const e=[];if(0==e.length)e.push(null);return e}}class Language{constructor(){this.DEFAULT_LOCALE_LANGUAGE_TAG="en"}obtainLocaleTag(){return navigator&&navigator.language||this.DEFAULT_LOCALE_LANGUAGE_TAG}}class OperatingSystem{constructor(e){this.oss=e}obtainIndex(){const e=this.obtain().toUpperCase();for(const s in this.oss)if(this.oss[s].name.toUpperCase()==e)return parseInt(s);return null}obtain(){const e=(Kameleoon.Utils.bowser.parsedResult||Kameleoon.Utils.bowser.parse(navigator.userAgent)).os.name;switch(e){case"Windows Phone":case"iOS":case"Android":case"Linux":case"Windows":return e;case"macOS":return"Tablet"==Kameleoon.Internals.runtime.Device.type?"iOS":"Mac";default:return"Other"}}}class Referrer{constructor(e){this.referrers=e;this.referrer=document.referrer;const t="kameleoonReferrer";const r=Kameleoon.Utils.readLocalData(t,"COOKIE");if(r){this.referrer=r;Kameleoon.Utils.eraseLocalData(t,null,"COOKIE")}}obtainCorrected(e){switch(this.obtainType(e)){case 0:case 1:return null;default:return this.obtain()}}obtain(){return this.referrer}obtainDetectionMatches(e){let t=this.obtainDetectionPartMatches(e.method,e.parameters);if(e.and)t=t&&this.obtainDetectionPartMatches(e.andMethod,e.andParameters);return t}obtainDetectionPartMatches(e,t){try{switch(e){case 0:return new RegExp(t).test(this.obtain());case 1:const e=new RegExp(t);return e.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())||e.test(Kameleoon.Utils.computeCurrentPageCleanRelativeURL());default:return!0===Kameleoon.Utils.runProtectedScript(t)}}catch(e){console.log(e);return!1}}obtainIndexes(e){switch(this.obtainType(e)){case 0:case 1:return[0];default:let e=[];let t=Number.NEGATIVE_INFINITY;for(const r in Kameleoon.Internals.runtime.Gatherer.configuration.referrers){const n=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[r];if(this.obtainMatches(n)){let a=n.priority;if(null==a)a=Number.NEGATIVE_INFINITY;if(a>=t){if(a>t){e=[];t=a}e.push(parseInt(r)+1)}}}if(0==e.length)e.push(null);return e}}obtainIsIgnored(e){return!1}obtainMatches(e){const t=e.detections;for(let e=0;e<t.length;e++)if(this.obtainDetectionMatches(t[e]))return!0;return!1}obtainType(e){if(this.obtainIsIgnored(e))return 0;if(Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","startsOfVisitForCurrentPage")>1)return 1;return 3}}class StoredData{constructor(e){this.Gatherer={};this.Runtime={};this.Vars=Kameleoon.Utils.readLocalData("kameleoonVars","LS")||{};this.Visitor={};this.canSave=!1;if(e){let a="";if(e[Kameleoon.Internals.runtime.dataKeyName]){a=e[Kameleoon.Internals.runtime.dataKeyName];if(e.Kameleoon)Kameleoon.Utils.eraseLocalData("kameleoonData",null,"LS")}else if(e.kameleoonData)a=e.kameleoonData;if(Kameleoon.Internals.runtime.simulationMode)if(e.kameleoonDataSimulation||e.kameleoonSimulationVisitorData)a=e.kameleoonDataSimulation||e.kameleoonSimulationVisitorData;let t=Kameleoon.Utils.unobfuscateString(a);let i=t&&JSON.parse(t)||{};this.Gatherer=i.Gatherer||{};this.Runtime=i.Runtime||{};this.Vars=i.Vars||e.kameleoonVars||{};this.Visitor=i.Visitor||{}}else{let e=Kameleoon.Utils.readLocalData("kameleoonData","LS");if(Kameleoon.Internals.runtime.simulationMode){const a=Kameleoon.Utils.readLocalData("kameleoonDataSimulation","LS",!0);const t=Kameleoon.Utils.readLocalData("kameleoonSimulationVisitorData","LS",!0);if(a||t)e=a||t}if(e){this.Gatherer=e.Gatherer;this.Runtime=e.Runtime||{};this.Vars=e.Vars||this.Vars;this.Visitor=e.Visitor}}Kameleoon.Utils.eraseLocalData("kameleoonVars",null,"LS");for(let e in this.Vars)if(Kameleoon.Internals.runtime.pageStartTime>this.Vars[e].date)delete this.Vars[e];Kameleoon.Utils.setInterval((()=>{if(this.canSave){this.save(!0);this.canSave=!1}}),1e3);Kameleoon.Utils.addEventListener(window,Kameleoon.Internals.runtime.beforeUnloadEvent,(()=>{if(window.self!==window.top){let e=Kameleoon.Utils.readLocalData(Kameleoon.Internals.runtime.simulationMode?"kameleoonSimulationVisitorData":Kameleoon.Internals.runtime.dataKeyName,"LS");if(e&&e.Visitor&&this.Visitor&&this.Visitor.totalVisits<e.Visitor.totalVisits)this.update(e)}this.save(!0)}))}obtainField(e,a,t){return this[e][a]||t||null}resetForStartOfVisit(){this.Runtime={}}saveField(e,a,t){this[e][a]=t;this.save(!1)}save(e){if(e)Kameleoon.Utils.createLocalData(Kameleoon.Internals.runtime.simulationMode?"kameleoonSimulationVisitorData":Kameleoon.Internals.runtime.dataKeyName,this,Kameleoon.Internals.runtime.simulationMode?1/24:Utils.MAX_STORAGE_DAYS,null,"LS",!0);else this.canSave=!0}update(e){this.Gatherer=e.Gatherer||this.Gatherer;this.Runtime=e.Runtime||this.Runtime;this.Vars=e.Vars||this.Vars;this.Visitor=e.Visitor||this.Visitor}}class TimeZone{constructor(){}obtainId(){let t;try{t="undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions?Intl.DateTimeFormat().resolvedOptions().timeZone:null}catch(e){t=null}return t}}class VisitEvent{constructor(e){this.visitEvent=e}track(e){const t=()=>{const t=new this.visitEvent(e);Kameleoon.Internals.runtime.Visitor.saveToStoredData();if((!e||!e.notTrack&&!t.notTrack)&&Kameleoon.Internals.configuration.track)Kameleoon.Internals.runtime.RequestManager.addRequest(t);Kameleoon.Internals.runtime.storedData.save(this.visitEvent.urgent)};if(!Kameleoon.Internals.runtime.Visitor.currentVisit.isVisitFinished())t();else if(this.visitEvent===VisitEvent_Activity&&Kameleoon.Internals.runtime.Gatherer.active){Kameleoon.Internals.runtime.Visitor=new Visitor;Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData);Kameleoon.Gatherer.CustomData.run();Kameleoon.Mentalist.run();Kameleoon.Internals.runtime.gathererRun=!0;t()}}}class VisitEvent_Main{constructor(t){this.obtainRequestData=()=>{let t="eventType="+this.eventType;for(const e in this){if("function"==typeof this[e]||VisitEvent_Main.NOT_TRACK_FIELD[e])continue;t+=`&${e}=${this.addValueParameter(this[e])}`}return t};this.addValueParameter=t=>{const e=t=>{try{return encodeURIComponent(t)}catch(e){return t}};if("object"==typeof t)return e(JSON.stringify(t));else if("string"==typeof t)return e(t);return t};this.time=(new Date).getTime();this.nonce=Kameleoon.Utils.obtainRandomString(VisitEvent_Main.NONCE_LENGTH,VisitEvent_Main.HEXADECIMAL_ALPHABET)}}VisitEvent_Main.HEXADECIMAL_ALPHABET="0123456789ABCDEF";VisitEvent_Main.NONCE_LENGTH=16;VisitEvent_Main.NOT_TRACK_FIELD={eventType:1,time:1,notTrack:1,type:1,urgent:1};class VisitEvent_Activity extends VisitEvent_Main{constructor(){super();this.eventType="activity";this.clicks=Kameleoon.Internals.runtime.Gatherer.clicks;Kameleoon.Internals.runtime.Visitor.currentVisit.addActivity(this.time,Kameleoon.Internals.runtime.Gatherer.active);Kameleoon.Internals.runtime.Visitor.currentVisit.addNumberClicks(this.clicks);Kameleoon.Internals.runtime.Gatherer.active=!1;Kameleoon.Internals.runtime.Gatherer.clicks=0}static initialize(){let e=()=>{Kameleoon.Internals.runtime.Gatherer.active=!0};let t=()=>{e();Kameleoon.Internals.runtime.Gatherer.clicks++};Kameleoon.Utils.addEventListener(document,"mousemove",e,!1);Kameleoon.Utils.addEventListener(document,"scroll",e,!1);Kameleoon.Utils.addEventListener(document,"click",t,!1);Kameleoon.Utils.setInterval((()=>{if(Kameleoon.Internals.runtime.Gatherer.active)Kameleoon.Gatherer.track(this)}),this.ACTIVITY_TRACKING_INTERVAL,!0)}}VisitEvent_Activity.ACTIVITY_TRACKING_INTERVAL=15*1e3;VisitEvent_Activity.urgent=!1;class VisitEvent_AdBlocker extends VisitEvent_Main{constructor(){super();this.eventType="adBlocker";Kameleoon.Internals.runtime.Visitor.currentVisit.addAdBlocker()}}VisitEvent_AdBlocker.urgent=!1;class VisitEvent_Experiment extends VisitEvent_Main{constructor(i){super();this.eventType="experiment";this.id=i.id;this.variationId=i.variationId;this.notTrack=i.notTrack;if(null==this.variationId)this.notTrack=!0;Kameleoon.Internals.runtime.Visitor.currentVisit.addExperiment(this.time,this.id,this.variationId)}}VisitEvent_Experiment.urgent=!0;class VisitEvent_Conversions extends VisitEvent_Main{constructor(e){super();this.eventType="conversion";this.goalId=e.goalId;this.negative=!0===e.negative;let i,t=!1;let n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","revenuesByGoalId",{});let s=n[this.goalId];if(this.negative)if(s&&s.length>0){i=s.splice(-1)[0];if(0==s.length)delete n[this.goalId]}else t=!0;else{i=e.revenue;if(isNaN(i))i=0;if(!s)s=[];s.push(i);n[this.goalId]=s.splice(-10)}this.revenue=i;if(!t){Kameleoon.Internals.runtime.storedData.saveField("Gatherer","revenuesByGoalId",n);Kameleoon.Internals.runtime.Visitor.currentVisit.addConversions(this.goalId,1,this.revenue,this.negative);}}}VisitEvent_Conversions.urgent=!0;class VisitEvent_CustomData extends VisitEvent_Main{constructor(t){super();this.eventType="customData";this.index=t.index;this.overwrite=t.overwrite||!1;this.notTrack=t.value.length>VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||t.customData.localOnly;this.valuesCountMap=t.valueToAdd;this.mappingIdentifier=1==t.customData.mappingIdentifier?"true":"false";Kameleoon.Internals.runtime.Visitor.currentVisit.addCustomData(this.index,this.valuesCountMap,this.overwrite);if("PAGE"===t.customData.scope)this.overwrite=t.overwriteDefault||!1}}VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST=1e3;VisitEvent_CustomData.urgent=!0;class VisitEvent_Geolocation extends VisitEvent_Main{constructor({city:t,country:i,latitude:o,longitude:e,postalCode:n,region:s}){super();this.eventType="geolocation";this.city=t;this.country=i;this.latitude=o;this.longitude=e;this.postalCode=n;this.region=s;Kameleoon.Internals.runtime.Visitor.currentVisit.addGeolocation({city:t,country:i,latitude:o,longitude:e,postalCode:n,region:s})}}VisitEvent_Geolocation.urgent=!1;class VisitEvent_MentalistPredictionSegmentTargeting extends VisitEvent_Main{constructor(e){super();this.eventType="mentalistPredictionSegmentTargeting";this.targetingSegmentId=e.targetingSegmentId;this.goalIdToConversionProbability=[];let t=Kameleoon.Mentalist.computeGoalConversionProbabilityPredictionByGoalId(this.targetingSegmentId);for(let e in t)this.goalIdToConversionProbability.push([parseInt(e),t[e]]);let n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","savedScoresFromMoments",{});let i=Kameleoon.Internals.configuration.targetingSegmentIdToGoalIdsToKcs||{};if(i[this.targetingSegmentId]||e.trackMentalistPrediction){for(let e in i[this.targetingSegmentId]){if(null==n[this.targetingSegmentId])n[this.targetingSegmentId]={};if(null==n[this.targetingSegmentId][e])n[this.targetingSegmentId][e]=t[e]}if(i[this.targetingSegmentId])Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"ConversionScoreComputed",{segmentId:this.targetingSegmentId})}Kameleoon.Internals.runtime.storedData.saveField("Gatherer","savedScoresFromMoments",n)}}VisitEvent_MentalistPredictionSegmentTargeting.urgent=!1;class VisitEvent_MentalistPredictionStartOfVisit extends VisitEvent_Main{constructor(t){super();this.eventType="mentalistPredictionStartOfVisit";this.goalIdToConversionProbability=t.goalIdToConversionProbability}}VisitEvent_MentalistPredictionStartOfVisit.urgent=!1;class VisitEvent_Page extends VisitEvent_Main{constructor(){super();this.eventType="page";const e=Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL();const r=document.title;const t=Kameleoon.Utils.computeCurrentPageCanonicalURL();const i=Kameleoon.Gatherer.Referrer.obtainCorrected(Kameleoon.Internals.runtime.Gatherer.startOfVisit);this.href=e&&e.slice(0,Kameleoon.Gatherer.MAX_HREF_LENGTH_IN_A_REQUEST);this.title=r.slice(0,Kameleoon.Gatherer.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST);this.keyPagesIndices=Kameleoon.Gatherer.KeyPage.obtainIndexes();this.referrersIndices=Kameleoon.Gatherer.Referrer.obtainIndexes(Kameleoon.Internals.runtime.Gatherer.startOfVisit);if(t)this.canonicalHref=t;if(null!=i)this.referrerHref=i;if(Kameleoon.Internals.configuration.cleanHrefTracking){if(this.href)this.href=this.href.replace(/(\?|\#)(.*)/gi,"");if(this.referrerHref)this.referrerHref=this.referrerHref.replace(/(\?|\#)(.*)/gi,"")}Kameleoon.Internals.runtime.Visitor.currentVisit.addPage(this.time,e,this.keyPagesIndices,this.referrersIndices);Kameleoon.Internals.runtime.Visitor.currentVisit.addActivity(this.time,!0)}}VisitEvent_Page.urgent=!0;class VisitEvent_StaticData extends VisitEvent_Main{constructor(){super();this.eventType="staticData";this.obtainInfluences=(e,i)=>{let t={experiments:{},personalizations:{}};let n=e=>{for(let i in e)if(e[i][1]<0||"-1"==i||null==e[i][0]||"null"==e[i][0])delete e[i];return e};e.forEach((({ExperimentActivations:e,PersonalizationActivations:n})=>{for(let n in e){let s=e[n];if(s.influence){let e=s.influence-(i-s.times.slice(-1)[0]);t.experiments[n]=[parseInt(s.associatedVariationID),e]}}for(let e in n){let s=n[e];if(s.influence){let n=s.influence-(i-s.times.slice(-1)[0]);t.personalizations[e]=[1,n]}}}));this.experimentInfluences=n(t.experiments);this.personalizationInfluences=n(t.personalizations)};const{Visitor:e,Device:i}=Kameleoon.Internals.runtime;const{Browser:t,OperatingSystem:n,TimeZone:s,Language:o}=Kameleoon.Gatherer;const a=s.obtainId();this.timeSincePreviousVisit=e.obtainTimeSincePreviousVisit();this.browser=t.obtain();this.browserIndex=t.obtainIndex();this.browserVersion=i.browserVersion;this.os=n.obtain();this.osIndex=n.obtainIndex();this.windowWidth=i.windowWidth;this.windowHeight=i.windowHeight;this.screenWidth=i.screenWidth;this.screenHeight=i.screenHeight;this.localeLanguageTag=o.obtainLocaleTag();this.deviceType=i.type.toLocaleUpperCase();this.visitNumber=e.currentVisit.visitNumber;if(null!=a)this.timeZoneId=a;this.obtainInfluences(e.visits,e.currentVisit.startDate)}}VisitEvent_StaticData.urgent=!0;class VisitEvent_TargetingSegments extends VisitEvent_Main{constructor(t){super();this.eventType="targetingSegment";this.id=t.id;Kameleoon.Internals.runtime.Visitor.currentVisit.addTargetingSegment(this.time,this.id)}}VisitEvent_TargetingSegments.urgent=!1;class BitVectorUtils{}BitVectorUtils.safeLimitedBitIndex=(t,e)=>{if(null==e||e>=t)return t;return e};BitVectorUtils.computeVectorFillFrom=(t,e,i,r)=>{BitVectorUtils.clearVectorFrom(i,t,r);BitVectorUtils.addInVectorFrom(i,t,e,r)};BitVectorUtils.addInVectorFrom=(t,e,i,r)=>{t[r+BitVectorUtils.safeLimitedBitIndex(e,i)]=1};BitVectorUtils.clearVectorFrom=(t,e,i)=>{for(let r=0;r<=e;r++)t[i+r]=0};BitVectorUtils.initBitIndexCounts=t=>{let e=[];for(let i=0;i<=t;i++)e[i]=0;return e};BitVectorUtils.incrementBitIndexCount=(t,e,i)=>{i[BitVectorUtils.safeLimitedBitIndex(t,e)]++};class DataUtils{}DataUtils.writeCategorySetInVectorFrom=(t,e,r,l,o)=>{BitVectorUtils.clearVectorFrom(l,e,o);for(let i=0,n=t.length;i<n;++i)BitVectorUtils.addInVectorFrom(l,e,DataUtils.computeCategoryBitIndex(t[i],r),o)};DataUtils.writeCategoryCountsInVectorFrom=(t,e,r,l,o)=>{let i=BitVectorUtils.initBitIndexCounts(e);for(let l=0,o=t.length;l<o;++l){let o=t[l];for(let t=0,l=o.length;t<l;++t)BitVectorUtils.incrementBitIndexCount(e,DataUtils.computeCategoryBitIndex(o[t],r),i)}for(let t=0;t<=e;t++){l[o]=i[t];o++}};DataUtils.computeCategoryBitIndex=(t,e)=>{if(null==t)return null;let r=e[t];if(null==r)return null;return r};class Learner{}Learner.computeProbabilities=(e,a,r)=>{Learner.prepareEquals(e,a,r);return Learner.computeLayerSynapse(e.inputDimension,e.outputDimension,e.weights,e.bias,Learner.logistic,a)};Learner.prepareEquals=(e,a,r)=>{if(e.standarizeInputs)Learner.standarizeEquals(e,a,r);else Learner.scaleEquals(e,a,r)};Learner.standarizeEquals=(e,a,r)=>{let i=Kameleoon.Internals.configuration.MentalistFeatures.maxAbsoluteValueAfterStandardization;for(let n=0;n<e.inputDimension;n++)if(0==e.beforeDeviation[n])a[n]=0;else{let t=!0===r[n]||isNaN(a[n])||!isFinite(a[n])?e.beforeMean[n]:a[n];a[n]=t-e.beforeMean[n];a[n]/=e.beforeDeviation[n];a[n]=Math.min(a[n],i);a[n]=Math.max(a[n],-i)}};Learner.scaleEquals=(e,a,r)=>{for(let i=0;i<e.inputDimension;i++){let n=!0===r[i]||isNaN(a[i])||!isFinite(a[i])?e.beforeMean[i]:a[i];if(0==e.beforeDistance[i])if(n==e.beforeMin[i])a[i]=e.afterMiddle;else if(n<e.beforeMin[i])a[i]=e.afterMin;else a[i]=e.afterMax;else a[i]=e.afterMin+e.afterDistance/e.beforeDistance[i]*(n-e.beforeMin[i])}};Learner.computeLayerSynapse=(e,a,r,i,n,t)=>{let s=[];for(let o=0;o<a;o++){let a=0;for(let i=0;i<e;i++)a+=r[o][i]*t[i];s[o]=n(a+i[o])}return s};Learner.logistic=e=>1/(1+Math.exp(-e));class PreviousVisits{constructor(s){this.timesStartedVisits=[];this.timesStartedPages=[];this.timesReferrers=[];this.keyPages=[];this.referrers=[];this.clicks=[];this.temperatureVisits=[];this.humidityVisits=[];this.pressureVisits=[];this.windSpeedVisits=[];this.cloudinessVisits=[];this.customDataVisits=[];this.conversions={};for(let e=0,t=s.length;e<t;++e){let t=s[e];this.timesStartedVisits.push(t.startDate);this.timesStartedPages=this.timesStartedPages.concat(t.obtainTimesStartedPages());this.timesReferrers=[];this.keyPages=[];this.referrers=[];t.pages.forEach((s=>{this.keyPages.push(s.keyPagesMatched);if(s.referrersMatched.length>0){this.timesReferrers.push(s.timestamp);this.referrers.push(s.referrersMatched)}}));for(let s in t.conversions){let e=t.conversions[s].count;let i=t.conversions[s].revenue;if(this.conversions[s]){this.conversions[s].count+=e;this.conversions[s].revenue+=i}else this.conversions[s]={count:e,revenue:i}}this.clicks.push(t.clicks);this.temperatureVisits.push(t.Weather.temperature);this.humidityVisits.push(t.Weather.humidity);this.pressureVisits.push(t.Weather.pressure);this.windSpeedVisits.push(t.Weather.windSpeed);this.cloudinessVisits.push(t.Weather.cloudiness);this.customDataVisits.push(t.customData)}}}class VisitVectorizationUtils{}VisitVectorizationUtils.NUMBER_LAST_KEY_PAGES=3;VisitVectorizationUtils.NUMBER_LAST_REFERRERS=3;VisitVectorizationUtils.computeVector=(e,t,i,n,l,r,a)=>{let o=Kameleoon.Internals.configuration.MentalistFeatures;let s=Kameleoon.Internals.configuration.MentalistLearner;let u=[];let c=0;VisitVectorizationUtils.PreviousVisitsVectorizationUtils.computeVectorFillFrom(t,r,a,u,i,c);c+=(null!=r?s.experiments[r]:null!=a?s.targetingSegments[a]:s).previousVisitsHistoryVectorDimension;if(l){VisitVectorizationUtils.VisitVectorizationUtils.computeVectorFillFrom(e,r,a,u,i,c);c+=(null!=r?s.experiments[r]:null!=a?s.targetingSegments[a]:s).visitHistoryVectorDimension}if(n){u[c]=Kameleoon.Internals.runtime.Visitor.obtainTimeSincePreviousVisit();c++;u[c]=e.visitNumber;c++;DataUtils.writeCategorySetInVectorFrom(Kameleoon.Internals.runtime.storedData.obtainField("Runtime","landingKeyPagesIndices"),o.keyPages.length,VisitVectorizationUtils.computeIndexByCategory(o.keyPages),u,c);c+=o.keyPages.length+1;DataUtils.writeCategorySetInVectorFrom(Kameleoon.Internals.runtime.storedData.obtainField("Runtime","firstReferrersIndices"),o.referrers.length,VisitVectorizationUtils.computeIndexByCategory(o.referrers),u,c);c+=o.referrers.length+1;DataUtils.writeCategorySetInVectorFrom([null],o.timeZoneGroups.length,VisitVectorizationUtils.computeIndexByCategory(o.timeZoneGroups),u,c);c+=o.timeZoneGroups.length+1;BitVectorUtils.computeVectorFillFrom(o.languages.length,DataUtils.computeCategoryBitIndex(null,VisitVectorizationUtils.computeIndexByCategory(o.languages)),u,c);c+=o.languages.length+1;BitVectorUtils.computeVectorFillFrom(o.browsers.length,DataUtils.computeCategoryBitIndex(Kameleoon.Gatherer.Browser.obtainIndex(),VisitVectorizationUtils.computeIndexByCategory(o.browsers)),u,c);c+=o.browsers.length+1;let t=e.Device.browserVersion;if(isNaN(t)||!isFinite(t)||t<0||t>=1e3)t=null;if(null==t)i[c]=!0;else u[c]=t;c++;u[c]="DESKTOP"!=e.Device.type?1:0;c++;BitVectorUtils.computeVectorFillFrom(o.oss.length,DataUtils.computeCategoryBitIndex(Kameleoon.Gatherer.OperatingSystem.obtainIndex(),VisitVectorizationUtils.computeIndexByCategory(o.oss)),u,c);c+=o.oss.length+1;let n=e.Device.windowWidth;if(null==n)n=e.Device.screenWidth;if(n<0||n>=1e4)n=null;if(null==n)i[c]=!0;else u[c]=n;c++;let l=e.Device.windowHeight;if(null==l)l=e.Device.screenHeight;if(l<0||l>=1e4)l=null;if(null==l)i[c]=!0;else u[c]=l;c++;let r=e.Device.screenWidth;if(null==r)r=e.Device.windowWidth;if(r<0||r>=1e4)r=null;if(null==r)i[c]=!0;else u[c]=r;c++;let a=e.Device.screenHeight;if(null==a)a=e.Device.windowHeight;if(a<0||a>=1e4)a=null;if(null==a)i[c]=!0;else u[c]=a;c++;u[c]=!0===navigator.javaEnabled()?1:0;c++}return u};VisitVectorizationUtils.computeInputGoalIds=(e,t)=>{let i=Kameleoon.Internals.configuration.MentalistFeatures;return(null!=e?i.experiments[e]:null!=t?i.targetingSegments[t]:i).inputGoalIds};VisitVectorizationUtils.CUSTOM_DATA_BOOLEAN_VALUE_VECTOR_PARSER={parse:e=>{switch(e){case"true":return[1];case"false":return[0];default:return null}}};VisitVectorizationUtils.CUSTOM_DATA_SCALAR_VALUE_VECTOR_PARSER={parse:e=>{let t=parseFloat(e);if(isNaN(t)||!isFinite(t))return null;return[t]}};VisitVectorizationUtils.CUSTOM_DATA_CATEGORY_VALUE_VECTOR_PARSER={parse:(e,t)=>{let i=parseInt(e);if(isNaN(i)||i<0||i>=t)return null;let n;switch(t){case 1:case 2:n=[i];break;default:n=[];for(let e=0;e<t;e++)n[e]=0;n[i]=1;break}return n}};VisitVectorizationUtils.computeCustomDataBooleanValueVectorOnlineMeanAndDeviation=(e,t)=>{let i=new OnlineMeanAndDeviation(1);for(let n=0,l=e.length;n<l;++n){let l=e[n][t];if(null!=l)for(let e in l){let t=VisitVectorizationUtils.CUSTOM_DATA_BOOLEAN_VALUE_VECTOR_PARSER.parse(e);if(null!=t)i.update(t,l[e])}}return 0==i.nbUpdates[0]?null:i};VisitVectorizationUtils.computeCustomDataScalarValueVectorOnlineMeanAndDeviation=(e,t)=>{let i=new OnlineMeanAndDeviation(1);for(let n=0,l=e.length;n<l;++n){let l=e[n][t];if(null!=l)for(let e in l){let t=VisitVectorizationUtils.CUSTOM_DATA_SCALAR_VALUE_VECTOR_PARSER.parse(e);if(null!=t)i.update(t,l[e])}}return 0==i.nbUpdates[0]?null:i};VisitVectorizationUtils.computeCustomDataCategoryValueVectorOnlineMeanAndDeviation=(e,t,i)=>{let n;switch(i){case 1:case 2:n=1;break;default:n=i;break}let l=new OnlineMeanAndDeviation(n);for(let n=0,r=e.length;n<r;++n){let r=e[n][t];if(null!=r)for(let e in r){let t=VisitVectorizationUtils.CUSTOM_DATA_CATEGORY_VALUE_VECTOR_PARSER.parse(e,i);if(null!=t)l.update(t,r[e])}}return 0==l.nbUpdates[0]?null:l};VisitVectorizationUtils.computeIndexByCategory=e=>{let t={};let i=0;for(let n=0,l=e.length;n<l;++n){t[e[n]]=i;i++}return t};VisitVectorizationUtils.VisitVectorizationUtils={computeVectorFillFrom:(e,t,i,n,l,r)=>{let a=Kameleoon.Internals.configuration.MentalistFeatures;let o=OnlineMeanAndDeviation.createFromDifferences(e.obtainTimesStartedPages(),!1,!0,!0);let s=[];let u=[];let c=[];e.pages.forEach((function(e){s.push(e.keyPagesMatched);if(e.referrersMatched.length>0){u.push(e.referrersMatched);c.push(e.timestamp)}}));let V=OnlineMeanAndDeviation.createFromDifferences(c,!1,!0,!0);let m=VisitVectorizationUtils.computeIndexByCategory(a.referrers);let g=VisitVectorizationUtils.computeIndexByCategory(a.keyPages);n[r]=0;r++;for(let e=0;e<VisitVectorizationUtils.NUMBER_LAST_REFERRERS;e++){if(e<u.length)DataUtils.writeCategorySetInVectorFrom(u[u.length-1-e],a.referrers.length,m,n,r);else BitVectorUtils.clearVectorFrom(n,a.referrers.length,r);r+=a.referrers.length+1}DataUtils.writeCategoryCountsInVectorFrom(u,a.referrers.length,m,n,r);r+=a.referrers.length+1;n[r]=u.length;r++;n[r]=V.mean[0];r++;n[r]=V.deviation[0];r++;for(let e=0;e<VisitVectorizationUtils.NUMBER_LAST_KEY_PAGES;e++){if(e<s.length)DataUtils.writeCategorySetInVectorFrom(s[s.length-1-e],a.keyPages.length,g,n,r);else BitVectorUtils.clearVectorFrom(n,a.keyPages.length,r);r+=a.keyPages.length+1}DataUtils.writeCategoryCountsInVectorFrom(s,a.keyPages.length,g,n,r);r+=a.keyPages.length+1;n[r]=e.obtainPageNumberViews();r++;n[r]=o.mean[0];r++;n[r]=o.deviation[0];r++;n[r]=0;r+=1;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;l[r]=!0;r++;if(null==e.clicks)l[r]=!0;else n[r]=e.clicks;r++;if(null==e.Weather.temperature)l[r]=!0;else n[r]=e.Weather.temperature;r++;if(null==e.Weather.humidity)l[r]=!0;else n[r]=e.Weather.humidity;r++;if(null==e.Weather.pressure)l[r]=!0;else n[r]=e.Weather.pressure;r++;if(null==e.Weather.windSpeed)l[r]=!0;else n[r]=e.Weather.windSpeed;r++;if(null==e.Weather.cloudiness)l[r]=!0;else n[r]=e.Weather.cloudiness;r++;let f=[e.customData];for(let e=0,t=a.customData.length;e<t;++e){let t=a.customData[e];let i=a.numberValuesByCustomDatum[t];if(-1!=i){let e;switch(i){case-2:e=VisitVectorizationUtils.computeCustomDataBooleanValueVectorOnlineMeanAndDeviation(f,t);if(null==e){l[r]=!0;r++}else{n[r]=e.mean[0];r++}break;case 0:e=VisitVectorizationUtils.computeCustomDataScalarValueVectorOnlineMeanAndDeviation(f,t);if(null==e){l[r]=!0;r++}else{n[r]=e.mean[0];r++}break;case 1:case 2:e=VisitVectorizationUtils.computeCustomDataCategoryValueVectorOnlineMeanAndDeviation(f,t,i);if(null==e){l[r]=!0;r++}else{n[r]=e.mean[0];r++}break;default:e=VisitVectorizationUtils.computeCustomDataCategoryValueVectorOnlineMeanAndDeviation(f,t,i);if(null==e)for(let e=0;e<i;e++){l[r]=!0;r++}else for(let t=0;t<i;t++){n[r]=e.mean[t];r++}break}}}let d=VisitVectorizationUtils.computeInputGoalIds(t,i);for(let t=0,i=d.length;t<i;++t){let i=d[t];let l=e.conversions[i];n[r]=null==l?0:l.count;r++}for(let t=0,i=d.length;t<i;++t){let i=d[t];let l=e.conversions[i];n[r]=null==l?0:l.revenue;r++}}};VisitVectorizationUtils.PreviousVisitsVectorizationUtils={computeVectorFillFrom:(e,t,i,n,l,r)=>{let a=Kameleoon.Internals.configuration.MentalistFeatures;let o=OnlineMeanAndDeviation.createFromDifferences(e.timesStartedVisits,!1,!0,!0);let s=OnlineMeanAndDeviation.createFromDifferences(e.timesStartedPages,!1,!0,!0);let u=OnlineMeanAndDeviation.createFromDifferences(e.timesReferrers,!1,!0,!0);let c=[];for(let t=0,i=e.clicks.length;t<i;++t){let i=e.clicks[t];if(null!=i)c.push(i)}let V=0==c.length?null:OnlineMeanAndDeviation.createFromValues(c);let m=VisitVectorizationUtils.computeIndexByCategory(a.referrers);let g=VisitVectorizationUtils.computeIndexByCategory(a.keyPages);for(let t=0;t<VisitVectorizationUtils.NUMBER_LAST_REFERRERS;t++){if(t<e.referrers.length)DataUtils.writeCategorySetInVectorFrom(e.referrers[e.referrers.length-1-t],a.referrers.length,m,n,r);else BitVectorUtils.clearVectorFrom(n,a.referrers.length,r);r+=a.referrers.length+1}DataUtils.writeCategoryCountsInVectorFrom(e.referrers,a.referrers.length,m,n,r);r+=a.referrers.length+1;n[r]=e.referrers.length;r++;n[r]=u.mean[0];r++;n[r]=u.deviation[0];r++;n[r]=e.timesStartedVisits.length;r++;n[r]=o.mean[0];r++;n[r]=o.deviation[0];r++;for(let t=0;t<VisitVectorizationUtils.NUMBER_LAST_KEY_PAGES;t++){if(t<e.keyPages.length)DataUtils.writeCategorySetInVectorFrom(e.keyPages[e.keyPages.length-1-t],a.keyPages.length,g,n,r);else BitVectorUtils.clearVectorFrom(n,a.keyPages.length,r);r+=a.keyPages.length+1}DataUtils.writeCategoryCountsInVectorFrom(e.keyPages,a.keyPages.length,g,n,r);r+=a.keyPages.length+1;n[r]=e.timesStartedPages.length;r++;n[r]=s.mean[0];r++;n[r]=s.deviation[0];r++;n[r]=0;r+=1;let f=VisitVectorizationUtils.computeInputGoalIds(t,i);for(let t=0,i=f.length;t<i;++t){let i=f[t];let l=e.conversions[i];n[r]=null==l?0:l.revenue;r++}for(let t=0,i=f.length;t<i;++t){let i=f[t];let l=e.conversions[i];n[r]=null==l?0:l.revenue;r++}n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;n[r]=0;r++;l[r]=!0;r++;l[r]=!0;r++;if(null==V){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=V.mean[0];r++;n[r]=V.deviation[0];r++}let d;c=[];for(let t=0,i=e.temperatureVisits.length;t<i;++t){let i=e.temperatureVisits[t];if(null!=i)c.push(i)}d=0==c.length?null:OnlineMeanAndDeviation.createFromValues(c);if(null==d){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=d.mean[0];r++;n[r]=d.deviation[0];r++}c=[];for(let t=0,i=e.humidityVisits.length;t<i;++t){let i=e.humidityVisits[t];if(null!=i)c.push(i)}d=0==c.length?null:OnlineMeanAndDeviation.createFromValues(c);if(null==d){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=d.mean[0];r++;n[r]=d.deviation[0];r++}c=[];for(let t=0,i=e.pressureVisits.length;t<i;++t){let i=e.pressureVisits[t];if(null!=i)c.push(i)}d=0==c.length?null:OnlineMeanAndDeviation.createFromValues(c);if(null==d){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=d.mean[0];r++;n[r]=d.deviation[0];r++}c=[];for(let t=0,i=e.windSpeedVisits.length;t<i;++t){let i=e.windSpeedVisits[t];if(null!=i)c.push(i)}d=0==c.length?null:OnlineMeanAndDeviation.createFromValues(c);if(null==d){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=d.mean[0];r++;n[r]=d.deviation[0];r++}c=[];for(let t=0,i=e.cloudinessVisits.length;t<i;++t){let i=e.cloudinessVisits[t];if(null!=i)c.push(i)}d=0==c.length?null:OnlineMeanAndDeviation.createFromValues(c);if(null==d){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=d.mean[0];r++;n[r]=d.deviation[0];r++}let h=e.customDataVisits;for(let e=0,t=a.customData.length;e<t;++e){let t=a.customData[e];let i=a.numberValuesByCustomDatum[t];if(-1!=i){let e;switch(i){case-2:e=VisitVectorizationUtils.computeCustomDataBooleanValueVectorOnlineMeanAndDeviation(h,t);if(null==e){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=e.mean[0];r++;n[r]=e.deviation[0];r++}break;case 0:e=VisitVectorizationUtils.computeCustomDataScalarValueVectorOnlineMeanAndDeviation(h,t);if(null==e){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=e.mean[0];r++;n[r]=e.deviation[0];r++}break;case 1:case 2:e=VisitVectorizationUtils.computeCustomDataCategoryValueVectorOnlineMeanAndDeviation(h,t,i);if(null==e){l[r]=!0;r++;l[r]=!0;r++}else{n[r]=e.mean[0];r++;n[r]=e.deviation[0];r++}break;default:e=VisitVectorizationUtils.computeCustomDataCategoryValueVectorOnlineMeanAndDeviation(h,t,i);if(null==e)for(let e=0;e<i;e++){l[r]=!0;r++;l[r]=!0;r++}else for(let t=0;t<i;t++){n[r]=e.mean[t];r++;n[r]=e.deviation[t];r++}break}}}}};class CommandQueue{constructor(e,s){this.executeCommand=e=>{try{if(e.command)e=e.command;if("function"===typeof e)e();else{const s=e[0];const o=s.split(".");let t;let m;if("Kameleoon"!=o[0]){t=Kameleoon.API;m=Kameleoon.API[o[0]]}else m=Kameleoon.API[o[2]];o.forEach((e=>{if(null==t)t=window[e];else t=t[e]}));t.apply(m,Array.prototype.slice.call(e,1))}}catch(e){console.log(e)}};const o="IMMEDIATE";this.commands=e&&e.forEach?e:[];this.commands.push=e=>{if(s==o)e.level==s?this.executeCommand(e):this.commands.unshift(e);else this.executeCommand(e)};const t=[];if(s==o)for(let e=this.commands.length-1;e>=0;e--){const s=this.commands[e];if(s.level===o){t.push(s);this.commands.splice(e,1)}}else{this.commands.forEach((e=>{t.push(e)}));this.commands.splice(0,this.commands.length)}t.forEach(this.executeCommand);return this.commands}}class Actions{constructor(){this.associateActionAndVariation=(e,n,i)=>{let o=!0;let t=!0;if("REGISTERED_VARIATION"==i)t=!1;if("DISPLAYED_VARIATION"==i)o=!1;if(null===n)e.trackingPerformed=!0;const a=Kameleoon.Internals.runtime.variations.filter((e=>e.id==n))[0];let s="Reference";if(e&&e.variations)e.variations.forEach((function(e,i){if(e.id&&e.name&&e.id==n)s=e.name}));const r=e.associatedVariation;if(e&&r&&n==r.id)s=r.name;if(e&&o)e.associatedVariation={id:n,name:s};if(e&&t&&!e.displayedVariation)e.associationMade=!1;if(a){if(e&&(Kameleoon.Internals.runtime.simulationMode&&-1==e.id||!e.associationMade)){if(o){e.associatedVariation=a;e.associationMade=!0}a.actionId=e.id;if(t)e.displayedVariation=new Variation(a)}}else{e.displayedVariation={id:n,name:s};}}}checkCapping(e,n,i,o,t){if(null!=o.expositionFrequencySameVisit&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(n,i,null,t,!0,!1,!1,e)>=o.expositionFrequencySameVisit||null!=o.expositionFrequencySameVisitor&&null!=o.expositionFrequencySameVisitorDelaySeconds&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(n,i,t-1e3*o.expositionFrequencySameVisitorDelaySeconds,t,!0,!0,!1,e)>=o.expositionFrequencySameVisitor||o.cappingPerVisitorNumberExpositions&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(n,i,null,t,!0,!0,!1,e)>=o.expositionFrequencySameVisitorMax||o.cappingPerVisitorNumberExposedVisits&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(n,i,null,null,!0,!0,!0,e)>=o.exposedVisitsSameVisitorMax||o.cappingPerVisitorConvertGoal&&Kameleoon.Internals.runtime.Visitor.obtainNumberConversions(o.cappingPerVisitorGoalId)>0||null!=o.expositionFrequencyDelaySecondsBetweenTwoExpositions&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(n,i,t-1e3*o.expositionFrequencyDelaySecondsBetweenTwoExpositions,t,!0,!0,!1,e)>=1)return!1;return!0}checkActionConsent(e){if(e.experimentAction){if(!Kameleoon.Internals.runtime.Consent.AB_TESTING){if(null==Kameleoon.Internals.runtime.Consent.AB_TESTING){if("ALL"==Kameleoon.Internals.configuration.beforeAbtestConsent)return!0;if("PARTIALLY"==Kameleoon.Internals.configuration.beforeAbtestConsent&&e.technical)return!0}else if(e.technical&&"RUN"==Kameleoon.Internals.configuration.abtestConsentOptout)return!0;return!1}}else if(!Kameleoon.Internals.runtime.Consent.PERSONALIZATION){if(null==Kameleoon.Internals.runtime.Consent.PERSONALIZATION){if("ALL"==Kameleoon.Internals.configuration.beforePersonalizationConsent)return!0;if("PARTIALLY"==Kameleoon.Internals.configuration.beforePersonalizationConsent&&e.technical)return!0}else if(e.technical&&"RUN"==Kameleoon.Internals.configuration.personalizationConsentOptout)return!0;return!1}return!0}checkActionsTargeting(e){Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(1).forEach((e=>{e.previousExposition=e.exposition}));const n=[];for(let i=0,o=e.length;i<o;++i){const o=e[i];if(!this.checkActionConsent(o)||o.blocked||o.featureFlag)continue;if(null==o.numberTargetingCheckings)o.numberTargetingCheckings=0;if(Kameleoon.Targeting.checkIfTargetingMustBeComputed(o.targeting,o.rescheduleTargeting||0==o.numberTargetingCheckings,!o.experimentAction&&"CUMULATIVE_WEIGHT"==o.checkConditionsRule))n.push(o)}e=n;for(let n=0,i=e.length;n<i;++n){const i=e[n];if(!0===i.forceTargeting)i.targeting=!0;else{const e=!i.experimentAction&&"CUMULATIVE_WEIGHT"==i.personalizationCheckConditionsRule;const n=Kameleoon.Targeting.checkTree(i,i.targetingSegment?i.targetingSegment.tree:null,e,i.targetingSegment||null);if(e)switch(i.microtargetingMatchType){case"GREATER":i.targeting=n.weight>(i.cumulativeWeightOfConditions||0);break;case"EQUAL":i.targeting=n.weight==(i.cumulativeWeightOfConditions||0);break;case"LOWER":i.targeting=n.weight<i.cumulativeWeightOfConditions;break}else i.targeting=n.targeting;i.rescheduleTargeting=n.rescheduleTargeting;i.numberTargetingCheckings++}}const i=[];const r=[];for(let n=0,i=e.length;n<i;++n){const i=e[n];if(!1===i.targeting||!i.experimentAction&&!0===i.targeting&&!1===i.exposition){this.associateActionAndVariation(i,0,"DISPLAYED_VARIATION");Kameleoon.Utils.removeCSSStyleSheet(i)}if(Kameleoon.Targeting.checkIfTargetingMustBeComputed(i.targeting,i.rescheduleTargeting,!i.experimentAction&&"CUMULATIVE_WEIGHT"==i.personalizationCheckConditionsRule))r.push(i)}if(r.length>0){const e=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(e);this.process(r)}),Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY)}if(e.length>0&&Kameleoon.Internals.runtime.targetingsEvent)Kameleoon.Internals.runtime.targetingsEvent.emit(e)}performActionsTracking(e){const n=[];for(let i=0,o=e.length;i<o;++i){const o=e[i];if(o.trackingPerformed||!o.associatedVariation||null==o.associatedVariation.id)continue;n.push(o)}e=n;for(let n=0,i=e.length;n<i;++n){const i=e[n];const o=i.associatedVariation;let t=i.collectingDataDisabled?!1:!0;if(i.experimentAction&&0==i.deviation[o.id])t=!1;if(i.mentalistEnabled)o.name+=" (Predicteo)";if(i.experimentAction)Kameleoon.Gatherer.track(VisitEvent_Experiment,{id:i.id,variationId:o.id,notTrack:!(i.kameleoonTracking&&t)});else Kameleoon.Gatherer.track(VisitEvent_Personalization,{id:i.id,variationId:0==o.id?0:1,notTrack:!(i.kameleoonTracking&&t),originalVariationId:o.id,unexpositionCause:i.notExposedReason});if(t&&(i.experimentAction||i.exposition||!i.exposition&&"PERSONALIZATION_EXCLUSION"==i.notExposedReason)){const e=Kameleoon.Internals.runtime.RequestManager;const n=e.addCallback.bind(e);if(i.smartTagTracking)n((()=>Kameleoon.Tracking.processSmartTag(i)));if(i.pianoTracking)n((()=>Kameleoon.Tracking.processPiano(i)));if(i.contentSquareTracking)n((()=>Kameleoon.Tracking.processContentSquare(i)));}i.trackingPerformed=!0}}performDeferredVariations(e,n,i){}process(e,n){const i=(new Date).getTime();this.checkActionsTargeting(e);const o=[];for(let t=0,a=e.length;t<a;++t){const a=e[t];if(a.treated||a.blocked)continue;if(!0===a.targeting){Kameleoon.Internals.runtime.Visitor.currentVisit.addActionTriggered(a.id,a.experimentAction);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"SegmentTriggered",{segment:{id:a.targetingSegmentId,name:a.targetingSegment?a.targetingSegment.name:null}});if(a.experimentAction){const e=new APIAction(a,0);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"ExperimentTriggered",{experiment:e},"experiment/triggered");a.performVariationAssignment(!1);if(null!=a.associatedVariation)if(!this.checkCapping(!0,a.id,a.associatedVariation.id,a.associatedVariation,i))a.targeting=!1}}if(!0===a.targeting){a.treated=!0;this.currentAction=a;if(a.displayedVariation){if(a.experimentAction)if(0!=a.displayedVariation.id&&"reference"!=a.displayedVariation.id||a.executeCodeForReference){if(a.cssCode&&!a.cssCodeEvaluated){a.cssCodeEvaluated=!0;Kameleoon.Utils.addCSSStyleSheet(a.cssCode,a,null)}if(a.javaScriptCode&&!a.javaScriptCodeEvaluated){a.javaScriptCodeEvaluated=!0;Kameleoon.Utils.runProtectedScript(a.javaScriptCode,"kameleoonActionJavaScriptCode-"+a.id+".js")}}if(!n&&a.displayedVariation.process)a.displayedVariation.process();if(a.targeting&&(a.experimentAction||a.exposition)){const e={};if(a.experimentAction)e.experiment=new APIAction(a,0);else e.personalization=new APIAction(a,1);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,a.experimentAction?"ExperimentActivated":"PersonalizationActivated",e,"action/activated")}o.push(a)}}}this.performActionsTracking(o)}processAllActions(){let e=[];e=e.concat(Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0));this.process(e);Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0).forEach((e=>{e.handleSpecialCase()}));}}class Campaigns{constructor(){this.experiments={};this.personalizations={}}addCampaign(i){if(i.experimentAction)this.experiments[i.id.toString()]=i;else this.personalizations[i.id.toString()]=i}obtainCampaign(i,t){if(null!=i){i=i.toString();if(null!=t){const n=t?"experiments":"personalizations";return this[n][i]}return this.experiments[i]||this.personalizations[i]}}obtainCampaignsList(i){const t="experiments"===i||0===i?"experiments":"personalizations";return Object.values(this[t])}}class Consent{constructor(){this.disable=(e,n)=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/disable",consentType:e});if(e&&"BOTH"!=e)this[e]=!1;else{this.AB_TESTING=!1;this.PERSONALIZATION=!1}if(1!=n)this.write();Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"LegalConsentUpdated",{legalConsentUpdate:this.getConsent()})};this.enable=(e,n)=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/enable",consentType:e});if(e&&"BOTH"!=e)this[e]=!0;else{this.AB_TESTING=!0;this.PERSONALIZATION=!0}if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.RequestManager){Kameleoon.Internals.runtime.RequestManager.processRequests();this.purge()}if(1!=n)this.write();Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"LegalConsentUpdated",{legalConsentUpdate:this.getConsent()})};this.getConfiguredConsent=()=>({AB_TESTING:Kameleoon.Internals.configuration.abtestConsent,PERSONALIZATION:Kameleoon.Internals.configuration.personalizationConsent});this.getConsent=()=>({AB_TESTING:this.AB_TESTING,PERSONALIZATION:this.PERSONALIZATION});this.hasGlobalConsent=()=>{return this.AB_TESTING||this.PERSONALIZATION};this.initialize=e=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/initialize",consent:e});this.AB_TESTING=e.AB_TESTING;this.PERSONALIZATION=e.PERSONALIZATION;this.initializeSdk()};this.initializeSdk=()=>{if(this.AB_TESTING)return;try{const e=localStorage.getItem("kameleoonConsentData");if(e){const n=JSON.parse(e)[Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE")];if(n)this.AB_TESTING=!0}}catch(e){}};this.purge=()=>{if(Kameleoon.Internals.runtime){const e=e=>{if(null!=e)for(const n in e)Kameleoon.Utils.createLocalData(e[n].name,e[n].value,e[n].days,e[n].domain,e[n].forceLocalAccess,e[n].jsonFormat,null,!0)};e(Kameleoon.Internals.runtime.localDataMap&&Kameleoon.Internals.runtime.localDataMap["LS"]);e(Kameleoon.Internals.runtime.localDataMap&&Kameleoon.Internals.runtime.localDataMap["COOKIE"]);Kameleoon.Internals.runtime.localDataMap=null;Kameleoon.Analyst.Actions.processAllActions();}};this.setup=()=>{let e={AB_TESTING:!1,PERSONALIZATION:!1};const n=Kameleoon.Internals.runtime.readFromStorageOrExternal("kameleoonLegalConsent","LS");if(null!=n)if(1==n)e={AB_TESTING:!0,PERSONALIZATION:!0};else e=n;else{e={AB_TESTING:"OFF"==Kameleoon.Internals.configuration.abtestConsent?!0:null,PERSONALIZATION:"OFF"==Kameleoon.Internals.configuration.personalizationConsent?!0:null};}this.initialize(e)};this.write=()=>{Kameleoon.Utils.createLocalData("kameleoonLegalConsent",this.getConsent(),Utils.MAX_STORAGE_DAYS,null,"LS",!0,null,!0)};this.AB_TESTING=!1;this.PERSONALIZATION=!1}}class Device{get adBlocker(){return Kameleoon.Internals.runtime.adBlocker}get os(){return Kameleoon.Gatherer.OperatingSystem.obtain()}get screenHeight(){return window.screen.height}get screenWidth(){return window.screen.width}get timeZone(){return Kameleoon.Gatherer.TimeZone.obtainId()}get windowHeight(){return window.innerHeight}get windowWidth(){return window.innerWidth}constructor(){const e=Kameleoon.Utils.bowser.parsedResult=Kameleoon.Utils.bowser.parsedResult||Kameleoon.Utils.bowser.parse(navigator.userAgent);let t=e.browser.version;try{if(t.split(".").length>1)t=t.split(".")[0]+"."+t.split(".")[1]}catch(e){}this.browser=e.browser.name||"Other";this.browserVersion=t?parseFloat(t):null;this.type="tablet"==e.platform.type?"Tablet":"mobile"==e.platform.type?"Phone":"Desktop";if("Safari"==this.browser&&"Desktop"==this.type&&"ontouchend"in document.documentElement)this.type="Tablet"}}class Experiment{constructor(i,t){this.handleSpecialCase=()=>{if(!0!==this.targeting&&this.redirectProcessed){this.performVariationAssignment(!0);Kameleoon.Analyst.Actions.performActionsTracking([this])}else if(this.preAssignVariation)this.performVariationAssignment(!0)};this.obtainVariationAssignmentRandomNumber=()=>{let i="";this.variations.forEach((function(t){if(t.respoolTime)i+=t.respoolTime}));const t=Kameleoon.Internals.runtime.Visitor.obtainIdentifierValue();return Kameleoon.Utils.seededRandom(t+this.id+i,!0)};this.performVariationAssignment=i=>{if(this.displayedVariation&&!i&&!this.deferredLoading)return;if(null!=this.mentalistDeviation){if(null!=this.mentalistVariationReassignationPermissionCustomScript)try{this.mentalistVariationReassignationPermission=Kameleoon.Utils.runProtectedScript("return "+this.mentalistVariationReassignationPermissionCustomScript,"kameleoonMentalistVariationReassignationPermissionCustomScript.js")}catch(i){}if(null==this.mentalistVariationReassignationPermission)this.mentalistVariationReassignationPermission=void 0===Kameleoon.Internals.runtime.Visitor.currentVisit.ExperimentActivations[this.id];if(Kameleoon.Internals.runtime.gathererRun&&Kameleoon.Internals.runtime.mentalistRun)this.mentalistEnabled=!0}if(void 0!==this.registeredVariationId&&this.assignmentTime)this.variations.forEach((i=>{if(this.registeredVariationId==i.id&&i.respoolTime>this.assignmentTime||null===this.registeredVariationId&&this.untrackedRespoolTime>this.assignmentTime)this.registeredVariationId=void 0}));if(void 0===this.registeredVariationId&&!Kameleoon.Internals.runtime.simulationMode&&0==this.variations.filter((i=>i.id==this.registeredVariationId)).length)this.registeredVariationId=void 0;if(this.mentalistEnabled&&this.mentalistVariationReassignationPermission)this.registeredVariationId=void 0;if(void 0===this.registeredVariationId){if(this.mentalistEnabled){let i={};if(Kameleoon.Utils.seededRandom(Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode+this.id,!0)<=this.mentalistDeviation)i=Kameleoon.Mentalist.computeVariationIdToScore(this.id);if(0==Object.keys(i).length){this.mentalistEnabled=!1;for(const t in this.deviation)i[t]=Math.random()}if(null!=this.mentalistVariationSelectionCustomScript&&this.mentalistEnabled)try{this.registeredVariationId=Kameleoon.Utils.runProtectedScript("return "+this.mentalistVariationSelectionCustomScript,"kameleoonMentalistVariationSelectionCustomScript.js")(i)}catch(i){}else{let t=Number.NEGATIVE_INFINITY;for(const e in i){const n=i[e];if(n>t){this.registeredVariationId=parseInt(e);t=n}}}if(void 0===this.registeredVariationId)this.registeredVariationId=0;}else if(Kameleoon.Internals.runtime.customVariationSelectionFunction){this.registeredVariationId=Kameleoon.Internals.runtime.customVariationSelectionFunction(this);if(null!=this.registeredVariationId)if("reference"==this.registeredVariationId.toString())this.registeredVariationId=0;else if("none"==this.registeredVariationId.toString())this.registeredVariationId=null}else{const i=this.obtainVariationAssignmentRandomNumber();let t=0;this.registeredVariationId=null;for(let e=0,n=this.variations.length;e<n;++e){t+=this.variations[e].deviation;if(i<=t){this.registeredVariationId=this.variations[e].id;break}}}this.assignmentTime=(new Date).getTime();this.writeLocalData()}Kameleoon.Analyst.Actions.associateActionAndVariation(this,this.registeredVariationId,i?"REGISTERED_VARIATION":"BOTH")};this.setBlocked=i=>{this.blockingReason=i;this.blocked=!0};this.setTargetingSegment=i=>{this.targetingSegment=Kameleoon.Internals.runtime.targetingSegments.filter((i=>i.id==this.targetingSegmentId))[0]||{};if(!i||i==this.targetingSegmentId){this.targeting=void 0;this.rescheduleTargeting=null;this.numberTargetingCheckings=0;this.displayedVariation=null}};this.trigger=()=>{if(!this.targeting){this.targeting=!0;this.displayedVariation=null}};this.writeLocalData=()=>{const i=this.registeredVariationId+(this.mentalistEnabled?"-mentalist":"")+"/"+this.assignmentTime;if(!this.simulationMode)Kameleoon.Utils.createLocalData("kameleoonExperiment-"+this.id,i,this.cookieDuration||30,this.cookieDomain,"LS",!1)};for(const t in i)this[t]=i[t];const e="kameleoonRedirect-"+this.id;let n=t?t[e]:Kameleoon.Utils.readLocalData(e,"LS",!1);n=n?n:Kameleoon.Internals.runtime.parameters[e];this.previousRequestRedirected=n?!0:!1;if(n){this.registeredVariationId=n;this.assignmentTime=(new Date).getTime()}if(this.previousRequestRedirected){this.redirectProcessed=!0;Kameleoon.Utils.eraseLocalData("kameleoonRedirect-"+this.id,null,null)}const a="kameleoonExperiment-"+this.id;let s=t?t[a]:Kameleoon.Utils.readLocalData(a,"LS",!1);for(const i in Kameleoon.Internals.runtime.parameters)if(0==i.indexOf("kameleoonRedirect-"+this.id)){s=Kameleoon.Internals.runtime.parameters[i]+"/"+(new Date).getTime()+"/"+!1;this.writeLocalData()}if(s&&-1!=this.id){const i=s.split("/");this.registeredVariationId="null"==i[0]?null:i[0];this.assignmentTime=parseInt(i[1]);if(this.registeredVariationId){if("reference"==this.registeredVariationId.toString()){this.registeredVariationId=0;this.writeLocalData()}if("none"==this.registeredVariationId.toString()){this.registeredVariationId=null;this.writeLocalData()}if(null!=this.winningVariationId&&!Kameleoon.Internals.runtime.simulationMode&&!Kameleoon.Internals.runtime.disableCache&&this.winningVariationId!=this.registeredVariationId)this.registeredVariationId=this.winningVariationId;}}if(this.registeredVariationId&&-1!=this.registeredVariationId.toString().indexOf("-mentalist")){this.registeredVariationId=parseInt(this.registeredVariationId.toString().replace("-mentalist",""));this.mentalistEnabled=!0}if(this.registeredVariationId>0&&s&&null==this.deviation[this.registeredVariationId])this.registeredVariationId=void 0;this.setTargetingSegment();if(this.redirectProcessed&&this.registeredVariationId)this.writeLocalData();const r=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","blockedExperiments",[]);if(r.length>0&&-1!=r.indexOf(this.id))this.setBlocked("API");}static performMutualExclusiveGroup(){}}class Goals{constructor(){this.checkKameleoonGoals=()=>{const e=[];const n=[];const o=[];const s=[];Kameleoon.Internals.runtime.goals.forEach((t=>{switch(t.type){case"ENGAGEMENT":n.push({goal:t});break;case"URL":{const n=new RegExp(t.url);if(n.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL()))e.push({goal:t});break}}}));if(e.length>0)this.processConversions(e);Kameleoon.Utils.addEventListener(document,Kameleoon.Internals.runtime.mouseDownEvent,(e=>{this.processConversions(n)}),!0);};this.processConversions=e=>{if(Kameleoon.Internals.runtime.gathererRun)for(let n=0,o=e.length;n<o;++n){const o=e[n];const s=o.goal;const t=!0===o.negative;if(t||"PAGE_VIEWS"!=s.type&&"TIME_SPENT"!=s.type&&"ENGAGEMENT"!=s.type||0==Kameleoon.Internals.runtime.Visitor.currentVisit.obtainNumberConversions(s.id)){Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"ConversionTriggered",new APIGoal(s),"goal/process");Kameleoon.Gatherer.track(VisitEvent_Conversions,{goalId:s.id,revenue:o.revenue?o.revenue:0,negative:t});}}}}}class KGeolocation{constructor(){let e=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","geolocation");if(null==e)Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.runtime.RequestManager.obtainGeolocationUrl(),(e=>{if(4==e.readyState&&(200==e.status||204==e.status)){let t=e.getResponseHeader("geoip_country_name");let o=e.getResponseHeader("geoip_region_name");let n=e.getResponseHeader("geoip_city");this.country=t?Kameleoon.Utils.decodeUTF8(t):null;this.city=n?Kameleoon.Utils.decodeUTF8(n):null;this.latitude=e.getResponseHeader("geoip_latitude");this.longitude=e.getResponseHeader("geoip_longitude");this.postalCode=e.getResponseHeader("geoip_postal_code");this.region=o?Kameleoon.Utils.decodeUTF8(o):null;this.loaded=!0;Kameleoon.Gatherer.track(VisitEvent_Geolocation,this);Kameleoon.Internals.runtime.storedData.saveField("Runtime","geolocation",this);this.loadWeather()}}),null);else{this.loaded=!0;this.country=e.country;this.city=e.city;this.latitude=e.latitude;this.longitude=e.longitude;this.postalCode=e.postalCode;this.region=e.region;this.loadWeather()}}loadWeather(){}}class KMutationObserver{static addMutationElementsToInternalObjects(e){for(let t=0;t<e.length;++t){const n=e[t];if(n&&n.id)Kameleoon.Internals.runtime.addedIDs["#"+n.id]=!0;if(n&&n.className&&"string"===typeof n.className){const e=n.className.split(" ");for(let t=0;t<e.length;++t)Kameleoon.Internals.runtime.addedClasses["."+e[t]]=!0}}}static checkSelectorInDomTree(e){if(!e.selectors)KMutationObserver.fillClassesAndIdsForSelector(e);if(0===e.selectorClasses.length&&0===e.selectorIDs.length)return!0;let t=!1;for(let n=0;n<e.selectors.length;++n)if(KMutationObserver.checkIDsForSelector(e.selectorIDs[n],e)&&KMutationObserver.checkClassesForSelector(e.selectorClasses[n],e)){t=!0;break}return t}static fillClassesAndIdsForSelector(e){const t=[];const n=[];const o=e.selector&&e.selector.split(",")||[];if(e.currentQuery&&e.selector!=e.currentQuery)o.push(e.currentQuery);o.forEach((e=>{if(-1!==e.indexOf(".")||-1!==e.indexOf("#")){let o;let r;if(-1!==e.indexOf("\\")||-1!==e.indexOf("contains")||-1!==e.indexOf(":not")){const t=e.replace(/(:[^:]+\(.+?\)|\\)/g,"").replace(/(\-)?(\[.*?\])/g,((e,t)=>t?e:""));o=t.match(/\.([^\s.]+)/g);r=t.match(/#([^\s:\[]+)/g)}else{o=e.match(/\.([^\s.:\[]+)/g);r=e.match(/#([^\s:\[>]+)/g)}n.push(o||[]);t.push(r||[])}}));e.selectors=o;e.selectorClasses=n;e.selectorIDs=t;return e}static checkClassesForSelector(e,t){if(null==e)return!0;for(let t=0,n=e.length;t<n;++t){const n=e[t];if(-1===n.indexOf("kameleoon")&&null==Kameleoon.Internals.runtime.addedClasses[n])return!1}return!0}static checkIDsForSelector(e,t){if(null==e)return!0;let n;if(t.options)n=t.options.domReference;for(let t=0,o=e.length;t<o;++t){const o=e[t];if(-1!==o.indexOf("kameleoonElement")){if(n){const e=KMutationObserver.fillClassesAndIdsForSelector({selector:n});if(!KMutationObserver.checkIDsForSelector(e.selectorIDs[0],e))return!1}}else if(null==Kameleoon.Internals.runtime.addedIDs[o])return!1}return!0}static fillInternalObjectsForMutationObserver(e){if(!e)e=document;const t=e.getElementsByTagName("*");for(let e=0,n=t.length;e<n;++e){const n=t[e];if(n.id)Kameleoon.Internals.runtime.addedIDs["#"+n.id]=!0;if(n.className&&"string"===typeof n.className){const e=n.className.split(" ");for(let t=0;t<e.length;++t)Kameleoon.Internals.runtime.addedClasses["."+e[t]]=!0}}}static removeMutationElementsFromInternalObjects(e){for(let t=0;t<e.length;++t){const n=e[t];if(n&&n.id)if(1==Kameleoon.Internals.runtime.addedIDs["#"+n.id])delete Kameleoon.Internals.runtime.addedIDs["#"+n.id]}}static performWaitingElementPresentObject(){for(let e=Kameleoon.Internals.runtime.waitingElementPresentObjects.length-1;e>=0;e-=1){const t=Kameleoon.Internals.runtime.waitingElementPresentObjects[e];if(t&&t.useAntiFlicker)if(KMutationObserver.checkSelectorInDomTree(t)){const n=Kameleoon.Utils.querySelectorAll(t.selector);if(0<n.length){Kameleoon.Utils.runProtectedFunction((function(){t.callback(n)}),!0);Kameleoon.Internals.runtime.waitingElementPresentObjects.splice(e,1)}}}}static performVariationsElementSet(e){const t=Kameleoon.Internals.runtime.listenVariations||[];if(e)t.forEach((function(e){if(e.elementSets)e.elementSets.forEach((function(t){if(t.evaluated)return;if((!t.evaluated||!(t.options.autoGeneratedSelector||t.options.idSelector||t.options.domOperation))&&KMutationObserver.checkSelectorInDomTree(t)){const n=e.getAction();if(!n||n.targeting){t.evaluated=!0;Kameleoon.ElementSet.processElementSet(t,e,!1,e.permanentRefreshActive,e.editionMode,document)}}}))}));}static performAsyncMutations(){Kameleoon.Internals.runtime.domMutationThrottling=!0;if(!KMutationObserver.asyncMutationsTimeoutId)KMutationObserver.asyncMutationsTimeoutId=Kameleoon.Utils.setTimeout((()=>{if(KMutationObserver.mutationList.length>=KMutationObserver.MAX_MUTATIONS_LENGTH_FOR_ITERATION)KMutationObserver.fillInternalObjectsForMutationObserver();else KMutationObserver.mutationList.forEach((e=>{const t=e.addedNodes,n=e.removedNodes;const o=Array.prototype.slice.call(t);const r=Array.prototype.slice.call(n);const s=o.concat(r);KMutationObserver.removeMutationElementsFromInternalObjects(n);KMutationObserver.addMutationElementsToInternalObjects(t);for(let t=0;t<s.length;++t){const n=s[t];if(n&&n.innerHTML&&"childList"===e.type)KMutationObserver.fillInternalObjectsForMutationObserver(n)}}));KMutationObserver.mutationList=[];KMutationObserver.performWaitingElementPresentObject();KMutationObserver.performVariationsElementSet(!0);Kameleoon.Utils.clearTimeout(KMutationObserver.asyncMutationsTimeoutId);KMutationObserver.asyncMutationsTimeoutId=null}),250)}static setMutationObserver(){if(Kameleoon.Internals.runtime.cantUseMutationObserver||Kameleoon.Internals.runtime.mutationObserver)return;KMutationObserver.fillInternalObjectsForMutationObserver();const e=document.documentElement;const t={attributes:!0,childList:!0,characterData:!0,subtree:!0};Kameleoon.Internals.runtime.mutationObserver=new MutationObserver((function(e){let t=!0;if(!Kameleoon.Internals.runtime.domReady&&e.length>=KMutationObserver.MAX_MUTATIONS_LENGTH){KMutationObserver.mutationList=KMutationObserver.mutationList.concat(e);KMutationObserver.performAsyncMutations();return}e.forEach((e=>{const n=e.addedNodes,o=e.removedNodes;const r=Array.prototype.slice.call(n);const s=Array.prototype.slice.call(o);const a=r.concat(s);KMutationObserver.removeMutationElementsFromInternalObjects(o);KMutationObserver.addMutationElementsToInternalObjects(n);for(let n=0;n<a.length;++n){const o=a[n];if((Kameleoon.Internals.runtime.editorMode||Kameleoon.Internals.runtime.kameleoonSelectionIframeMode)&&o&&o.id&&"string"==typeof o.id&&null!==o.id.match("kameleoon"))if(o.closest&&null!==o.closest(".KameleoonProtected"))t=!1;if(t&&o&&o.innerHTML&&"childList"===e.type)KMutationObserver.fillInternalObjectsForMutationObserver(o)}}));KMutationObserver.performWaitingElementPresentObject();KMutationObserver.performVariationsElementSet(t);}));if("function"===typeof Kameleoon.Internals.runtime.mutationObserver.observe)Kameleoon.Internals.runtime.mutationObserver.observe(e,t);if(Kameleoon.Internals.runtime.singlePageSupport)KMutationObserver.setMutationObserverSPA()}static setMutationObserverSPA(){if(Kameleoon.Internals.runtime.mutationObserverSpa||Kameleoon.Internals.runtime.cantUseMutationObserver)return;Kameleoon.API.Core.runWhenElementPresent("body",(e=>{const t={childList:!0,subtree:!0};Kameleoon.Internals.runtime.mutationObserverSpa=new MutationObserver((function(e){Kameleoon.Internals.runtime.listenVariations=[];Kameleoon.Internals.runtime.mutationObserverSpa.disconnect();if(Kameleoon.ElementSet)KMutationObserver.checkElementSetIntegrity();KMutationObserver.executeCallbacks(e);KMutationObserver.checkDynamicElements();n()}));const n=()=>{t.characterData=Kameleoon.ElementSet&&Kameleoon.ElementSet.pageElementSetsSpa.length>0||Kameleoon.Internals.runtime.listenSpaCallbacks.length>0;Kameleoon.Internals.runtime.mutationObserverSpa.observe(e[0],t)};n()}))}}KMutationObserver.MAX_MUTATIONS_LENGTH=3e3;KMutationObserver.MAX_MUTATIONS_LENGTH_FOR_ITERATION=5e3;KMutationObserver.asyncMutationsTimeoutId=null;KMutationObserver.mutationList=[];KMutationObserver.executeCallbacks=e=>{Kameleoon.Internals.runtime.listenSpaCallbacks.forEach((e=>Kameleoon.Utils.runProtectedFunction(e,!0)))};KMutationObserver.checkDynamicElements=()=>{Kameleoon.Internals.runtime.waitingDynamicElements.forEach((e=>{const t=Kameleoon.Utils.querySelectorAll(e.selector).filter((t=>null==t.getAttribute(e.attribute)));t.length>0&&e.callback(t)}))};KMutationObserver.checkElementSetIntegrity=()=>{if(Kameleoon.Internals.runtime.editorEnabled)return;try{const e=[];(Kameleoon.ElementSet.pageElementSetsSpa||[]).forEach((t=>{const{elementSet:n,potentialElementsWithOptions:o}=t;const r=Kameleoon.Utils.querySelectorAll(n.selector);if(!r.length&&o&&!o.length)KMutationObserver.resetElementSet(n,null);r.forEach((t=>{if(n.options.domOperation){}else{if(n.options.autoGeneratedSelector&&n.options.kameleoonId){if(null==t.getAttribute("data-kameleoon-id"))t.setAttribute("data-kameleoon-id",n.options.kameleoonId);if(null==t.getAttribute("id"))t.setAttribute("id","kameleoonId"+n.options.kameleoonId)}if(n.options.customSelector&&n.options.kameleoonClass){if(null==t.getAttribute("data-kameleoon-class"))Kameleoon.ElementSet.addDuplicatedData(t,null,n.options.kameleoonClass);if(0==Kameleoon.ElementSet.checkClassName(t,"KameleoonClass"+n.options.kameleoonClass))Kameleoon.ElementSet.addClassName(t,"KameleoonClass"+n.options.kameleoonClass)}}}))}));}catch(e){}};KMutationObserver.resetElementSet=(e,t,n)=>{const o=t?[t]:[];if(n)o.push(n);o.forEach((e=>{if(e.id&&0==e.id.indexOf("kameleoon"))e.removeAttribute("id");e.removeAttribute("kameleoon");e.removeAttribute("data-kameleoon-id");delete e.kameleoonData;delete e.dataset.kameleoonEvaluated}));if(e.element&&!o.length)delete e.element;e.evaluated=!1;Kameleoon.ElementSet.processElementSet(e,null,!1,!1,!1);e.evaluated=!0;};KMutationObserver.containsDomOperationElements=e=>{const t=e&&e.querySelector("span.kameleoonDomOperation");return t&&t.parentElement==e;};class Logger{constructor(){this.MAX_REQUESTS_PER_VISIT=3;this.baseUrl="https://logger.kameleoon.com/api/2/store/?sentry_key=d8dc96c209184885ab9643cbaf1eb86f&sentry_version=7";this.canSend=()=>{if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.Consent.hasGlobalConsent())if(this.errorLoggerIds.length<this.MAX_REQUESTS_PER_VISIT){let e=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","loggerPopulation");if(null==e){this.population=e=Math.random();Kameleoon.Internals.runtime.storedData.saveField("Runtime","loggerPopulation",e)}if(e<.01)return!0}return!1};this.generateRandomIdAsString=(e,t,n)=>Kameleoon.Utils.computeStringSha256(e+t+n).substr(0,32);this.generateRequestDataAsString=(e,t,n,r)=>{let o={tags:{siteCode:Kameleoon.Internals.configuration.siteCode},user:{},environment:Kameleoon.Internals.configuration.environment,platform:"javascript",event_id:t,request:{url:location.href,headers:{"User-Agent":navigator.userAgent}},exception:{values:[{type:e.name,value:e.stack?e.stack:e.message,stacktrace:{frames:[{filename:n}]},mechanism:{data:{mode:"stack",message:e.stack?e.stack:e.message,name:e.name},handled:!1,type:"onerror"}}]}};if(r){o.tags["action-id"]=r.id;o.tags["action-name"]=r.name;o.tags["action-type"]=r.experimentAction?"experiment":"personalization"}try{o.user={id:Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.Visitor&&Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode}}catch(e){o.user={id:"no_visitor_code"}}return JSON.stringify(o)};this.send=(e,t,n)=>{try{this.errorLoggerIds=Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.storedData.obtainField("Runtime","loggerRequestsSend")||this.errorLoggerIds;let r=this.generateRandomIdAsString(e.message,Kameleoon.Internals.configuration.siteCode,Kameleoon.Internals.configuration.environment);if(-1==this.errorLoggerIds.indexOf(r)){this.errors.push(e);let o=e.stack?e.stack:e.message;if(this.canSend()&&o&&o.trim().length>0){let o=new XMLHttpRequest;o.open("POST",this.baseUrl,!0);o.timeout=2e3;o.send(this.generateRequestDataAsString(e,r,t,n));Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.storedData.saveField("Runtime","loggerRequestsSend",this.errorLoggerIds)}this.errorLoggerIds.push(r);if(Kameleoon.Internals.runtime.parameters.kameleoonDebug||localStorage.kameleoonExtensionIsAdmin)console.log(e)}}catch(t){this.errors.push(e)}};this.errorLoggerIds=[];this.errors=[]}}class OnlineMeanAndDeviation{constructor(e){this.dimension=e;this.mean=[];this.nbUpdates=[];this.m2=[];this.deviation=[];for(let t=0;t<e;++t){this.mean[t]=0;this.nbUpdates[t]=0;this.m2[t]=0;this.deviation[t]=0}this.update=(e,t=1)=>{if(t>0)for(let n=0;n<this.dimension;++n)if(!isNaN(e[n])&&isFinite(e[n])){let i=this.mean[n]-e[n];let a=this.nbUpdates[n]+t;this.m2[n]=this.m2[n]+i/a*i*this.nbUpdates[n]*t;this.deviation[n]=Math.sqrt(this.m2[n]/a);this.mean[n]=this.mean[n]/a*this.nbUpdates[n]+e[n]/a*t;this.nbUpdates[n]=a}}}}OnlineMeanAndDeviation.createFromDifferences=(e,t,n,i)=>{let a=new OnlineMeanAndDeviation(1);let s=e.length;let l=0;if(l<s){let h=e[l];l++;while(l<s){let s=e[l];l++;let o=s-h;if(o<0&&t||0==o&&n||o>0&&i)a.update([o]);h=s}}return a};OnlineMeanAndDeviation.createFromValues=e=>{let t=new OnlineMeanAndDeviation(1);for(let n=0,i=e.length;n<i;n++)t.update([e[n]]);return t};OnlineMeanAndDeviation.createFromBooleanValues=e=>{let t=new OnlineMeanAndDeviation(1);for(let n=0,i=e.length;n<i;n++)t.update([e[n]?1:0]);return t};class RequestManager{constructor(){this.errorKey="kameleoonRequestEvents";this.processRequests=()=>{if(this.callbacksToExecute.length>0&&Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){const e=this.callbacksToExecute.splice(0,1e3);e.forEach((e=>e()))}if(this.eventsToSend.length>0&&this.validateTrackingRequest()){const e=this.eventsToSend.splice(0,1e3);const t=this.obtainRequestBody(e);this.send(this.obtainVisitUrl(),"POST",t,(()=>{}),(()=>{this.createErrorEventsQueue(t)}));if(this.eventsToSend.length>0)this.processRequests()}};this.obtainRequestBody=e=>{const t=Kameleoon.Internals.runtime.Consent.getConsent();let n="";n+=e.reduce(((e,n)=>{if(!n.notTrack&&this.validateTrackingConsent(n.eventType,t))e+=n.obtainRequestData()+"\n";return e}),"");if(sessionStorage.getItem(this.errorKey)){n+=sessionStorage.getItem(this.errorKey);sessionStorage.removeItem(this.errorKey)}return n};this.obtainVisitUrl=()=>{const e=Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode;return`${this.url}/visit/events?siteCode=${this.siteCode}&visitorCode=${e}&itp=${"Safari"===Kameleoon.Internals.runtime.Device.browser}`};this.obtainIpUrl=()=>this.url+"/ip";this.obtainGeolocationUrl=()=>this.url+"/geolocation";this.send=(e,t,n,s,i,o)=>{const r=new XMLHttpRequest;r.open(t,e,!0);if(s)r.onreadystatechange=function(e){s.bind(r)(e.target)};if(i){r.onabort=function(e){i.bind(r)(e.target)};r.onerror=function(e){i.bind(r)(e.target)};r.ontimeout=function(e){i.bind(r)(e.target)}}r.timeout=o||15*60*1e3;r.send("POST"==t&&n?n:null);};this.sendActiveScript=()=>{};this.sendProduct=(e,t)=>{};this.eventsToSend=[];this.callbacksToExecute=[];this.url=Kameleoon.Internals.runtime.DATA_URL;this.siteCode=Kameleoon.Internals.configuration.siteCode;Kameleoon.Utils.setInterval(this.processRequests.bind(this),500);Kameleoon.Utils.addEventListener(window,Kameleoon.Internals.runtime.beforeUnloadEvent,"Safari"===Kameleoon.Internals.runtime.Device.browser?()=>this.eventsToSend.length&&this.createErrorEventsQueue(this.obtainRequestBody(this.eventsToSend)):this.processRequests.bind(this))}addCallback(e){if(Kameleoon.Internals.runtime.Consent.hasGlobalConsent())e();else this.callbacksToExecute.push(e)}addRequest(e){this.eventsToSend.push(e);if("page"===e.eventType)this.processRequests()}createErrorEventsQueue(e){if(e)sessionStorage.setItem(this.errorKey,(sessionStorage.getItem(this.errorKey)||"")+e)}validateTrackingConsent(e,t){return"experiment"!==e&&"personalization"!==e||t.AB_TESTING&&"experiment"===e||t.PERSONALIZATION&&"personalization"===e}validateTrackingRequest(){const n=(!Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.enableRemoteVisitorSynchronization||Kameleoon.Internals.runtime.parameters["kameleoon-qa-mode"])&&!Kameleoon.Internals.runtime.proxyMode&&!Kameleoon.Internals.runtime.kameleoonSelectionIframeMode;return Kameleoon.Internals.runtime.Consent.hasGlobalConsent()&&n}}class Targeting{constructor(){this.segments={};this.obtainSegment=e=>e&&this.segments[e];this.checkTargetingCondition=(e,t,i)=>{let n;if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(!this.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,void 0))n={targeting:t.targeting,rescheduleTargeting:!1};else{let r=Kameleoon.Targeting["evaluate_"+t.type];let a;if(null!=r)a=r.bind(this)(t,e,i);else a=null;if(null==a)a={targeting:void 0,rescheduleTargeting:!1};let g=a.targeting;if(!0!==t.include)if(void 0===g){if(!0===a.excludedUndefinedIsTargeted)g=!0}else g=!g;n={targeting:g,rescheduleTargeting:this.checkIfTargetingMustBeComputed(g,a.rescheduleTargeting,void 0)};t.targeting=n.targeting;t.rescheduleTargeting=n.rescheduleTargeting;t.numberTargetingCheckings++}if(!0===n.targeting)n.weight=t.weight;else n.weight=0;return n};this.checkTargetingSegmentsTargeting=e=>{let t=[];for(let i=0,n=e.length;i<n;++i){let n=e[i];if(null==n.numberTargetingCheckings)n.numberTargetingCheckings=0;if(this.checkIfTargetingMustBeComputed(n.targeting,n.rescheduleTargeting||0==n.numberTargetingCheckings,!1))t.push(n)}e=t;for(let t=0,i=e.length;t<i;++t){let i=e[t];let n=this.checkTree(null,i?i.tree:null,!1,i);i.targeting=n.targeting;i.rescheduleTargeting=n.rescheduleTargeting;i.numberTargetingCheckings++}let i=[];for(let t=0,n=e.length;t<n;++t){let n=e[t];if(this.checkIfTargetingMustBeComputed(n.targeting,n.rescheduleTargeting,!1))i.push(n)}if(i.length>0){let e=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(e);this.processTargetingSegments(i)}),Kameleoon.Internals.runtime.domReady?Kameleoon.Internals.runtime.PAGE_LOADED_POLL_DELAY:Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY)}};this.checkTree=(e,t,i,n)=>{let r;if(null==t){r={targeting:!0,rescheduleTargeting:!1};if(i)r.weight=0}else{if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(!this.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,i)){r={targeting:t.targeting,rescheduleTargeting:!1};if(i)r.weight=t.weight}else{if(null!=t.targetingCondition)r=this.checkTargetingCondition(e,t.targetingCondition,n);else{let a=this.checkTree(e,t.leftChild,i,n);let g=Kameleoon.Internals.runtime.simulationMode||i;if(!g)switch(a.targeting){case!0:if(!t.orOperator)g=!0;break;case!1:if(t.orOperator)g=!0;break;case void 0:default:g=!0;break}let l=null;if(g)l=this.checkTree(e,t.rightChild,i,n);let s;switch(a.targeting){case!0:if(t.orOperator)s=!0;else switch(l.targeting){case!0:s=!0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}break;case!1:if(t.orOperator)switch(l.targeting){case!0:s=!0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}else s=!1;break;case void 0:default:if(t.orOperator)switch(l.targeting){case!0:s=!0;break;case!1:s=void 0;break;case void 0:default:s=void 0;break}else switch(l.targeting){case!0:s=void 0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}break}r={targeting:s,rescheduleTargeting:this.checkIfTargetingMustBeComputed(s,a.rescheduleTargeting||g&&l.rescheduleTargeting,i)};if(i){let e;if(t.orOperator)e=Math.max(a.weight,l.weight);else e=a.weight+l.weight;r.weight=e}}t.targeting=r.targeting;t.rescheduleTargeting=r.rescheduleTargeting;if(i)t.weight=r.weight}t.numberTargetingCheckings++}return r};this.computeDisplayableTree=e=>{let t=new Array;let i=new Array;this.computeDisplayableTreeFirstLevelAddIn(e,t,i);if(i.length>0){let e=new Array;let n=new Array;let r=this.createIterator(t);let a=this.createIterator(i);while(a.hasNext()){let t=a.next();if(Kameleoon.Utils.testEmptyMap(t.conditions)){if(a.hasNext())r.next()}else{n.push(t);if(a.hasNext())e.push(r.next())}}t=n.length>0?e.slice(0,n.length-1):e;i=n}return{firstLevelOrOperators:t,secondLevel:i}};this.computeDisplayableTreeFirstLevelAddIn=(e,t,i)=>{if(null!=e)if(null==e.targetingCondition)if(0==e.orGuiLevel){this.computeDisplayableTreeFirstLevelAddIn(e.leftChild,t,i);t.push(e.orOperator);this.computeDisplayableTreeFirstLevelAddIn(e.rightChild,t,i)}else i.push(this.computeDisplayableTreeSecondLevel(e));else i.push(this.computeDisplayableTreeSecondLevel(e))};this.computeDisplayableTreeSecondLevel=e=>{let t=new Array;let i=new Array;this.computeDisplayableTreeSecondLevelAddIn(e,t,i);if(i.length>0){let e=new Array;let n=new Array;let r=this.createIterator(t);let a=this.createIterator(i);while(a.hasNext()){let t=a.next();if(t.disabled){if(a.hasNext())r.next()}else{n.push(t);if(a.hasNext())e.push(r.next())}}t=n.length>0?e.slice(0,n.length-1):e;i=n}return{orOperators:t,conditions:i}};this.computeDisplayableTreeSecondLevelAddIn=(e,t,i)=>{if(null!=e)if(null==e.targetingCondition){this.computeDisplayableTreeSecondLevelAddIn(e.leftChild,t,i);t.push(e.orOperator);this.computeDisplayableTreeSecondLevelAddIn(e.rightChild,t,i)}else i.push(e.targetingCondition)};this.flattenTree=e=>{let t=(e,i)=>{if(null!=e)if(null!=e.targetingCondition)return!1===e.targetingCondition.targeting?["!",e.targetingCondition]:e.targetingCondition;else{let n=e.orOperator?"OR":"AND";let r=[t(e.leftChild,n),n,t(e.rightChild,n)];return"AND"==i&&"OR"==n?["(",r,")"]:r}};return Kameleoon.Utils.flatten(t(e,"OR"))};this.processAllTargetingSegments=()=>{const e=Kameleoon.Internals.runtime.targetingSegments||[];e.forEach((e=>{this.segments[e.id]=e}));this.processTargetingSegments(e)};this.processTargetingSegments=e=>{this.checkTargetingSegmentsTargeting(e);let t=[];for(let i=0,n=e.length;i<n;++i){let n=e[i];if(!0===n.targeting)t.push(n)}this.performSegmentsTracking(t)}}checkIfTargetingMustBeComputed(e,t,i){let n=!0===t&&(void 0===e||!1===e&&!0===i);return n}createIterator(e){let t=0;return{hasNext:function(){return t<e.length},next:function(){return e[t++]}}}performSegmentsTracking(e){for(let t=0,i=e.length;t<i;++t){let i=e[t];Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"SegmentTriggered",{segment:{id:i.id,name:i.name}});if(Kameleoon.Internals.configuration.useAudience||i.opportunityDetection||Kameleoon.Internals.runtime.mentalistRun&&(i.trackMentalistPrediction||i.mentalist))Kameleoon.Gatherer.track(VisitEvent_TargetingSegments,{id:i.id});if(Kameleoon.Internals.runtime.mentalistRun)if(i.trackMentalistPrediction)Kameleoon.Gatherer.track(VisitEvent_MentalistPredictionSegmentTargeting,{targetingSegmentId:i.id,trackMentalistPrediction:i.trackMentalistPrediction});}}}Targeting.prototype.evaluate_ACTIVE_SESSION=function(e){if(Kameleoon.Internals.runtime.gathererRun){let t=(new Date).getTime()-Kameleoon.Internals.runtime.Visitor.currentVisit.startDate;let r;switch(e.operator){case"EQUAL":r=t==e.time;break;case"LOWER":r=t<e.time;break;case"GREATER":r=t>e.time?!0:void 0;break;case"LOWER_OR_EQUAL":r=t<=e.time;break;case"GREATER_OR_EQUAL":r=t>=e.time?!0:void 0;break}return{targeting:r,rescheduleTargeting:void 0===r}}return null};Targeting.prototype.evaluate_PAGE_VIEWS=function(e){if(Kameleoon.Internals.runtime.gathererRun){let r;let t=Kameleoon.Internals.runtime.Visitor.currentVisit.obtainPageNumberViews();switch(e.operator){case"GREATER":r=t>e.value;break;case"LOWER":r=t<e.value;break;case"EQUAL":r=t==e.value;break}return{targeting:r,rescheduleTargeting:!1}}return null};Targeting.prototype.evaluate_ORIGIN_TYPE=function(e){let n=(e,n)=>{if(null!=n&&new RegExp(".*\\butm_medium=(email|newsletter)(\\b.*)?$").test(n))return"EMAIL";if(null!=n&&new RegExp(".*\\b(utm_medium=cpc|gclid)(\\b.*)?$").test(n))return"SEM";if(null==e||0==e.length)return"DIRECT";if(null!=e&&new RegExp("^https?://[^/]*(google|bing|yahoo|yandex|baidu)\\..*").test(e))return"SEO";if(null!=n&&null!=e)return"AFFILIATION";return null};if(Kameleoon.Internals.runtime.gathererRun){let t=n(Kameleoon.Internals.runtime.storedData.obtainField("Runtime","firstReferrerHref"),Kameleoon.Internals.runtime.Visitor.currentVisit.landingPageURL);return{targeting:null!=t&&e.value==t,rescheduleTargeting:!1}}return null};Targeting.prototype.evaluate_MOUSE_OUT=function(e){let n;if(Kameleoon.Internals.runtime.mouseOutEvent)n=!0;else if(!Kameleoon.Internals.runtime.mouseOutListener&&document.body){Kameleoon.Internals.runtime.mouseOutListener=!0;let e=Kameleoon.Internals.runtime.Visitor.currentVisit.Device.browser;if("Internet Explorer"==e)Kameleoon.Utils.addEventListener(document.body,"mouseout",(function(e){if(!e.relatedTarget)if(Math.abs(e.clientY-window.innerHeight)>e.clientY)Kameleoon.Internals.runtime.mouseOutEvent=!0}));else Kameleoon.Utils.addEventListener(document.body,"mouseleave",(function(e){if(e.clientY<0)Kameleoon.Internals.runtime.mouseOutEvent=!0}))}return{targeting:n,rescheduleTargeting:void 0===n}};Targeting.prototype.evaluate_NEW_VISITORS=function(e){if(Kameleoon.Internals.runtime.gathererRun){let t=1==Kameleoon.Internals.runtime.Visitor.visits.length;return{targeting:"NEW"==e.value?t:!t,rescheduleTargeting:!1}}return null};Targeting.prototype.evaluate_BROWSER=function(e){let r;const a=Kameleoon.Internals.runtime.Device;const s=a.browserVersion;const o=a.browser;switch(e.value){case"IE":case"EDGE":r="Internet Explorer"===o||"Microsoft Edge"===o;break;case"CHROME":r="Chrome"===o;break;case"FIREFOX":r="Firefox"===o;break;case"SAFARI":r="Safari"===o;break;case"OPERA":r="Opera"===o;break;default:r=!1;break}if(r&&null!=e.version)switch(e.operator){case"EQUAL":r=s==e.version;break;case"LOWER":r=s<e.version;break;case"GREATER":r=s>e.version;break}return{targeting:r,rescheduleTargeting:!1}};Targeting.prototype.evaluate_PAGE_URL=function(e){let t=new RegExp(Kameleoon.Utils.computeURLRegExpNoKameleoonParameters(e.value));let a;try{a=t.test(decodeURI(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL()))}catch(e){try{a=unescape?t.test(unescape(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())):!1}catch(e){a=!1}}return{targeting:a,rescheduleTargeting:!1}};Targeting.prototype.evaluate_DEVICE_TYPE=function(e){return{targeting:e.value==Kameleoon.Internals.runtime.Device.type.toLocaleUpperCase(),rescheduleTargeting:!1}};Targeting.prototype.evaluate_PAGE_TITLE=function(e){let t;if(Kameleoon.Internals.runtime.domReady||null!=document.title&&""!=document.title)t=new RegExp(e.value).test(document.title);return{targeting:t,rescheduleTargeting:void 0===t}};class Tracking{constructor(){this.timeBeforeSendTracking=20*60*1e3;this.checkAndSetKameleoonTrackingTime=(t,e)=>{const n=Kameleoon.Utils.secureSessionStorage("getItem","kameleoonAnalyticsTrackingTimes");const i=null==n?{}:JSON.parse(n);const a="Experiment-"+t;if(null==i[e]||null==i[e][a]||(new Date).getTime()>=i[e][a]+this.timeBeforeSendTracking){if(null==i[e])i[e]={};i[e][a]=(new Date).getTime();Kameleoon.Utils.secureSessionStorage("setItem","kameleoonAnalyticsTrackingTimes",JSON.stringify(i));return!0}return!1};this.obtainTealiumData=()=>{};this.processCustomIntegration=t=>{}}}Tracking.prototype.processSmartTag=function(e){let t=Kameleoon.Tracking.detectSmartTag(e);let a=!1;if(void 0==t||t.privacy&&t.privacy.getVisitorMode()&&"optin"!=t.privacy.getVisitorMode().name)a=!0;if(!a){if(null!=t.mvTesting)if(Kameleoon.Tracking.checkAndSetKameleoonTrackingTime(e.id,"SmartTag")){let a=e.name.replace(/\//gi,"-").replace(/#/g,"-").replace(/&/g,"-");let i=e.associatedVariation;let n=(0==i.id?"0":i.id.toString())+(e.mentalistEnabled?1e3:0);t.mvTesting.set({test:e.id+"["+a+"]",waveId:1,creation:n+"["+encodeURIComponent(i.name)+"]"});t.dispatch()}}else{let t=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearTimeout(t),Kameleoon.Tracking.processSmartTag.apply(Kameleoon.Tracking,[e])}),150)}return};Tracking.prototype.detectSmartTag=function(e){let t=e.smartTagTracking.smartTagPredefinedTagName;if(null!=t&&null!=window[t])return window[t];return};Tracking.prototype.processContentSquare=function(e){if(null!=window._uxa){if(Kameleoon.Tracking.checkAndSetKameleoonTrackingTime(e.id,"ContentSquare")){const n=e.experimentAction?"AB":"PERSO";window._uxa.push(["trackDynamicVariable",{key:n+"_Kameleoon_"+e.id,value:(0===e.associatedVariation.id?"reference":e.associatedVariation.id).toString()}])}}else Kameleoon.Utils.setTimeout((function(){Kameleoon.Tracking.processContentSquare.apply(Kameleoon.Tracking,[e])}),150)};Tracking.prototype.processPiano=function(n){const e=n.pianoTracking.predefinedTagName&&window[n.pianoTracking.predefinedTagName];const i=e&&e.version||window.pa&&window.pa.cfg&&window.pa.cfg.getConfiguration("version");const o=window.pa&&window.pa.privacy&&"optin"==window.pa.privacy.getMode();const a=window.pa&&window.pa.consent&&"opt-in"==window.pa.consent.getMode();const t=window.pa&&window.pa.consent?a:o;if(i&&(t||e&&e.privacy&&e.privacy.getVisitorMode()&&"optin"==e.privacy.getVisitorMode().name)){const o=n.name.replace(/[\/#&]/gi,"-");const a={mv_creation:n.associatedVariation.id+"["+n.associatedVariation.name+"]",mv_test:n.id+"["+o+"]",mv_wave:1};if(i<"6")e.events&&e.events.send&&e.events.send("mv_test.display",a);else window.pa&&window.pa.sendEvent&&window.pa.sendEvent("mv_test.display",a)}else Kameleoon.Utils.setTimeout((function(){Kameleoon.Tracking.processPiano.apply(Kameleoon.Tracking,[n])}),150)};class Variation{constructor(e){this.getAction=()=>Kameleoon.Internals.runtime.Campaigns.obtainCampaign(this.actionId);for(const t in e)this[t]=e[t]}applyJavascriptCode(e){if(this.javaScriptCode&&this.javaScriptCode.code&&(null==this.javaScriptCode.evaluated||e)){this.javaScriptCode.evaluated=!0;return Kameleoon.Utils.runProtectedScript(this.javaScriptCode.code,"kameleoonVariationJavaScriptCode-"+this.id+".js")}return null}preProcessRedirect(e){}process(){const e=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(this.actionId);if(!this.styleSheetAdded){this.styleSheetAdded=!0;Kameleoon.Utils.addCSSStyleSheet(this.css,e,null)}if(this.javaScriptCode&&!this.permanentRefreshActive)if(!this.javaScriptCode.afterDOMReady)this.applyJavascriptCode(!1);else if(!this.permanentRefreshActive)Kameleoon.Utils.domReady((()=>{this.applyJavascriptCode(!1)}));if(this.elementSets&&(!e||e.targeting))this.elementSets.forEach((e=>{e.evaluated=!0;Kameleoon.ElementSet.processElementSet(e,this,!1,this.permanentRefreshActive,this.editionMode)}));const t="enginePollerForVariation"+this.id;if(Kameleoon.Internals.runtime[t]&&!this.permanentRefreshActive){if(Kameleoon.Internals.runtime.cantUseMutationObserver)Kameleoon.Utils.clearInterval(Kameleoon.Internals.runtime[t]);Kameleoon.Internals.runtime[t]=null}if(!Kameleoon.Internals.runtime[t]&&!Kameleoon.Internals.runtime.editorMode&&!Kameleoon.Internals.runtime.kameleoonSelectionIframeMode){this.permanentRefreshActive=!0;Kameleoon.Internals.runtime.listenVariations.push(this);Kameleoon.Internals.runtime[t]=!0;if(Kameleoon.Internals.runtime.cantUseMutationObserver)Kameleoon.Internals.runtime[t]=Kameleoon.Utils.setInterval((()=>{this.process()}),10)}}processReplaceData(e){}}class Visit{constructor(t){this.addActionTriggered=(t,e)=>{const i=e?"experimentsTriggered":"personalizationsTriggered";const s=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer",i,{});s[t.toString()]=!0;Kameleoon.Internals.runtime.storedData.saveField("Gatherer",i,s);};this.addActivity=(t,e)=>{if(e)this.lastActivityDate=t};this.addAdBlocker=()=>{this.Device.adBlocker=!0};this.addConversions=(t,e,i,s)=>{let n=s?-1:1;e*=n;i*=n;let a=this.conversions[t];let o=a?a.count:0;let r=a?a.revenue:0;let l=o+e;let u=r+i;if(l>0)if(u>=0)this.conversions[t]={count:l,revenue:u};else delete this.conversions[t];else delete this.conversions[t]};this.addCustomData=(t,e,i)=>{if(Kameleoon.Utils.testEmptyMap(e)){if(i)delete this.customData[t]}else{if(i||null==this.customData[t])this.customData[t]={};for(let i in e)this.customData[t][i]=(this.customData[t][i]||0)+e[i]}};this.addExperiment=(t,e,i)=>{if(null===i)return;if(void 0===this.ExperimentActivations[e])this.ExperimentActivations[e]={associatedVariationID:i,times:[]};this.ExperimentActivations[e].times.push(t);if(-1!=e){let t=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e,!0);let i=t?t.attributionWindow:Visitor.INFLUENCE_DELAY;if(i>0)this.ExperimentActivations[e].influence=i}};this.addGeolocation=t=>{this.Geolocation=t};this.addNumberClicks=t=>{if(t>0)this.clicks+=t};this.addPage=(t,e,i,s)=>{this.addActivity(t,!0);let n=s.filter((t=>null!=t));this.pages.push({timestamp:t,keyPagesMatched:i,referrersMatched:n.length>0?n:[]});let a=this.pageURLsVisited[e];if(null==a){a=[];this.pageURLsVisited[e]=a}a.push(t);for(let t in this.productEansLastPage)this.productEansAllButLastPages[t]=!0;this.productEansLastPage={}};this.addPersonalization=(t,e,i)=>{};this.addProduct=t=>{this.productEansLastPage[t]=!0};this.addTargetingSegment=(t,e)=>{let i=this.activatedSegments[e];if(null==i){i=[];this.activatedSegments[e]=i}i.push(t);};this.addWeather=t=>{this.Weather=t};this.clearCustomDataPage=()=>{for(let t in Kameleoon.Internals.runtime.Gatherer.configuration.customData){let e=Kameleoon.Internals.runtime.Gatherer.configuration.customData[t];if("PAGE"==e.scope)delete this.customData[t]}};this.computeActionNumberActivations=(t,e,i,s)=>{if(null==s[t])return 0;return this.computeObjectNumberPresence(e,i,s[t].times)};this.computeObjectNumberPresence=(t,e,i)=>{let s=0;for(let n=0,a=i.length;n<a;++n){let a=i[n];if((null==t||a>=t)&&(null==e||a<=e))s++}return s};this.isVisitFinished=()=>this.lastActivityDate<(new Date).getTime()-Kameleoon.Internals.runtime.Gatherer.configuration.maxVisitIdleDuration;this.obtainKeyPageIsVisited=t=>{let e=this.pages.filter((e=>-1!=e.keyPagesMatched.indexOf(t)));return e.length>0};this.obtainMeanPageDuration=()=>{let t=new Date;let e=this.obtainTimesStartedPages();let i=OnlineMeanAndDeviation.createFromDifferences(e,!1,!0,!0);i.update([t.getTime()-e[e.length-1]]);return i.mean[0];};this.obtainNumberConversions=t=>{let e=this.conversions[t];return null==e?0:e.count};this.obtainPageNumberViews=(t,e,i,s)=>{let n=0;for(let a in this.pageURLsVisited)if(null!=a){let o=Kameleoon.Utils.computeRelativeURL(a);if((null==t||t.test(a)||t.test(o))&&(null==e||!e.test(a)&&!e.test(o)))n+=this.computeObjectNumberPresence(i,s,this.pageURLsVisited[a])}return n};this.obtainTimesStartedPages=()=>{let t=[];for(let e in this.pageURLsVisited)t.concat(this.pageURLsVisited[e]);return t.sort()};this.obtainPersonalizationNumberActivations=(t,e,i)=>this.computeActionNumberActivations(t,e,i,this.PersonalizationActivations);this.obtainReferrerIsPresent=t=>{let e=null==t?null:t+1;let i=this.pages.filter((t=>-1!=t.referrersMatched.indexOf(e)));return i.length>0};this.visitNumber=t.visitNumber||0;this.landingPageURL=t.landingPageURL||null;this.productEansAllButLastPages=t.productEansAllButLastPages||{};this.productEansLastPage=t.productEansLastPage||{};this.startDate=t.startDate||0;this.pageURLsVisited=t.pageURLsVisited||{};this.activatedSegments=t.activatedSegments||{};this.visitorCode=t.visitorCode||"";this.customData=t.customData||{};this.clicks=t.clicks||0;this.lastActivityDate=t.lastActivityDate||this.startDate;let e=t.Device||{};this.Device={adBlocker:e.adBlocker||!1,browser:e.browser||"Other",browserVersion:e.browserVersion||null,os:e.os||"Other",screenHeight:e.screenHeight||null,screenWidth:e.screenWidth||null,timeZone:e.timeZone||"UTC",type:e.type?e.type.toLocaleUpperCase():null,windowHeight:e.windowHeight||null,windowWidth:e.windowWidth||null};let i=t.Geolocation||{};this.Geolocation={city:i.city||null,country:i.country||null,latitude:i.latitude||null,longitude:i.longitude||null,postalCode:i.postalCode||null,region:i.region||null};let s=t.Weather||{};this.Weather={conditionCode:s.conditionCode||null,conditionDescription:s.conditionDescription||null,cloudiness:s.cloudiness||null,humidity:s.humidity||null,pressure:s.pressure||null,sunrise:s.sunrise||null,sunset:s.sunset||null,temperature:s.temperature||null,windSpeed:s.windSpeed||null};this.conversions=t.conversions||{};this.ExperimentActivations=t.ExperimentActivations||{};this.PersonalizationActivations=t.PersonalizationActivations||{};this.pages=t.pages||[]}obtainExperimentNumberActivations(t,e,i){return this.computeActionNumberActivations(t,e,i,this.ExperimentActivations)}}class Visitor{constructor(){this.addVisit=t=>{this.visits.push(t);this.currentVisit=t;this.totalVisits++;if(null==this.timeStartedEldestVisit)this.timeStartedEldestVisit=t.startDate;const e=this.visits.length;const i=Math.max(1,Kameleoon.Internals.configuration.maxNumberLocalVisits);if(e>i)this.visits=this.visits.slice(e-i)};this.obtainKeyPageIsVisited=t=>{for(let e=0,i=this.visits.length;e<i;++e)if(this.visits[e].obtainKeyPageIsVisited(t))return!0;return!1};this.obtainReferrerIsPresent=t=>{for(let e=0,i=this.visits.length;e<i;++e)if(this.visits[e].obtainReferrerIsPresent(t))return!0;return!1};this.obtainNumberConversions=t=>{let e=0;for(let i=this.visits.length-1;i>=0;--i)e+=this.visits[i].obtainNumberConversions(t);return e};this.obtainActionNumberActivations=(t,e,i,s,o,n,r,a)=>{const l=a?"obtainExperimentNumberActivations":"obtainPersonalizationNumberActivations";const m=Kameleoon.Internals.runtime.Visitor.visits.length;let c=0;if(m>0){if(o){const e=Kameleoon.Internals.runtime.Visitor.visits[m-1][l](t,i,s);c+=r?e>0?1:0:e}if(n)for(let e=0,o=m-1;e<o;++e){const o=this.visits[e][l](t,i,s);c+=r?o>0?1:0:o}}return c};this.obtainPageNumberViews=(t,e,i,s,o,n)=>{const r=this.visits.length;let a=0;if(r>0){if(o)a+=this.visits[r-1].obtainPageNumberViews(t,e,i,s);if(n)for(let o=0,n=r-1;o<n;++o)a+=this.visits[o].obtainPageNumberViews(t,e,i,s)}return a};this.obtainTimeSincePreviousVisit=()=>{let t=0;if(this.visits.length>1){t=this.currentVisit.startDate-this.visits.slice(-2)[0].lastActivityDate;t=Math.max(t,Kameleoon.Internals.runtime.Gatherer.configuration.maxVisitIdleDuration)}return t};this.obtainVisitorCode=t=>{let e=!1;let i;let s=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE");const o=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","timeNextSynchronization",null);if(s)s=s.replace("_js_","");i=s;if(Kameleoon.Internals.configuration.useWideDomainSupport||Kameleoon.Internals.configuration.useVisitorCodeInLocalStorage){const t=Kameleoon.Internals.runtime.incomingStoredData?Kameleoon.Internals.runtime.incomingStoredData.kameleoonVisitorCode:Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(t)i=t}if(t||null==i){i=Kameleoon.Utils.obtainRandomString(Visitor.VISITOR_CODE_LENGTH,Analyst.CODE_ALPHABET);e=!0}Kameleoon.Utils.saveVisitorCode(i,null==o);this.visitorCode=i;return e};this.obtainVisitorFromStoredData=()=>Kameleoon.Internals.runtime.storedData.Visitor;this.saveToStoredData=()=>{this.saveFieldToStoredData("visits",this.visits);this.saveFieldToStoredData("totalVisits",this.totalVisits);this.saveFieldToStoredData("timeStartedEldestVisit",this.timeStartedEldestVisit)};this.setVisitorCode=t=>{if(this.visitorCode!=t){Kameleoon.Internals.runtime.newVisitorCode=!0;Kameleoon.Utils.saveVisitorCode(t);this.visitorCode=t;Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode=t;if(this.visits)this.visits.forEach((e=>{e.visitorCode=t}));Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0).forEach((t=>{if(void 0!==t.registeredVariationId){t.registeredVariationId=void 0;t.performVariationAssignment(!0)}}));this.saveToStoredData();Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData)}};this.updateFromStoredData=(t,e,i)=>{const s=this.obtainVisitorFromStoredData();const o=s.visits;if(!this.visitorCode){const t=this.obtainVisitorCode(i);if(t)i=!0}if(o){const t=o.slice(-1)[0].visitorCode;if(t!=this.visitorCode){const e=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(e==t||!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){this.visitorCode=t;try{delete Kameleoon.Internals.runtime.localDataMap.COOKIE.kameleoonVisitorCode;delete Kameleoon.Internals.runtime.localDataMap.LS.kameleoonVisitorCode}catch(t){}}else if(e==this.visitorCode)i=!0}}if(i||t){e=!0;if(i)this.totalVisits=0}this.visits=[];if(!i&&o){o.forEach((t=>{this.addVisit(new Visit(t))}));this.totalVisits=s.totalVisits;this.timeStartedEldestVisit=s.timeStartedEldestVisit}let n=!1;if(e||!this.currentVisit||this.currentVisit.isVisitFinished()){const{Device:t,storedData:e}=Kameleoon.Internals.runtime;const s=e.obtainField("Gatherer","startsOfVisitForCurrentPage");e.saveField("Gatherer","startsOfVisitForCurrentPage",s+1);Kameleoon.Internals.runtime.Gatherer.startOfVisit=!0;e.resetForStartOfVisit();e.saveField("Runtime","firstReferrerHref",Kameleoon.Gatherer.Referrer.obtainCorrected(!0)||null);e.saveField("Runtime","firstReferrersIndices",Kameleoon.Gatherer.Referrer.obtainIndexes(!0)||[null]);e.saveField("Runtime","landingKeyPagesIndices",Kameleoon.Gatherer.KeyPage.obtainIndexes()||[null]);let o;if(!this.currentVisit||i)o=0;else o=this.currentVisit.visitNumber+1;this.addVisit(new Visit({visitorCode:this.visitorCode,startDate:(new Date).getTime(),visitNumber:o,landingPageURL:Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL(),Device:{browser:Kameleoon.Gatherer.Browser.obtain(),browserVersion:t.browserVersion,os:Kameleoon.Gatherer.OperatingSystem.obtain(),screenHeight:t.screenHeight,screenWidth:t.screenWidth,timeZone:Kameleoon.Gatherer.TimeZone.obtainId(),type:t.type,windowHeight:t.windowHeight,windowWidth:t.windowWidth}}));n=!0}this.saveToStoredData();Kameleoon.Internals.runtime.storedData.save(n)};this.getCustomDataVisitor=()=>{const t={};const e=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const i in Kameleoon.Internals.runtime.Visitor.currentVisit.customData){const s=e[i];if(null!=s&&!s.disabled)if("VISITOR"==s.scope){const e=Kameleoon.Internals.runtime.Visitor.currentVisit.customData[i];t[i]=e}}return t};this.registerVisitsRequestSuccess=t=>{};this.compareCurrentVisitFromServer=t=>{};this.performRemoteVisitorSynchronization=()=>{};this.obtainProductData=(t,e,i,s)=>{};this.obtainIdentifierValue=()=>{let t=null;return t||this.visitorCode};this.visits=[];this.currentVisit=null;this.totalVisits=0;this.updateFromStoredData(!1);Object.defineProperty(this,"customData",{enumerable:!0,get:()=>this.getCustomDataVisitor()})}saveFieldToStoredData(t,e){Kameleoon.Internals.runtime.storedData.Visitor[t]=e}remoteSynchronisation(t,e,i,s){}}Visitor.VISITOR_CODE_LENGTH=16;Visitor.INFLUENCE_DELAY=1e3*60*60*24*7;try{window.Kameleoon=new KameleoonEngine}catch(o){console.log(o)}
Kameleoon.Internals = {"configuration":{"API_HOST_NAME":"api","APP_HOST_NAME":"app","BACK_OFFICE_HOST_NAME":"old","EDITOR_SRC":"src/main.ts","STATIC_IMAGES_URL":"//static.kameleoon.com/js/editor/source/images/","BASE_EDITOR_URL":"//static.kameleoon.com/js/editor/","NEW_EDITOR_URL":"//graphical-editor.kameleoon.com","EDITOR_HOST_NAME":"editor","DOMAIN":"kameleoon.com","WIDE_DOMAIN":"kameleoon.eu","GUI_ESTIMATED_LOADING_TIME":3000,"IMAGE_PATH":"https://p5ywyxm1ud.kameleoon.eu/images/","PROXY_HOST_NAME":"proxy","QOOXDOO_ESTIMATED_LOADING_TIME":2000,"SERVER_CALL_ESTIMATED_LOADING_TIME":500,"STATIC_DIRECT_HOST_NAME":"static-direct","STATIC_HOST_NAME":"static","environment":"PRODUCTION","staticURL":"//static.kameleoon.eu/","maxNumberLocalVisits":25,"memberCode":"0","siteCode":"p5ywyxm1ud","abtestConsent":"REQUIRED","abtestConsentOptout":"RUN","beforeAbtestConsent":"PARTIALLY","beforePersonalizationConsent":"PARTIALLY","personalizationConsent":"REQUIRED","personalizationConsentOptout":"RUN","personalizationsDeviation":0.9,"experiments":[{"id":89219,"name":"[FDU] [VIS] Bug fixes nouvelle FP 2019","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1637278288000,"dateStatusModified":1567712136000,"goals":[148747],"deviation":{"0":0,"274252":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":274252,"deviation":1}],"targetingSegmentId":114312,"attributionWindow":0,"winningVariationId":274252,"kameleoonTracking":{"mainGoalId":148747}},{"id":89242,"name":"[FDU] [GLOBAL] Regroupement des bugs fix sur le site desktop","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632384000,"dateStatusModified":1568283350000,"goals":[148747],"deviation":{"0":0,"274423":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274423,"deviation":1}],"targetingSegmentId":116297,"attributionWindow":0,"winningVariationId":274423,"kameleoonTracking":{"mainGoalId":148747}},{"id":89265,"name":"[FDU] [GLOBAL] Bug fix sur le site mobile","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632358000,"dateStatusModified":1568307099000,"goals":[148747,168003],"deviation":{"0":0,"274490":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274490,"deviation":1}],"targetingSegmentId":116253,"attributionWindow":0,"winningVariationId":274490,"kameleoonTracking":{"mainGoalId":168003}},{"id":89279,"name":"[FDU] [BUY] Suppression bannière recrutement","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1636369213000,"dateStatusModified":1568122927000,"goals":[148747],"deviation":{"0":0,"274540":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274540,"deviation":1}],"targetingSegmentId":115769,"attributionWindow":0,"winningVariationId":274540,"kameleoonTracking":{"mainGoalId":148747}},{"id":89281,"name":"[FDU] [BUY] Affichage uniquement de l'ID de l'ITEM pour le BO","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1680799147000,"dateStatusModified":1568123233000,"goals":[148747],"deviation":{"0":0,"274542":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274542,"deviation":1}],"targetingSegmentId":115770,"attributionWindow":0,"winningVariationId":274542,"kameleoonTracking":{"mainGoalId":148747}},{"id":89296,"name":"[FDU] [BUY] Modification de la page de désabonnement aux newsletters CSS version","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632326000,"dateStatusModified":1568123364000,"goals":[148747],"deviation":{"0":0,"274600":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274600,"deviation":1}],"targetingSegmentId":115793,"attributionWindow":0,"winningVariationId":274600,"kameleoonTracking":{"mainGoalId":148747}},{"id":89299,"name":"[FDU] [VIS] Couleur des liens home univers menu XXL","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634631948000,"dateStatusModified":1568290044000,"goals":[168003],"deviation":{"0":0,"274604":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"VARIANTE 1","id":274604,"deviation":1}],"targetingSegmentId":115796,"attributionWindow":0,"winningVariationId":274604,"kameleoonTracking":{"mainGoalId":168003}},{"id":89315,"name":"[SRO] [OTHER] Nouveau formulaire de réclamation V2.1 Dekstop","baseURL":"http://abo-dev.priceminister.lan:8080/purchase?action=buyitem&case=3&from=4&itemid=652225733&purchaseid=414900437","experimentAction":true,"technical":true,"forcedTechnical":false,"dateModified":1669909873000,"dateStatusModified":1568304380000,"goals":[148747],"deviation":{"0":0,"274653":1,"792168":0},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274653,"deviation":1},{"name":"Variation 2","id":792168,"deviation":0}],"targetingSegmentId":115813,"attributionWindow":0,"winningVariationId":274653,"kameleoonTracking":{"mainGoalId":148747}},{"id":89350,"name":"[FDU] [C2C] Ajout de monétisation 728x90 (ATF) sur la page confirmation vente desktop","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632452000,"dateStatusModified":1568293737000,"goals":[148747],"deviation":{"0":0,"274802":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274802,"deviation":1}],"targetingSegmentId":115837,"attributionWindow":0,"winningVariationId":274802,"kameleoonTracking":{"mainGoalId":148747}},{"id":89353,"name":"[FDU] [BUY] Gestion cookie user ID pour Club R Everywhere (CREW)","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1666080578000,"dateStatusModified":1568297281000,"goals":[148747],"deviation":{"0":0,"274806":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274806,"deviation":1}],"targetingSegmentId":115839,"attributionWindow":0,"winningVariationId":274806,"kameleoonTracking":{"mainGoalId":148747}},{"id":89359,"name":"[LCR] [B2C] Affichage adresse garantie vendeur pro","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1669634620000,"dateStatusModified":1569340968000,"goals":[148747],"deviation":{"0":0,"274814":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":274814,"deviation":1}],"targetingSegmentId":115844,"attributionWindow":0,"winningVariationId":274814,"kameleoonTracking":{"mainGoalId":148747}},{"id":89517,"name":"[MFP] [VIS] Avatar PRO sur les FP du site","baseURL":"https://fr.shopping.rakuten.com/mfp/5694350/nokia-body-balance?pid=2116363765","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1732198118000,"dateStatusModified":1574342805000,"goals":[148747],"deviation":{"0":0,"275501":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"VARIANTE 1","id":275501,"deviation":1}],"targetingSegmentId":115773,"attributionWindow":0,"winningVariationId":275501,"kameleoonTracking":{"mainGoalId":148747}},{"id":89770,"name":"[FDU] [VIS] Test nouvelle UI Rakuten","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632397000,"dateStatusModified":1568307305000,"goals":[148747],"deviation":{"0":0,"277347":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":277347,"deviation":1}],"targetingSegmentId":116205,"attributionWindow":0,"winningVariationId":277347,"kameleoonTracking":{"mainGoalId":148747}},{"id":89773,"name":"[FDU] [VIS] Entrée spéciale menu burger","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632348000,"dateStatusModified":1568307779000,"goals":[148747],"deviation":{"0":0,"277354":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":277354,"deviation":1}],"targetingSegmentId":116207,"attributionWindow":0,"winningVariationId":277354,"kameleoonTracking":{"mainGoalId":148747}},{"id":89826,"name":"[FDU] [B2C] Pré-cochage du click & collect page livraison","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634631584000,"dateStatusModified":1568306929000,"goals":[148747,168003],"deviation":{"0":0,"277670":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":277670,"deviation":1}],"targetingSegmentId":116240,"attributionWindow":0,"winningVariationId":277670,"kameleoonTracking":{"mainGoalId":168003}},{"id":89827,"name":"[FDU] [DIS] Produits du CREW dans la NAV & search","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632213000,"dateStatusModified":1579279811000,"goals":[148747,168003],"deviation":{"0":0,"277674":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":277674,"deviation":1}],"targetingSegmentId":116241,"attributionWindow":0,"winningVariationId":277674,"kameleoonTracking":{"mainGoalId":168003}},{"id":89830,"name":"[SRO] [OTHER] Nouveau formulaire de réclamation V2.1 Mobile","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632373000,"dateStatusModified":1568305654000,"goals":[148747,168003],"deviation":{"0":0,"277685":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":277685,"deviation":1}],"targetingSegmentId":116243,"attributionWindow":0,"winningVariationId":277685,"kameleoonTracking":{"mainGoalId":168003}},{"id":95226,"name":"[MFO] [BUY] NPS page user","baseURL":"https://fr.shopping.rakuten.com/user","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1647599663000,"dateStatusModified":1574762417000,"goals":[168003],"deviation":{"0":0,"319502":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":319502,"deviation":1}],"targetingSegmentId":120227,"attributionWindow":0,"winningVariationId":319502,"kameleoonTracking":{"mainGoalId":168003}},{"id":95635,"name":"[FDU] [BUY] Promotion moyen de paiement","baseURL":"https://fr.shopping.rakuten.com/offer/buy/1633076114/uomo-100ml-edt.html","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1692870430000,"dateStatusModified":1574848641000,"goals":[168004,168003],"deviation":{"0":0,"322556":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":322556,"deviation":1}],"targetingSegmentId":120248,"attributionWindow":0,"winningVariationId":322556,"kameleoonTracking":{"mainGoalId":168003}},{"id":96286,"name":"[FDU] [VIS] Global merchandising campaigns full site","baseURL":"https://fr.shopping.rakuten.com/mfp/9623010/apple-iphone-15-pro-max?pid=11517874675","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1732202976000,"dateStatusModified":1575395647000,"goals":[168003],"deviation":{"0":0,"327705":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"VARIANTE 1","id":327705,"deviation":1}],"targetingSegmentId":117879,"attributionWindow":0,"winningVariationId":327705,"kameleoonTracking":{"mainGoalId":168003}},{"id":96797,"name":"[FDU] [B2C] Cacher le en 2h du Click and collect TheKase","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1699362071000,"dateStatusModified":1583868034000,"goals":[168003],"deviation":{"0":0,"332171":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":332171,"deviation":1}],"targetingSegmentId":125358,"attributionWindow":0,"winningVariationId":332171,"kameleoonTracking":{"mainGoalId":168003}},{"id":97787,"name":"[FDU] [VIS] Super PRO boutique dans la search","baseURL":"https://fr.shopping.rakuten.com/s/test","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632412000,"dateStatusModified":1583495571000,"goals":[168003],"deviation":{"0":0,"340042":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":340042,"deviation":1}],"targetingSegmentId":121864,"attributionWindow":0,"winningVariationId":340042,"kameleoonTracking":{"mainGoalId":168003}},{"id":98846,"name":"[FDU] [BUY] NPS sur la page confirmation de commande","baseURL":"https://fr.shopping.rakuten.com/checkout?action=paymentsuccess&purchaseId=312288933","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1647609332000,"dateStatusModified":1579597990000,"goals":[168003],"deviation":{"0":0,"346721":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":346721,"deviation":1}],"targetingSegmentId":122643,"attributionWindow":0,"winningVariationId":346721,"kameleoonTracking":{"mainGoalId":168003}},{"id":100362,"name":"[FDU] [GLOBAL] Global bug fixes tout devices","baseURL":"https://fr.shopping.rakuten.com/user","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1642606883000,"dateStatusModified":1581414786000,"goals":[168003],"deviation":{"0":0,"356234":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":356234,"deviation":1}],"targetingSegmentId":170408,"attributionWindow":0,"winningVariationId":356234,"kameleoonTracking":{"mainGoalId":168003}},{"id":101343,"name":"[FDU] [VIS] Récupération de feedbacks utilisateur","baseURL":"https://fr.shopping.rakuten.com/offer/buy/4679136027/cpl4679136028_ALL/chaussure-nike-p-6000-gris.html","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632115000,"dateStatusModified":1582563220000,"goals":[168003],"deviation":{"0":0,"364057":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":364057,"deviation":1}],"targetingSegmentId":130057,"attributionWindow":0,"winningVariationId":364057,"kameleoonTracking":{"mainGoalId":168003}},{"id":102055,"name":"[FDU] [BUY] A/B test couleur wording garanties sur panier mobile","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632479000,"dateStatusModified":1583330409000,"goals":[168004],"deviation":{"0":0.5,"370236":0.5},"variations":[{"name":"Reference","id":0,"deviation":0.5},{"name":"Variante 1","id":370236,"deviation":0.5}],"targetingSegmentId":125060,"attributionWindow":0,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":168004}},{"id":110477,"name":"[NCH] [VIS] Cacher la geoloc présente dans la search bar","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1636551984000,"dateStatusModified":1594990778000,"goals":[168004],"deviation":{"0":0,"425628":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":425628,"deviation":1}],"targetingSegmentId":132417,"attributionWindow":0,"winningVariationId":425628,"kameleoonTracking":{"mainGoalId":168004}},{"id":113052,"name":"[CGE] [BUY] Banner Parrainage / Espace Mon Compte","baseURL":"https://fr.shopping.rakuten.com/user","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1647599771000,"dateStatusModified":1604322511000,"goals":[148747],"deviation":{"0":0,"445128":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":445128,"deviation":1}],"targetingSegmentId":139505,"attributionWindow":0,"winningVariationId":445128,"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":148747}},{"id":116674,"name":"[KUJ] [VIS] Fix SuperBoutique Banner","baseURL":"https://fr.shopping.rakuten.com","experimentAction":true,"javaScriptCode":"var elem=document.querySelector(\"body.shopPro\");if(elem){var siteBody=document.querySelector(\"#siteBody\");siteBody&&siteBody.style.setProperty(\"padding\",\"118px 0 0 0\",\"important\")}","technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632157000,"dateStatusModified":1612357053000,"goals":[168003],"deviation":{"0":0,"469757":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":469757,"deviation":1}],"targetingSegmentId":138654,"attributionWindow":0,"winningVariationId":469757,"kameleoonTracking":{"mainGoalId":168003}},{"id":120050,"name":"[FDU] [VIS] Visibilité CREW top header","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1733211055000,"dateStatusModified":1646839270000,"goals":[168003],"deviation":{"0":0,"493895":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":493895,"deviation":1}],"targetingSegmentId":151518,"attributionWindow":0,"winningVariationId":493895,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":168003}},{"id":123278,"name":"[FDU] [BUY] Remplacement Priceminister sur ancienne aide en ligne","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632207000,"dateStatusModified":1611314190000,"goals":[168003],"deviation":{"0":0,"514877":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":514877,"deviation":1}],"targetingSegmentId":147439,"attributionWindow":0,"winningVariationId":514877,"kameleoonTracking":{"mainGoalId":168003}},{"id":124146,"name":"[FDU] [VIS] Fix CSS boutiques PRO","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632199000,"dateStatusModified":1612358504000,"goals":[168003],"deviation":{"0":0,"520779":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":520779,"deviation":1}],"targetingSegmentId":148266,"attributionWindow":0,"winningVariationId":520779,"kameleoonTracking":{"mainGoalId":168003}},{"id":128082,"name":"[FDU] [B2C] Changements wordings dans le header tooltip vendre","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632101000,"dateStatusModified":1617028739000,"goals":[168003],"deviation":{"0":0,"551299":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":551299,"deviation":1}],"targetingSegmentId":152099,"attributionWindow":0,"winningVariationId":551299,"kameleoonTracking":{"mainGoalId":168003}},{"id":129711,"name":"[FDU] [MERCH] Test merch sur les blocs MAD","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632123000,"dateStatusModified":1619078779000,"goals":[168003],"deviation":{"0":0,"563906":0.33,"563911":0.33,"563912":0.33},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":563906,"deviation":0.33},{"name":"Variation 2","id":563911,"deviation":0.33},{"name":"Variation 3","id":563912,"deviation":0.33}],"targetingSegmentId":153812,"attributionWindow":0,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":168003}},{"id":132109,"name":"[FDU] [VIS] Correctif suppression bannière mobile sur desktop","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632086000,"dateStatusModified":1622037191000,"goals":[168003],"deviation":{"0":0,"580729":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":580729,"deviation":1}],"targetingSegmentId":156219,"attributionWindow":0,"winningVariationId":580729,"kameleoonTracking":{"mainGoalId":168003}},{"id":136962,"name":"[RMB] [VIS] Refurbish hidden description garanty","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632068000,"dateStatusModified":1627993944000,"goals":[168003],"deviation":{"0":0,"624205":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":624205,"deviation":1}],"targetingSegmentId":162102,"attributionWindow":0,"winningVariationId":624205,"kameleoonTracking":{"mainGoalId":168003}},{"id":137181,"name":"[RMB] [VIS] Mobile Refurbish hidden description","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634632074000,"dateStatusModified":1627993032000,"goals":[168004],"deviation":{"0":0,"625885":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":625885,"deviation":1}],"targetingSegmentId":162102,"attributionWindow":0,"winningVariationId":625885,"kameleoonTracking":{"mainGoalId":168004}},{"id":137690,"name":"[FDU] [VIS] Plus de visibilité reconditionné sur la fiche produit desktop","baseURL":"https://fr.shopping.rakuten.com/mfp/6618739/apple-iphone-12?pid=6495078412","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634631780000,"dateStatusModified":1628600905000,"goals":[168003],"deviation":{"0":0,"629414":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":629414,"deviation":1}],"targetingSegmentId":162314,"attributionWindow":0,"winningVariationId":629414,"kameleoonTracking":{"mainGoalId":168003}},{"id":141997,"name":"[FDU] [VIS] Mesure du trafic Fasterized","baseURL":"*","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1634631940000,"dateStatusModified":1633687916000,"goals":[168003],"deviation":{"0":0,"668874":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":668874,"deviation":1}],"targetingSegmentId":166943,"attributionWindow":0,"winningVariationId":668874,"kameleoonTracking":{"mainGoalId":168003}},{"id":143397,"name":"[FDU] [BUY] Modification structure mon compte pour ajout publicité Hypernova","baseURL":"https://bo5.rakqa.fr/user","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1636363223000,"dateStatusModified":1635169230000,"goals":[168003],"deviation":{"0":0,"682096":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":682096,"deviation":1}],"targetingSegmentId":168653,"attributionWindow":0,"winningVariationId":682096,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":143415,"name":"[FDU] [VIS] Script file d'attente virtuelle","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1635173964000,"dateStatusModified":1635173106000,"goals":[168003],"deviation":{"0":0,"682215":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":682215,"deviation":1}],"targetingSegmentId":168666,"attributionWindow":0,"winningVariationId":682215,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":143626,"name":"[FDU] [VIS] Merchandising campaigns (overlay)","baseURL":"https://fr.shopping.rakuten.com","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1727972567000,"dateStatusModified":1635354182000,"goals":[168003,168004],"deviation":{"0":0.5,"683965":0.5},"variations":[{"name":"Reference","id":0,"deviation":0.5},{"name":"Variation 1","id":683965,"deviation":0.5}],"targetingSegmentId":117879,"attributionWindow":0,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":143660,"name":"[NCH] [VIS] Produits CREW FP / Super boutique","baseURL":"https://fr.shopping.rakuten.com/offer/buy/2060586483/pack-home-alarm-somfy-protect.html#","experimentAction":true,"cssCode":"","technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1683810624000,"dateStatusModified":1635873673000,"goals":[168003],"deviation":{"0":0,"684268":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variante 1","id":684268,"deviation":1}],"targetingSegmentId":169259,"attributionWindow":0,"winningVariationId":684268,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":145438,"name":"[FDU] Analyse infos fiches produit","baseURL":"https://fr.shopping.rakuten.com/offer/buy/1530902399/apple-airpods-ecouteurs-avec-micro.html","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1637596964000,"dateStatusModified":1637435528000,"goals":[168003],"deviation":{"0":0,"698881":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":698881,"deviation":1}],"targetingSegmentId":170414,"attributionWindow":0,"winningVariationId":698881,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":145839,"name":"[FDU] [BUY] Bug fix hypernova header dans le PEC","baseURL":"https://fr.shopping.rakuten.com/pickup/parcel","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1638195704000,"dateStatusModified":1637768777000,"goals":[168003],"deviation":{"0":0,"701869":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":701869,"deviation":1}],"targetingSegmentId":170769,"attributionWindow":0,"winningVariationId":701869,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":145935,"name":"[FDU] Monitoring shipping time shopping season","baseURL":"https://fr.shopping.rakuten.com/mfp/7268072/aspirateur-robot-roborock-s7?pid=6341444460","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1637923116000,"dateStatusModified":1637845795000,"goals":[168003],"deviation":{"0":0,"702650":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":702650,"deviation":1}],"targetingSegmentId":170849,"attributionWindow":0,"winningVariationId":702650,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":147155,"name":"[NCH] - Cacher compteur Option d'expédition","baseURL":"/search","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1653382052000,"dateStatusModified":1639060893000,"goals":[148747],"deviation":{"0":0,"710161":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":710161,"deviation":1}],"targetingSegmentId":172030,"attributionWindow":0,"winningVariationId":710161,"kameleoonTracking":{"mainGoalId":148747},"customIntegrations":[]},{"id":154391,"name":"[RMB] Flag fp pour soutien ukraine","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1646421970000,"dateStatusModified":1646140035000,"goals":[168003,168004],"deviation":{"0":0,"729811":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":729811,"deviation":1}],"targetingSegmentId":179049,"attributionWindow":604800000,"winningVariationId":729811,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":155592,"name":"[RMB] prix barré electrodepo","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1647878689000,"dateStatusModified":1647273025000,"goals":[168003],"deviation":{"0":0,"733341":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":733341,"deviation":1}],"targetingSegmentId":162314,"attributionWindow":604800000,"winningVariationId":733341,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":165224,"name":"[FDU] [CHECK] Cacher lien annuler la commande","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1667920661000,"dateStatusModified":1656513915000,"goals":[168003],"deviation":{"0":0,"764366":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":764366,"deviation":1}],"targetingSegmentId":201284,"attributionWindow":604800000,"winningVariationId":764366,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":167277,"name":"[BCA] [B2C] Modification des commissions sur la page préférences vendeur","baseURL":"https://fr.shopping.rakuten.com/user?action=sellerprofile","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1662110031000,"dateStatusModified":1658700061000,"goals":[168003],"deviation":{"0":0,"769731":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":769731,"deviation":1}],"targetingSegmentId":123202,"attributionWindow":0,"winningVariationId":769731,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":174960,"name":"[FDU] Metriques pour différents usages sur search (Ads, dataset datascience)","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1700755069000,"dateStatusModified":1666080156000,"goals":[168003],"deviation":{"0":0,"789798":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":789798,"deviation":1}],"targetingSegmentId":167842,"attributionWindow":604800000,"winningVariationId":789798,"kameleoonTracking":{"mainGoalId":168003}},{"id":176118,"name":"[NCH] fix cart badge satisfait ou remboursé","baseURL":"https://www9.rakqa.fr/cart","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1666950249000,"dateStatusModified":1666947420000,"goals":[168003],"deviation":{"0":0,"794225":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":794225,"deviation":1}],"targetingSegmentId":200363,"attributionWindow":604800000,"winningVariationId":794225,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":178637,"name":"[FDU] Tracking pages d'erreur","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1669220804000,"dateStatusModified":1669042145000,"goals":[168003],"deviation":{"0":0,"800596":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":800596,"deviation":1}],"targetingSegmentId":202716,"attributionWindow":604800000,"winningVariationId":800596,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":181395,"name":"[FDU] Remplacement frais de port à 0e par gratuite ","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1677245306000,"dateStatusModified":1671101252000,"goals":[168003],"deviation":{"0":0,"809037":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":809037,"deviation":1}],"targetingSegmentId":114312,"attributionWindow":604800000,"winningVariationId":809037,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":181565,"name":"[YHA][SEARCH] Cacher Badge Livraison sur produit en précommande N&S","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1671206870000,"dateStatusModified":1671206993000,"goals":[],"deviation":{"0":0,"809474":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":809474,"deviation":1}],"targetingSegmentId":167842,"attributionWindow":604800000,"winningVariationId":809474,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"customIntegrations":[]},{"id":181688,"name":"[FDU] Intégration A/B test Namogoo new weight","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1671464805000,"dateStatusModified":1671464919000,"goals":[168004,168003],"deviation":{"0":0.1,"809854":0.9},"variations":[{"name":"Reference","id":0,"deviation":0.1},{"name":"Variation 1","id":809854,"deviation":0.9}],"targetingSegmentId":205547,"attributionWindow":604800000,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":168004},"customIntegrations":[]},{"id":183260,"name":" [TCA][VIS] Cacher les badges promo et solde dans les super boutiques","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1704879819000,"dateStatusModified":1704879819000,"goals":[148747],"deviation":{"0":0,"815069":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":815069,"deviation":1}],"targetingSegmentId":223999,"attributionWindow":604800000,"winningVariationId":815069,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"contentSquareTracking":true,"kameleoonTracking":{"mainGoalId":148747}},{"id":184345,"name":"[BCA] [B2C] Modification des abonnements et commissions sur la page préférences vendeur janvier 2023","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1676364283000,"dateStatusModified":1675189054000,"goals":[168003],"deviation":{"0":0,"817663":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":817663,"deviation":1}],"targetingSegmentId":123202,"attributionWindow":604800000,"winningVariationId":817663,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":195765,"name":"[FDU] Remplacement lien event Carrefour dans search","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1682674105000,"dateStatusModified":1682674066000,"goals":[168003],"deviation":{"0":0,"844509":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":844509,"deviation":1}],"targetingSegmentId":167842,"attributionWindow":604800000,"winningVariationId":844509,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":196807,"name":"[FDU] New UX page securiser votre compte 2AF","baseURL":"https://fr.shopping.rakuten.com/usersecure?action=securitypreferences","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1683898468000,"dateStatusModified":1683739801000,"goals":[168003],"deviation":{"0":0,"847073":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":847073,"deviation":1}],"targetingSegmentId":218986,"attributionWindow":604800000,"winningVariationId":847073,"kameleoonTracking":{"mainGoalId":168003},"customIntegrations":[]},{"id":203644,"name":"[ABE] Test intégration Maze feedback","baseURL":"https://fr.shopping.rakuten.com/boutique/arthur86","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1688562180000,"dateStatusModified":1688561328000,"goals":[168003],"deviation":{"0":1,"862489":0},"variations":[{"name":"Reference","id":0,"deviation":1},{"name":"Variante 1","id":862489,"deviation":0}],"targetingSegmentId":224881,"attributionWindow":604800000,"winningVariationId":0,"kameleoonTracking":{"mainGoalId":168003}},{"id":214313,"name":"[RLO] - Cashout A/B Test Tags","baseURL":"https://fr.shopping.rakuten.com/user/club","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1696426885000,"dateStatusModified":1696229450000,"goals":[],"deviation":{"0":0,"885384":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":885384,"deviation":1}],"targetingSegmentId":233207,"attributionWindow":604800000,"winningVariationId":885384,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"pianoTracking":{"predefinedTagName":"tag"},"contentSquareTracking":true},{"id":222685,"name":"[FDU] Script remontée de métriques concernant la qualité des description des FP","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1701104490000,"dateStatusModified":1700582279000,"goals":[168003],"deviation":{"0":0,"905614":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":905614,"deviation":1}],"targetingSegmentId":240131,"attributionWindow":604800000,"winningVariationId":905614,"kameleoonTracking":{"mainGoalId":168003}},{"id":234061,"name":"[RMB][VIS] - link protection footer","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1719237205000,"dateStatusModified":1707903034000,"goals":[318850],"deviation":{"0":0,"937252":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":937252,"deviation":1}],"targetingSegmentId":251180,"attributionWindow":604800000,"winningVariationId":937252,"kameleoonTracking":{"mainGoalId":318850}},{"id":246154,"name":"[FDU] Correctif modales CREW (à supprimer asap) ","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1714509879000,"dateStatusModified":1714509294000,"goals":[318850],"deviation":{"0":0,"966757":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":966757,"deviation":1}],"targetingSegmentId":261392,"attributionWindow":604800000,"winningVariationId":966757,"kameleoonTracking":{"mainGoalId":318850}},{"id":279576,"name":"[FDU] Cacher les 2% promo sur un FP en particulier (demande Armando)","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1732724648000,"dateStatusModified":1732724648000,"goals":[168003],"deviation":{"0":0,"1043236":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":1043236,"deviation":1}],"targetingSegmentId":294260,"attributionWindow":604800000,"winningVariationId":1043236,"kameleoonTracking":{"mainGoalId":168003}},{"id":279787,"name":"[MBA][VIS] - Gestion display coupon pour un breakpoint spécifique","baseURL":"https://fr.shopping.rakuten.com/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1732808693000,"dateStatusModified":1732804485000,"goals":[148747],"deviation":{"0":0,"1043717":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":1043717,"deviation":1}],"targetingSegmentId":261392,"attributionWindow":604800000,"winningVariationId":1043717,"kameleoonTracking":{"mainGoalId":148747}},{"id":280004,"name":"Test (copy of Copy [FDU] [VIS] Campagnes marketing coupons & ODR)","baseURL":"https://fr.shopping.rakuten.com/mfp/12461065/tv-qled-tcl-c655pro-2024?pid=12723238063","experimentAction":true,"technical":true,"executeCodeForReference":true,"forcedTechnical":false,"dateModified":1732887726000,"dateStatusModified":1732887726000,"goals":[148747,168003,168004],"deviation":{"0":0,"1044232":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"VARIANTE 1","id":1044232,"deviation":1}],"targetingSegmentId":114312,"attributionWindow":604800000,"winningVariationId":1044232,"smartTagTracking":{"smartTagPredefinedTagName":"tag"},"kameleoonTracking":{"mainGoalId":148747}}],"personalizations":[],"targetingSegments":[{"id":44710,"name":"bo.buyer.personas.segment.dissatisfied.name","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"ACTIVE_SESSION","disabled":false,"weight":1,"include":true,"time":120000,"timeUnit":"SECOND","operator":"LOWER"}},"rightChild":{"targetingCondition":{"type":"PAGE_VIEWS","disabled":false,"weight":1,"operator":"LOWER","include":true,"value":4}}},"rightChild":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"ORIGIN_TYPE","disabled":false,"weight":1,"value":"SEO","include":true}},"rightChild":{"targetingCondition":{"type":"ORIGIN_TYPE","disabled":false,"weight":1,"value":"SEM","include":true}}},"rightChild":{"targetingCondition":{"type":"MOUSE_OUT","disabled":false,"weight":1,"include":true}}}}},{"id":44711,"name":"bo.buyer.personas.segment.snooper.name","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"ACTIVE_SESSION","disabled":false,"weight":1,"include":true,"time":900000,"timeUnit":"SECOND","operator":"GREATER"}},"rightChild":{"targetingCondition":{"type":"PAGE_VIEWS","disabled":false,"weight":1,"operator":"GREATER","include":true,"value":8}}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"ORIGIN_TYPE","disabled":false,"weight":1,"value":"SEO","include":true}},"rightChild":{"targetingCondition":{"type":"ORIGIN_TYPE","disabled":false,"weight":1,"value":"SEM","include":true}}}}},{"id":44712,"name":"bo.buyer.personas.segment.revenant.name","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"NEW_VISITORS","disabled":false,"weight":1,"value":"RETURNING","include":true}},"rightChild":{"targetingCondition":{"type":"BROWSER","disabled":false,"weight":1,"value":"IE","version":null,"operator":"EQUAL","include":true}}}},{"id":114312,"name":"Fiches produits & MFP & Super Boutiques","tree":{"orOperator":true,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/s/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/nav/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/desc\\?aid\\=(.*)","include":true}}}}}}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/shop/(.*)","include":true}}}},{"id":115769,"name":"[FDU] Ajout de monétisation sur la home mon compte (BTF 1 & 2)-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"\\/user$","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115770,"name":"[FDU] Affichage uniquement de l'ID de l'ITEM pour le BO-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"\\/purchase\\?action=(buylist|itemmonitoring)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115773,"name":"Modification des Avatar vendeurs partenaires et supression des avatars vendeurs pros-1","tree":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc&aid\\=(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/shop/(.*)","include":true}}}}}},{"id":115793,"name":"[Personnalisation] Modification de la page de désabonnement aux newsletters CSS version-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"\\/subscription","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115796,"name":"[FDU] Entrée rouge menu XXL-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":".*","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115813,"name":"[SRO] Nouveau formulaire de réclamation V2.1-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(action=buyitem&case=3)|(action=itemmonitoring)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115837,"name":"[FDU] Ajout de monétisation sur la page confirmation vente (ATF)-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/submit\\?action=submitview&aid=)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115839,"name":"[FDU] Gestion cookie userHashedID pour Club R Everywhere-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/user)|(\\/connect)|(\\/event)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":115844,"name":"[LCR] Affichage adresse garantie vendeur pro-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/purchase\\?action\\=itemmonitoring)|(\\/cart$)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":116205,"name":"[FDU] Test nouvelle UI Rakuten-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":".*","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}}}},{"id":116207,"name":"[FDU] Entrée spéciale menu burger-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":".*","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}}}},{"id":116240,"name":"[FDU] Pré-cochage du retrait chez le vendeur page livraison-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"\\/cartshipping","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}}}},{"id":116241,"name":"[FDU] Produits du CREW dans la NAV & search-2","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/s\\/)|(\\/search\\/)|(\\/nav\\/)","include":true}}},{"id":116243,"name":"[SRO] Nouveau formulaire de réclamation V2.1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"followup\\/claim\\?itemid=*|action=itemmonitoring&itemid","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}}}},{"id":116253,"name":"[Personnalisation] Bug fix sur le site mobile-2","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":".*","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}}}},{"id":116297,"name":"[FDU] Regroupement des bugs fix sur le site","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_TITLE","disabled":false,"weight":1,"value":".*","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"TABLET","include":true}}}}},{"id":117879,"name":"[FDU] Global merchandising campaigns full site-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/$)|(\\/nav\\/)|(\\/s\\/)|(\\/search\\/)|(\\/offer\\/buy\\/)|(\\/mfp\\/)|(\\/user$)|(\\/event\\/)|(\\/v\\/vendre)|(\\/offer\\/shop\\/)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/offer\\?action=desc)|(\\/boutique\\/)|(\\/recent\\/)|(\\/promos\\/)|(\\/soldes\\/)|(\\/selections\\/)|(\\/commitment\\/)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/user$)|(\\/memo\\?action=list)|(\\/purchase\\?action=buylist)|(\\/purchase\\?action=itemmonitoring\\&itemid=)|(\\/usersecure\\?action=rakutenclubhistory)|(\\/usersecure\\?action=clubaccount)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}}}}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/search/test(.*)","include":false}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)www5\\.rakqa\\.fr(.*)","include":false}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)mse-recette002\\.priceminister\\.lan(.*)","include":false}}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)mse-recette001\\.priceminister\\.lan(.*)","include":false}}}}},{"id":120227,"name":"[MFO] NPS page user-1","tree":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)rakuten\\.com/user(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}}},{"id":120248,"name":"[FDU] Promotion moyen de paiement-1","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/checkout(.*)","include":true}}},{"id":121005,"name":"[FDU] Correctif PicWicToys jusqu'au 15 décembre-1","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/boutique/PicWicToys/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc(.*)","include":true}}}},{"id":121864,"name":"Pages de recherche desktop et mobile","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/s/(.*)","include":true}}},{"id":122085,"name":"[FDU] Produits CREW sur les Super Boutiques-1","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"\\/offer\\/buy\\/[0-9]*\\/cpl","include":true}}},{"id":122643,"name":"[FDU] NPS sur la page confirmation de commande-1","tree":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/checkout\\?action\\=paymentsuccess(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}}},{"id":123202,"name":"[FDU] Page préférences vendeurs PRO","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/user\\?action\\=sellerprofile(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/user\\?ssk\\=(.*)","include":true}}}},{"id":125060,"name":"[FDU] A/B test couleur wording garanties sur panier mobile-1","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/cart(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}}}},{"id":125358,"name":"[FDU] Cacher le en 2h du Click and collect TheKase-1","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/shop/(.*)","include":true}}}}},{"id":127712,"name":"15s","tree":{"targetingCondition":{"type":"ACTIVE_SESSION","disabled":false,"weight":1,"include":true,"time":15000,"timeUnit":"SECOND","operator":"GREATER"}},"trackMentalistPrediction":true,"mentalist":true},{"id":127713,"name":"30s","tree":{"targetingCondition":{"type":"ACTIVE_SESSION","disabled":false,"weight":1,"include":true,"time":30000,"timeUnit":"SECOND","operator":"GREATER"}},"trackMentalistPrediction":true,"mentalist":true},{"id":127714,"name":"60s","tree":{"targetingCondition":{"type":"ACTIVE_SESSION","disabled":false,"weight":1,"include":true,"time":60000,"timeUnit":"SECOND","operator":"GREATER"}},"trackMentalistPrediction":true,"mentalist":true},{"id":130057,"name":"Segment for [FDU] Récupération de feedbacks utilisateur","tree":null},{"id":132417,"name":"Segment for [NCH] - cacher la geoloc présente dans la search bar","tree":null},{"id":138654,"name":"[KUJ] Corner shop","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(boutique)|(/offer/buy/)|(/bestsellers/)|(/feedback/)|(/soldes/)|(/recent/)|(/offer\\?action=desc&aid=)","include":true}}},{"id":139505,"name":"Segment for [CGE + DESK] -- Banner Parrainage / Espace Mon Compte","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"https\\://fr\\.shopping\\.rakuten\\.com/user/?([\\?#].*)?$","include":true}}},{"id":147439,"name":"Ancienne aide en ligne","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/help/(.*)","include":true}}},{"id":148266,"name":"Segment for [FDU] Fix CSS boutiques PRO","tree":null},{"id":151518,"name":"[FDU] CREW top header-copy 0","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/search/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/nav/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/user(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"^https\\://fr\\.shopping\\.rakuten\\.com/$","include":true}}}}}}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}}},{"id":152099,"name":"[FDU] Home, search, NAV & events","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"^https\\://fr\\.shopping\\.rakuten\\.com/$","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/event/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/s/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/nav/(.*)","include":true}}}}}},{"id":153812,"name":"Segment for [FDU] Test merch sur les blocs MAD","tree":null},{"id":156219,"name":"[FDU] Ordinateur uniquement","tree":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}},{"id":162102,"name":"[RMB] Fiche produit","tree":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}}}},{"id":162314,"name":"Toutes les fiches produits all devices","tree":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/checkout\\?action\\=paymentprocessout(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/checkout/payment/processout(.*)","include":true}}}}}}},{"id":166943,"name":"Segment for [FDU] Mesure du trafic Fasterized","tree":null},{"id":167842,"name":"[FDU] Search & NAV all devices","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/search/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/s/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/nav/(.*)","include":true}}}}},{"id":168653,"name":"[FDU] Pages mon compte monétisées","tree":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(\\/user(\\?gtm.*)?$)|(\\/product_alert\\?action=list)|(\\/memo\\?action=list)|(\\/purchase\\?action=buylist)|(\\/purchase\\?action=itemmonitoring)|(\\/purchase\\?action=salelist)","include":true}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}}},{"id":168666,"name":"Segment for [FDU] [VIS] Script file d'attente virtuelle","tree":null},{"id":169259,"name":"[VIS] Produits CREW FP / Super boutique-copy 1","tree":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/desc(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/shop/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/shop/(.*)","include":true}}}}}}}},{"id":170408,"name":"Segment for [FDU] [GLOBAL] Global bug fixes tout devices","tree":null},{"id":170414,"name":"[FDU] FP & MFP on desktop","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}}},{"id":170769,"name":"Segment for [FDU] [BUY] Bug fix hypernova header dans le PEC","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/pickup/parcel(.*)","include":true}}},{"id":170849,"name":"[FDU] Fiches produits desktop","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":false}}}},{"id":172030,"name":"[SEARCH] - nav/search cacher le compteur","tree":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/nav/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":0,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/search/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/s/(.*)","include":true}}}}},{"id":179049,"name":"Ukraine","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)&productid\\=8097186252(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/8097186252/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)&productid\\=8109422683(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/8109422683/(.*)","include":true}}}}}},{"id":200363,"name":"Segment for [NCH] fix cart badge satisfait ou rembouré","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/cart(.*)","include":true}}},{"id":201284,"name":"[FDU] Spécifique annulation acheteur","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/purchase\\?action\\=itemmonitoring(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/help/ib_urgent_feedback/(.*)","include":true}}}},{"id":202716,"name":"Segment for [FDU] Tracking pages d'erreur","tree":null},{"id":205547,"name":"Segment for [FDU] Intégration A/B test Namogoo new weight","tree":null},{"id":218986,"name":"Segment for [FDU] New UX page securiser votre compte 2AF","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"https\\://fr\\.shopping\\.rakuten\\.com/usersecure\\?action\\=securitypreferences/?([&#].*)?$","include":true}}},{"id":223999,"name":"[TCA] Super boutiques","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/boutique/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/bestsellers/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/recent/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/soldes/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/promos/(.*)","include":true}}}}}}}},{"id":224881,"name":"Segment for [ABE] Test intégration Maze feedback","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"https\\://fr\\.shopping\\.rakuten\\.com/boutique/arthur86/?([\\?#].*)?$","include":true}}},{"id":233207,"name":"Segment for [RLO] - Cashout A/B Test Tags","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"https\\://fr\\.shopping\\.rakuten\\.com/user/club/?([\\?#].*)?$","include":true}}},{"id":240131,"name":"[FDU] Fiches produit desktop only","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}}}},{"id":251180,"name":"Segment for [RMB][VIS] - link protection footer","tree":null},{"id":261392,"name":"Fiches produits desktop","tree":{"orOperator":false,"orGuiLevel":0,"leftChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/shop/(.*)","include":true}},"rightChild":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer\\?action\\=desc(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/mfp/(.*)","include":true}}}}},"rightChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}}}},{"id":294260,"name":"Segment for [FDU] Cacher les 2% promo sur un FP en particulier (demande Armando)","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/offer/buy/13192335765/(.*)","include":true}}}],"variations":[{"name":"Variante 1","id":274252,"css":".fpV3 .siteBody #main .leadCol{font-family:inherit}.fpV3 .rakutenClb_txtStrong.primary{font-size:14px!important}.fpV3 .pm_1euro_content_4982256712,.fpV3 .unEuroPayment .tooltipLabel{font-size:12px!important}.fpV3 .siteBody #main .prdData .prd_side{padding-top:45px!important}.fpV3 .spacerBottomXs.price{margin-bottom:10px!important}.fpV3 .button_v2.buttonPrimary{padding-left:0!important;padding-right:0!important}.fpV3 .shippingDelayCS{font-size:12px!important}.fpV3 .siteBody #main #prdListingV2 a#advertPaginationBtn{font-size:14px!important}.fpV3 .shipping.freeShipping{font-weight:700}.fpV3 .sellerLink p.mdBoxEdito{margin-top:0!important}.fpV3 .siteBody #main .prdBuyBox .infosPrice .pricePromoSales .hasSalesOrSpecialOffer .label span{font-weight:700}html body.fpV3 #siteBody{width:100%!important;max-width:2000px!important}","elementSets":[]},{"name":"Variation 1","id":274423,"css":".design2016.fp:not(.fpV3) .container-fluid{padding:14px!important;border-radius:3px!important}.design2016.fp.components_v2:not(.fpV3) .box{padding:15px}.design2016.fp #prdTitleBlock{margin:0}.design2016.fp:not(.fpV3) .filterBar.box,.design2016.mfp .filterBar.box{padding:0 20px!important}#headerpm .pm_refcode{display:none}.pub>div.publicite.ad>div{display:block!important}.nerba div.publicite.ad>div{display:none!important}#pave{overflow:hidden}#main_pave{overflow:hidden;height:250px}#rkGigabanner iframe{overflow:hidden;width:100%!important}#rakuten-a-produit-to-replace{margin-top:27px}.nav .productList{margin-top:0!important}.checkout_v2 .breadCrumb .step:before,.hdNavItem .badge{background-color:#bf0000}body.fp .pub{margin:0!important}body.fp.design2016 .pub.publicite{margin:7px auto 0 auto!important}body.fp:not(.fpV3) .siteBody{width:997px}body.fp #suggestions{margin-top:15px}body.fp .similarProductCtner{border:none;margin-bottom:4px}#productPageStickyHeader #productName a,h1.prdTitle a{text-decoration:none!important;color:#333!important}#crt-1263264{margin:0 auto}.topheader-1{margin-bottom:-5px;height:90px;overflow:hidden}a.pm-logo img{width:230px}.rakutenSisters .bannerFcb{display:none}.header .globalSearchForm .globalSearchBtn{background-position:13px 13px!important}.shopPro .header .globalSearchForm .globalSearchBtn{background-position:13px 3px!important}.topHeader #jahiaOnglet{margin-left:30px!important}li.univers>a.universLink[href*=soldes]{font-weight:700;color:#bf0000!important}body.fp #leadCol #reviewsTooltip{width:400px!important}body.fp #leadCol .specialFinancing.unEuroTooltip{width:390px!important}body.fp #leadCol .rspTooltip{width:200px!important}#prdBuyBoxV2>p.heading_3{display:none}.design2016.fp.components_v2 #prdBuyBoxV2{padding-top:30px}.labelShipping .shipping{margin-top:-5px}#prdOtherSellersV2 .spacerTopM.spacerBottomM a[data-module=advertFilter] .price{font-size:16px}body.fp .mdBoxImg.profile.hasTooltipPop p.mdBoxEdito{margin-bottom:0}#prdListingListV2 a[href^=\"/cart?action=negotiationview\"],#prdListingListV2 a[href^=\"/offer?action=desc\"]{margin-bottom:7px;display:inline-block}#prdBuyBoxV2 a[href^=\"/offer?action=desc\"]{display:inline-block}#prdListingListV2 a[href^=\"/cart?action=negotiationview\"]:after{content:' - '}#prdBuyBoxV2 .infosPrice .offerType.typeUsed span.state,#prdListingListV2 .infosPrice .offerType.typeUsed span.state{display:none}#prdBuyBoxV2 .read-more.KML,#prdListingListV2 .read-more.KML{position:absolute;bottom:0;right:0;cursor:pointer;background:#fff;display:block;padding-left:5px}#prdBuyBoxV2 .sellerComment,#prdListingListV2 .sellerComment{max-height:72px;overflow:hidden;position:relative}.shippingRsl{font-size:12px}#prdListingListV2 .labelShipping .modelnk{display:block}.pickupTooFar .shippingMode.markerPin,.pickupTooFar button.button_v2.buttonPickup{display:none}#prdListingListV2 .shippingMode.markerPin a{display:block}.design2016.fp:not(.fpV3) .sellerComment .edito{color:#666!important}.design2016.fp .listing .itemList,.design2016.mfp .listing .itemList{padding-top:15px!important;padding-bottom:5px!important}#prdBuyBoxV2 .prdInfos .sellerComment,#prdListingV2 #prdListingListV2 .sellerComment{position:relative}#banInfoInscription>#DevenezVendeurPro{display:none!important}.shopPro #gigabanner iframe{width:100%!important}.rsb_with_nerba #header .hd_sb_nerba{padding:0!important}.v2_fpp_gigabanner.hd_sb_nerba{position:absolute!important}.bgCtner.navCol .category .listGroup .itemLnk{padding-left:28px!important}.bgCtner.navCol .listGroup .itemLnk{padding:10px 14px!important}.bgCtner.navCol .listGroup .txtIcon_R_16,.bgCtner.navCol .listGroup .txtIcon_R_8{padding-right:21px!important}.bgCtner.navCol .listGroup .listGroup .itemLnk,.bgCtner.navCol .selectedFilter .listGroup .listGroupLnk a{padding-left:35px!important}.bgCtner.navCol .filterName{text-overflow:inherit!important;white-space:inherit!important}.bgCtner.navCol .selectedFilter .cross{padding-right:17px!important}.bgCtner.navCol .bgCtn.filter.category ul:last-child{margin-bottom:0;border-bottom:none}.bgCtner.navCol .listGroup .itemLnk,.navCol .selectedFilter .cross{padding-top:6px!important;padding-bottom:6px!important}.bgCtner.navCol .txtIcon_R_16:after,.bgCtner.navCol .txtIcon_R_24:after,.bgCtner.navCol .txtIcon_R_8:after{top:7px!important}.pickupEnabled .geolocPopinLnkCtn .geolocPopinLnkImg{max-height:35px!important}.bgCtner.navCol .pickupEnabled .spacerTopM{margin-top:9px!important}.bgCtner.navCol .fld_full.spacerBottomS.formPickup{margin:-7px 0 5px 0}","elementSets":[],"javaScriptCode":{"code":"if(-1!==window.location.search.indexOf(\"sh=pkp\")&&(-1!==window.location.pathname.indexOf(\"/s/\")||-1!==window.location.pathname.indexOf(\"/nav/\")))try{null===PM.Cookie.get(PM.Constants.geolocation.cookieName)&&pickupMapPopin.show()}catch(o){}null!==document.getElementById(\"bloc_AFC\")&&(document.getElementById(\"bloc_AFC\").style.height=\"auto\");","afterDOMReady":true}},{"name":"Variation 1","id":274490,"css":"/* START CUSTOM */\n\n/* Your custom CSS code */\n\n.products_list .nb_results {\n \twidth: calc(98% - 64px) !important; \n}\n.localization_popup .suggestLocationCtn .pm_frm .fld_full#geolocSuggestInputCtn {\n  \tmargin: 6px 5px 1px 0;\n}\n.products_list .sortBy {\n  \twidth: 65px !important;\n}\n\n/* Bannière download appli */\n#PMinterstitialBan .heading_5 {\n\tmargin-right: 0 !important;\n    font-size: 13px !important;\n}\n#PMinterstitialBan .infos {\n\tmargin-right: 0 !important;\n}\n#PMinterstitialBan .rating {\n\tline-height: 14px;\n}\n\n/* Cacher l'entrée Super Bon Plans dans menu burger */\n.merch.menuPicto {\n    display: none;   \n}\n\n#introGeolocationNav {\n    display: none;\n}\n\nli.univers > a.universLink[href*=\"soldes\"] {\n    font-weight: bold;\n    color: rgb(251, 55, 44);\n}\n\n.product_page h1:not(.product_title_v2) {\n    display: none;   \n}\n}","elementSets":[],"javaScriptCode":{"code":"!function(){try{document.querySelector(\".advertItem, .product_container, .product_page\").setAttribute(\"data-cs-dynamic-id\",!0)}catch(t){}}();","afterDOMReady":true}},{"name":"Variation 1","id":274540,"css":"","elementSets":[],"javaScriptCode":{"code":"$j('a[href=\"/op/recrutement\"]').parents(\"#panel_body > table\")[0].remove();","afterDOMReady":true}},{"name":"Variation 1","id":274542,"css":"","elementSets":[],"javaScriptCode":{"code":"KML.getAsyncDataLayer((e=>{if(\"PRO\"!=e.userType){$j(\"#myPurchases .pm_fctn.order_buylist\").each((function(){$j(this).find(\".orderTitle .order_info .order_ref\").remove();var e=$j(this).find(\".orderTitle .order_info\").text().replace(\" n°\",\"\");$j(this).find(\".orderTitle .order_info\").text(e),$j(this).find(\"ul.prd_description p.reference .label\").text(\"Référence (SAV) :\")})),$j(\"#order_manage .order_reference .label\").text(\"Référence (SAV) :\");var r=$j(\"#order_manage .order_reference .value\").text().split(\"/\")[1];$j(\"#order_manage .order_reference .value\").text(r)}}));","afterDOMReady":true}},{"name":"Variation 1","id":274600,"css":"#temp_d,.KMLgrpPM{display:none}#temp_c .mesabo,#temp_c .mesabo_part{margin:0!important}#temp_c .mesabo h2,#temp_c .mesabo_part h2,.content_mesabo_part{background-color:#fff!important}#temp_c .mesabo .priceletter{border-bottom:none;font-size:11px;margin-bottom:10px}#temp_c .mesabo div{font-size:1px}#temp_c .mesabo span,#temp_c .mesabo_part span{color:#333}.kmlContentEmail{background-color:#f4f4f4;padding:15px;font-weight:700}#pm_part_offer,.kmlGroupNL1,.kmlGroupNL2{border-bottom:1px solid #ccd6e0}#pm_part_offer .kmlShow{display:block!important;float:none!important;margin:5px 0!important;padding:2px 0 10px 9px!important;font-weight:700!important}input[name=selectAll]{display:block;float:left;margin:0 10px 14px 18px!important}#temp_c .mesabo span,#temp_c .mesabo_part p span label,#temp_c .mesabo_part span{font-weight:400!important}#temp_c #submitbtn{background:#004a99;padding:15px 40px;width:auto;height:auto;font-weight:400;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px}.priceletter label{color:#000;font-size:13px}.backroundCS{margin:0 0 10px 0;padding:15px 15px;background:#eee;font-weight:700}.mesabo>p{font-weight:700}body #panel_head+table#temp3{width:100%!important}","elementSets":[],"javaScriptCode":{"code":"$j(\"p:contains(Votre e-mail :)\").addClass(\"backroundCS\");","afterDOMReady":true}},{"name":"VARIANTE 1","id":274604,"css":"li.univers>a.sans_menu+div{display:none!important}li.univers>a.sans_menu:after{display:none!important}li.univers>a.red{font-weight:700;color:#bf0000}li.univers>a.black{font-weight:700}li.univers>a.green{font-weight:700;color:#4ca529}li.univers>a.pink{font-weight:700;color:#f20d77}li.univers>a.french_days{font-weight:700;color:#372c90}","elementSets":[],"javaScriptCode":{"code":"\"undefined\"!=typeof $j&&($j(\"li.univers > a:contains(Club R Everywhere):last\").addClass(\"red\"),$j(\"li.univers > a:contains(Rakuten Deals):last\").addClass(\"sans_menu\").addClass(\"red\"),$j(\"li.univers > a:contains(Soldes):last\").addClass(\"sans_menu\").addClass(\"red\"),$j(\"li.univers > a:contains(Le meilleur de l'occasion):last\").addClass(\"green\"),$j(\"li.univers > a:contains(Saint Valentin):last\").addClass(\"sans_menu\").addClass(\"pink\"),$j(\"li.univers > a:contains(French Days):last\").addClass(\"sans_menu\"),$j(\"li.univers > a:contains(Ventes privées):last\").addClass(\"sans_menu\"),$j(\"li.univers > a:contains(Idées cadeaux):last\").addClass(\"sans_menu\").addClass(\"red\"),$j(\"li.univers > a:contains(Sprint de Noël):last\").addClass(\"sans_menu\").addClass(\"red\"),$j(\"li.univers > a:contains(French Days):last\").addClass(\"sans_menu\").addClass(\"french_days\"));","afterDOMReady":true}},{"name":"Variation 1","id":274653,"css":"#buyer_item_claim .group{margin:9px 0}#buyer_item_claim .group>fieldset>ul{margin:0}#buyer_item_claim .title-product-copy{width:651px;opacity:.9;color:#4a4a4a;font-size:16px;font-weight:600;line-height:16px;margin:2px 0;padding-left:0}#buyer_item_claim .bg-claim{height:20px;border:1px solid #ddd;border-radius:3px;background-color:#fff;margin:6px 0 12px 0;padding:20px}#buyer_item_claim .bg-checked{border:1px solid #000}#buyer_item_claim .label{height:19px;color:#4a4a4a;font-size:14px;line-height:19px;display:inline-block}#buyer_item_claim .radio-default{height:16px;width:16px;border:1px solid #ddd;border-radius:8px;background-color:#fff;vertical-align:sub;margin:0 2px 0 0}#buyer_item_claim fieldset{border:none;margin:0;padding:0}#buyer_item_claim .field{height:148px;width:762px;border:1px solid #ddd}#buyer_item_claim #count_comment{height:12px;opacity:.9;color:#929292;font-size:12px;line-height:12px;text-align:right;display:flex;justify-content:flex-end;position:relative;top:-16px}#buyer_item_claim .group textarea{margin-top:6px}#buyer_item_claim .group textarea:placeholder{height:32px;opacity:.9;color:#929292;font-size:14px;line-height:16px;resize:none!important}#buyer_item_claim .group:focus{outline:0!important}.annot-select-title{font-size:11px;width:130px;top:13px;left:1px;font-style:italic}","elementSets":[],"javaScriptCode":{"code":"KML.loadScript(\"https://fr.shopping.rakuten.com/visuels/0_content_square/formulaireReclamation/sro_nouveau_formulaire_de_reclamation_desktop.js\");","afterDOMReady":true}},{"name":"Variation 1","id":274802,"css":"","elementSets":[],"javaScriptCode":{"code":"!function(){if(KML.loadRgpdAds()&&0===$j(\".topheader-1 > div\").length){$j.getScript(\"https://static.criteo.net/js/ld/publishertag.js\");var e=[];googletag.cmd.push((function(){e[0]=googletag.defineSlot(\"57948771/PriceMinister_FR/vente/vente_confirmation/vente_confirmation_bandeau_premium\",[[728,90],[1e3,90]],\"div-gpt-ad-765489-0\").addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.enableServices()})),$j(\".topheader-1\").append(\"<div id='div-gpt-ad-765489-0' style='height:90px;text-align: center;margin: 0px auto 0px auto;overflow:hidden; width: 1000px;'><div id='crt-1263263' style='width: 728px; height: 90px; margin: 0 auto;'></div><script type='text/javascript'>window.addEventListener('load', function(){Criteo.DisplayAcceptableAdIfAdblocked({'zoneid': 1263263,'containerid': 'crt-1263263','overrideZoneFloor': false,'collapseContainerIfNotAdblocked':true});});<\\/script></div>\"),googletag.cmd.push((function(){googletag.display(\"div-gpt-ad-765489-0\")}))}}();","afterDOMReady":true}},{"name":"Variation 1","id":274806,"css":"","elementSets":[],"javaScriptCode":{"code":"!function(){try{[\"/user\",\"/event\"].some((e=>window.location.pathname.includes(e)))&&KML.getAsyncDataLayer((e=>{e.userId&&KML.setCookie(\"userHashedID\",e.userId,30)})),\"/connect\"===window.location.pathname&&PM.Cookie.erase(\"userHashedID\")}catch(e){console.log(\"Erreur JS concernant le test Content Square : [FDU] Gestion cookie userHashedID pour Club R Everywhere\"),console.log(e)}}();","afterDOMReady":true}},{"name":"Variation 1","id":274814,"css":"","elementSets":[],"javaScriptCode":{"code":"!function(){if(window.location.href.indexOf(\"action=itemmonitoring&itemid=\")>-1&&document.getElementById(\"warrantySellerCoord\")){var e=document.getElementsByClassName(\"claim_seller_tools_listing\")[0],t=document.getElementById(\"sellerEmailAdress\")?document.getElementById(\"sellerEmailAdress\").textContent:\"\",n=document.getElementById(\"sellerPhoneNumber\")?document.getElementById(\"sellerPhoneNumber\").textContent.replace(/([0-9]{2})\\D*/g,\"$1.\").replace(/\\.$/g,\"\"):\"\",r=document.getElementsByClassName(\"sellerName\")[0].textContent,o=document.getElementsByClassName(\"claim_seller_tools_listing\")[0].children[3].childNodes[1]?document.getElementsByClassName(\"claim_seller_tools_listing\")[0].children[3].childNodes[1].textContent.trim():\"\",l=document.getElementsByClassName(\"dtstart\")[0].textContent.split(\" -\")[0].trim(),a=`Votre vendeur <b>\"${r}\"</b> et nous-mêmes restons à votre disposition pour toute question relative à votre achat.`,s=`Vous avez confirmé la réception de votre commande en notant ${o}.<p></p>Votre vendeur et nous-mêmes restons à votre disposition pour toute question relative à votre achat.`,i=`<article><h4>Je souhaite faire jouer la garantie</h4><p>${/automatiquement/g.test(e.firstElementChild.textContent)?a:s}</p><div style=\"margin: 10px;border: 2px dashed black;padding: 10px;width: fit-content;\">Vous pourrez le contacter à l'adresse mentionnée sur la facture ou, à défaut, à l'adresse suivante : <div style=\"padding: 10px 0px 10px 10px;line-height:1.4;\"><b>${t?`Par email : <span style='color:#bf0000'><a style='color:#bf0000' href=\"mailto:${t}\">${t}</a></span>`:\"\"}${n?`<br/>Par téléphone :  <span style='color:#bf0000'>${n}</span>`:\"\"}</b></div>Merci de lui rappeler les références de la commande : ${window.purchaseId||document.querySelector(\"a[href*='purchaseid']\").href.split(\"purchaseid=\")[1].substring(0,9)}/${window.itemId||(ref=document.querySelector(\"#order_manage .order_reference .value\").textContent,ref.match(\"/\")?ref.split(\"/\")[1]:ref)}, et la date d'achat : ${l}.<br/><br/>Conservez précieusement la facture. Celle-ci fait notamment office de garantie.</article>`;e.insertAdjacentHTML(\"beforeend\",i)}}();","afterDOMReady":true}},{"name":"VARIANTE 1","id":275501,"css":".kmlCustomAvatar{width:32px;height:32px;border:1px solid #ddd;border-radius:4px;display:block}.mklcontainercustmavatar{display:flex;align-items:center;justify-content:flex-end;margin-bottom:5px}.mdBoxImg.profile.hasTooltipPop .media{width:34px;height:34px}.v2_fpp_seller_title .kmlCustomAvatar{transform:translateY(30%);margin-right:5px}.mdBoxImg.profile.hasTooltipPop .media[src=\"https://fr.shopping.rakuten.com/prod/eshop/01/67/31/44/49/167314449_AVATAR_20230707123045.png\"]{border-radius:0!important}","elementSets":[],"javaScriptCode":{"code":"!function e(t,a,i){function r(s,o){if(!a[s]){if(!t[s]){var u=\"function\"==typeof require&&require;if(!o&&u)return u(s,!0);if(n)return n(s,!0);var m=new Error(\"Cannot find module '\"+s+\"'\");throw m.code=\"MODULE_NOT_FOUND\",m}var p=a[s]={exports:{}};t[s][0].call(p.exports,(function(e){return r(t[s][1][e]||e)}),p,p.exports,e,t,a,i)}return a[s].exports}for(var n=\"function\"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,a){\"use strict\";var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")})(this,e),this.getList()}return i(e,[{key:\"initAdverts\",value:function(){var e=this;KML.getAdvertsList((function(t){t.forEach((function(t){e.avatarCheck(t)}))}))}},{key:\"avatarCheck\",value:function(e){if(!e.elem.classList.contains(\"avatarChecked\")){e.elem.classList.add(\"avatarChecked\");var t=!1;try{t=t||e.elem.querySelector(\".heading_4 .seller .proAvatar\")}catch(e){}try{t=t||e.elem.querySelector(\".sellerInfos .profile .media\")}catch(e){}var a=this.names.indexOf(e.login.trim())>-1;if(t&&a)t.setAttribute(\"src\",this.filters[this.names.indexOf(e.login.trim())].image),t.setAttribute(\"data-pm-lazy-src\",this.filters[this.names.indexOf(e.login.trim())].image);else if(t&&!a)t.parentNode.removeChild(t);else if(!t&&a){var i=!1;try{i=i||e.elem.querySelector(\".heading_4 .seller\")}catch(e){}try{i=i||e.elem.querySelector(\".v2_fpp_seller_info .v2_fpp_seller_title\")}catch(e){}if(i){var r=document.createElement(\"span\");r.classList.add(\"mklcontainercustmavatar\");var n=document.createElement(\"img\");n.classList.add(\"kmlCustomAvatar\"),n.setAttribute(\"src\",this.filters[this.names.indexOf(e.login.trim())].image),n.setAttribute(\"data-pm-lazy-src\",this.filters[this.names.indexOf(e.login.trim())].image),r.insertAdjacentHTML(\"afterbegin\",n.outerHTML),i.insertAdjacentHTML(\"afterbegin\",r.outerHTML)}}}}},{key:\"getList\",value:function(){this.filters=[{name:\"Boulanger\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/boulanger2.png\"},{name:\"Boulanger_2nd_life\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/Boulanger2ndlife.png\"},{name:\"SAMSUNG\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/samsung.png\"},{name:\"PicWicToys\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/picwictoys.png\"},{name:\"Jules\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/jules.png\"},{name:\"Brice\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/brice.png\"},{name:\"SoutienUkraine\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/soutienukraine.svg\"},{name:\"Kobo\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/kobo.svg\"},{name:\"Moulinex\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/200x200_avatar_moulinex.png\"},{name:\"Tefal\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/200x200_avatar_tefal.png\"},{name:\"Rowenta\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/200x200_avatar_rowenta.png\"},{name:\"DARTY\",image:\"https://fr.shopping.rakuten.com/cdn/prod/eshop/01/67/31/44/49/167314449_AVATAR_20241001125015.png\"},{name:\"Carrefour\",image:\"https://fr.shopping.rakuten.com/visuels/0_merch/00_animationsite/SuperBoutique/avatars/Carrefour.png\"},{name:\"momox\",image:\"https://fr.shopping.rakuten.com/cdn/prod/eshop/00/36/49/23/30/36492330_AVATAR_20241007123617.png\"},{name:\"Tonies\",image:\" https://fr.shopping.rakuten.com/cdn/prod/eshop/01/35/50/45/63/135504563_AVATAR_20241107143905.png\"}],this.names=this.filters.map((function(e){return e.name})),this.initAdverts()}}]),e}())},{}]},{},[1]);","afterDOMReady":true}},{"name":"Variation 1","id":277347,"css":"#header .pm_action.btn-color-2 .ui-btn-inner{background:url(https://fr.shopping.rakuten.com/visuels/0_content_square/2018/searchgrey.svg) 2.9vw 2.9vw no-repeat #f0f0f0!important;background-size:22px!important}.addToCart .ui-btn,.addToCart.ui-btn,.add_to_cart .ui-btn,.add_to_cart.ui-btn,.btn-color-2 .ui-btn,.btn-color-2.ui-btn,.btn_checkout .ui-btn,.btn_checkout.ui-btn,.button_v2.buttonPrimary,.checkout-breadcrum-step.breadcrum-step__active .checkout-breadcrum-step__link,.checkout-breadcrum-step.breadcrum-step__filled .checkout-breadcrum-step__link,.loginFromCart .ui-btn:not(.ui-btn-icon-notext),.registerFromCart .ui-btn:not(.ui-btn-icon-notext){background-color:#bf0000!important}#header li.suggest_item span.colored,.advtype_new .value{color:#bf0000!important}.advtype_used .value,.product_page.product_sept_2016 .priceInfos .free_pickup span,.product_page.product_sept_2016 .priceInfos .free_shipping span{color:#4a4a4a!important}.xt_product_pagination{background-color:#000!important}#header .search_form .btn-color-2 .ui-btn{background-color:#f0f0f0!important}.product_2019 .advtype_used .value{color:#000!important}","elementSets":[]},{"name":"Variation 1","id":277354,"css":"","elementSets":[],"javaScriptCode":{"code":"window.$&&setTimeout((function(){$(\"a:contains(Rakuten Deals)\").attr(\"href\",\"/event/rakuten-deals#xtatc=PUB-[fonc]-[Header]-[Rakutendeals]-[ToutUnivers]-[]-[]-[]\").parent().addClass(\"merch\").css(\"display\",\"block\"),$(\"a:contains(Rakuten Deals)\").next().remove();var e=$(\"a:contains(Rakuten Deals)\").css(\"color\",\"#555\").clone();$(\"a:contains(Rakuten Deals)\").addClass(\"toRemove\").after(e),$(\"a.toRemove:contains(Rakuten Deals)\").remove()}),1e3);","afterDOMReady":true}},{"name":"Variation 1","id":277670,"css":"","elementSets":[],"javaScriptCode":{"code":"document.querySelector('[data-xiti=\"panier::changementmodeexpedition::clickandcollect\"]')&&document.querySelector('[data-xiti=\"panier::changementmodeexpedition::clickandcollect\"]').click();","afterDOMReady":true}},{"name":"Variation 1","id":277674,"css":".crew-product .crew-logo{margin-bottom:15px}","elementSets":[],"javaScriptCode":{"code":"function init(){var t=document.querySelectorAll('input[name=\"partner_site\"]:not([data-customized])');for(i=0;i<t.length;i++){t[i].dataset.customized=!0;var e=t[i].parentElement.parentElement;e.classList.add(\"crew-product\"),e.querySelector(\".productList_layoutContent_NC_, .productList_layoutContent_NC_ \").insertAdjacentHTML(\"afterbegin\",'<img class=\"crew-logo\" width=\"140\" src=\"https://fr.shopping.rakuten.com/visuels/0_content_square/openEcommerce/injection_modales_crew/logo_clubeverywhere.svg\" />')}}init(),window.addEventListener(\"ReloadProductListNS\",(function(){init()}));","afterDOMReady":true}},{"name":"Variation 1","id":277685,"css":".annot-select-title{font-size:11px;position:absolute;width:130px;top:13px;left:1px;font-style:italic}.populated .annot-select-title{position:inherit}","elementSets":[],"javaScriptCode":{"code":"KML.loadScript(\"https://fr.shopping.rakuten.com/visuels/0_content_square/formulaireReclamation/sro_nouveau_formulaire_de_reclamation_mobile.js\");","afterDOMReady":true}},{"name":"Variante 1","id":319502,"css":".kmlNps{padding:16px 63px 16px 74px!important;background-color:#f7f7f7!important;border-radius:3px!important;background-repeat:no-repeat!important;background-position:20px 40px!important;background-image:url('https://fr.shopping.rakuten.com/visuels/0_content_square/autres/ic_campaign_nps.svg')!important;background-repeat:no-repeat!important;background-position:20px 40px!important}.nps__header .titre{color:#4a4a4a!important;font-size:14px!important;font-weight:600!important;line-height:19px!important}.nps__header .content{color:#4a4a4a!important;font-size:12px!important;line-height:14px!important;margin-top:3Px!important}.kmlNps .notes{margin-top:8px!important;display:flex!important;align-items:center!important;justify-content:space-between!important}.kmlNps .notes .note{height:27px!important;width:34px!important;border-radius:4px!important;background-color:#fff!important;box-shadow:0 2px 4px 0 rgba(74,74,74,.2)!important;color:#000!important;font-size:14px!important;font-weight:700!important;line-height:19px!important;text-align:center!important;outline:0!important;border:0!important;cursor:pointer!important}.kmlNps .notes .note:hover{transform:scale(1.1);transition:.2s ease-out all}.Kml__kmlNps{padding:16px 63px 16px 74px!important;background-color:#f7f7f7!important;border-radius:3px!important}.Kml__Nps__header__titre{color:#4a4a4a!important;font-size:14px!important;font-weight:600!important;line-height:19px!important}.Kml__Nps__header__content{color:#4a4a4a!important;font-size:10px!important;line-height:14px!important;margin-top:3Px!important}.Kml__Nps__test{overflow:hidden!important}.Kml__Nps__notes{margin-top:8px!important;display:flex!important;align-items:center!important;justify-content:space-between!important}.Kml__Nps__notes .note{height:27px!important;width:34px!important;border-radius:4px!important;background-color:#fff!important;box-shadow:0 2px 4px 0 rgba(74,74,74,.2)!important;color:#000!important;font-size:14px!important;font-weight:700!important;line-height:19px!important;text-align:center!important;outline:0!important;border:0!important}","elementSets":[],"javaScriptCode":{"code":"var npsKml=function(){function e(e){var t=function(e,t){let r=JSON.stringify(e);return localStorage.setItem(t,r)}(\"1\",\"KmlNps\");console.log(\"ls is \",t);var r=KML.getDataLayer(),n=e.getAttribute(\"value\"),o=!1;try{o=o||r.user_id}catch(e){}var s=!1;try{s=s||r.rsp_pgs_status.split(\"|\")[0].trim().toUpperCase()}catch(e){}var a=!1;try{a=a||\"SUBSCRIBED\"===r.clubMemberStatus?1:0}catch(e){}if(console.log(n,o,s,a),console.log(\"clicked\",e),n&&o&&a&&s){var c=`https://www.surveygizmo.com/s3/4757920/NPS-L1?scoreNPS=${n}&userid=${o}&pgsrank=${s}&template=NPS_MYACCOUNT&club=${a}`;window.open(c,\"_blank\").focus()}}!function(){var t,r,n=(t=\"KmlNps\",!!(r=localStorage.getItem(t))&&JSON.parse(r));if(console.log(\"ls is \",n),n)return!1;var o=KML.getDataLayer();if(!o)return!1;if(\"PART\"!=o.userType)return!1;var s=function(){var e=!1;try{e=e||document.querySelector(\"#my_account_notif\")}catch(e){}return e}();if(!s)return!1;let a=function(e){var t=document.createElement(\"div\");t.classList.add(\"kmlNps\"),t.innerHTML='<div class=\"nps__header\"><p class=\"titre\">Recommanderiez-vous Rakuten à vos proches ?</p><p class=\"content\">0 = Pas du tout probable, 10 = Très probable</p></div><div class=\"notes\"></div>',e.insertAdjacentElement(\"afterend\",t);let r=!1;try{r=r||t.querySelector(\".notes\")}catch(e){}return console.log(e,r),r}(s);if(!a)return!1;let c=function(t){for(let r=-1;r<10;r++){let n=document.createElement(\"button\");n.classList.add(\"note\"),n.setAttribute(\"value\",r+1),n.innerText=r+1,n.addEventListener(\"click\",(function(){e(n)})),t.append(n)}return 10===t.querySelectorAll(\".note\").length}(a);console.log(c)}()};npsKml();","afterDOMReady":true}},{"name":"Variante 1","id":322556,"css":"","elementSets":[],"javaScriptCode":{"code":"KML.getAsyncDataLayer((function(){KML.loadJSONbyName(\"merchandisingCampaigns\",(function(e){!function(e){function n(e){const n=new Date;return e.filter((e=>{if(e.programmation&&e.programmation.length>0){const t=e.programmation[0].start,a=e.programmation[0].end,i=`${t[0]}T${t[1]}:00`,r=`${a[0]}T${a[1]}:00`,o=new Date(i),m=new Date(r);return o<=n&&n<=m}return!1}))}const t=n(e.paiement);var a=KML.getFilteredCampaigns(e.paiement);if(!a)return;Array.isArray(t)&&KML.ajaxCall(/.*/,(function(){t.forEach((function(e){document.querySelector(\"#kml-paiement-banner-\"+e.id)||function(e){try{var n='<style class=\"KML-gigabanners\">        #kml-paiement-banner-'+e.id+\" {          padding: 10px;          position: relative;          font-size: 14px;          font-weight: normal;          line-height: 16px;        }        #kml-paiement-banner-\"+e.id+\" .red {          color: #bf0000;          font-weight: bold;          font-size: 16px;        }        #kml-paiement-banner-\"+e.id+\" .small {          font-size: 11px;          line-height: 12px;          margin-top: 5px;        }        #kml-paiement-banner-\"+e.id+\" img {          vertical-align: -4px;        }        #kml-paiement-banner-\"+e.id+\" #kml-secondary {          margin-top: 7px;          display: none;        }        .active #kml-paiement-banner-\"+e.id+\" #kml-secondary, .selectedRadio #kml-paiement-banner-\"+e.id+\" #kml-secondary {          display: block;        }        @media (max-width: 640px) {          #kml-paiement-banner-\"+e.id+\" {            padding-bottom: 0;          }        }        </style>\";document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",n);var t='        <div id=\"kml-paiement-banner-'+e.id+'\">          <div id=\"kml-primary\">'+KML.formatText(e.creation.promotionText)+\"</div>\";e.creation.secondaryText&&(t+='<div id=\"kml-secondary\">'+KML.formatText(e.creation.secondaryText)+\"</div>\"),t+=\"</div>\";let a=document.querySelector('label[for$=\"'+e.creation.paiementType+'\"]')||document.querySelector('img[src*=\"'+e.creation.paiementType+'\"]').parentElement.parentElement;a&&(a.insertAdjacentHTML(\"beforeend\",t),KML.sendAtPublisherTag(e,\"impression\",\"Paiement\"),document.querySelector(\"#kml-paiement-banner-\"+e.id).addEventListener(\"click\",(function(){KML.sendAtPublisherTag(e,\"click\",\"Paiement\")})))}catch(e){console.log(\"Erreur Kameleoon, affichage promotion moyen de paiement\"),console.log(e)}}(e)}))}))}(e)}))}));","afterDOMReady":true}},{"name":"VARIANTE 1","id":327705,"css":"","elementSets":[],"javaScriptCode":{"code":"function initMerchandisingCampaign(){window.KML.getAsyncDataLayer((function(t){function e(t){t.forEach((function(t){var e=document.createElement(\"img\");e.src=t,e.height=\"1\",e.width=\"1\",e.border=\"0\",e.style=\"display: none\",document.querySelector(\"body\").insertAdjacentElement(\"beforeend\",e)}))}KML.loadJSONbyName(\"merchandisingCampaigns\",(function(n){!function(e){if(![\"NAV\",\"SEARCH\",\"FP\",\"SUPER_BOUTIQUE\",\"MON_COMPTE\",\"SELL\",\"EVENT\",\"OTHER\"].includes(t.pageType))return;var n=KML.getFilteredCampaigns(e.gigabanners);if(KML.log(n),!n)return;!function(e){var n,i=\"\",a=\"\",o='<style class=\"KML-gigabanners\">\\t\\t\\t\\t#kml-gigabanner {\\t\\t\\t\\t\\toverflow: hidden;\\t\\t\\t\\t\\tdisplay: block;\\t\\t\\t\\t\\ttransition: height .4s ease;\\t\\t\\t\\t\\theight: 48px;\\t\\t\\t\\t\\twidth: 100%;\\t\\t\\t\\t\\ttext-align: center;\\t\\t\\t\\t\\tposition: relative;\\t\\t\\t\\t\\tleft: 0;\\t\\t\\t\\t}\\t\\t\\t\\t#kml-gigabanner img {\\t\\t\\t\\t\\tmax-width: 100%;\\t\\t\\t\\t\\tmax-height: 100%;\\t\\t\\t\\t}\\t\\t\\t\\t#kml-gigabanner .kml-banner {\\t\\t\\t\\t\\tposition: relative;\\t\\t\\t\\t\\tdisplay: inline-block;\\t\\t\\t\\t\\theight: 48px;\\t\\t\\t\\t}\\t\\t\\t\\t#kml-gigabanner .kml-cta {\\t\\t\\t\\t\\tdisplay: inline-block;\\t\\t\\t\\t\\tpadding: 10px 30px;\\t\\t\\t\\t\\tposition: absolute;\\t\\t\\t\\t\\ttop: 4px;\\t\\t\\t\\t\\tright: 4px;\\t\\t\\t\\t\\tcolor: '+e.creation.cta_color+\";\\t\\t\\t\\t\\tborder: solid 1px \"+e.creation.cta_color+\";\\t\\t\\t\\t\\tfont-weight: normal;\\t\\t\\t\\t\\ttransition: all .3s ease;\\t\\t\\t\\t\\tborder-radius: 4px;\\t\\t\\t\\t\\tfont-size: 14px;\\t\\t\\t\\t\\ttext-decoration: none;\\t\\t\\t\\t}\\t\\t\\t\\t#kml-gigabanner .kml-coupon {\\t\\t\\t\\t\\tdisplay: inline-block;\\t\\t\\t\\t\\tposition: absolute;\\t\\t\\t\\t\\twidth: 126px;\\t\\t\\t\\t\\theight: 30px;\\t\\t\\t\\t\\ttop: 9px;\\t\\t\\t\\t\\tcolor: #333;\\t\\t\\t\\t\\tfont-weight: bold;\\t\\t\\t\\t\\tfont-size: 17px;\\t\\t\\t\\t\\tline-height: 30px;\\t\\t\\t\\t\\tcursor: text;\\t\\t\\t\\t\\tright: 215px;\\t\\t\\t\\t}\\t\\t\\t\\t#kml-gigabanner .kml-cta:hover {\\t\\t\\t\\t\\tcolor: \"+e.creation.cta_color_txt+\";\\t\\t\\t\\t\\tbackground-color: \"+e.creation.cta_color+\";\\t\\t\\t\\t\\tbackground-color: -webkit-\"+e.creation.cta_color+\";\\t\\t\\t\\t}\\t\\t\\t\\tbody.shopPro #kml-gigabanner {\\t\\t\\t\\t\\twidth: 100%;\\t\\t\\t\\t}\\t\\t\\t\\thtml body.shopPro #main.main {\\t\\t\\t\\t\\t margin-top: 132px !important;\\t\\t\\t\\t}\\t\\t\\t\\t#gigabanner {\\t\\t\\t\\t\\tdisplay: none;\\t\\t\\t\\t}\\t\\t\\t\\tbody:not(.shopPro) .siteBody #panel_head {\\t\\t\\t\\t\\tpadding-bottom: 0 !important;\\t\\t\\t\\t}\";\"DESKTOP\"===t.device&&(o+=\"#kml-gigabanner .kml-banner { width: 996px; }\");o+=\"</style>\",document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",o),\"DESKTOP\"!==t.device||\"Classique avec CTA\"!==e.creation.type&&\"Coupon avec CTA\"!==e.creation.type||(i='<a href=\"'+e.creation.link+'\" class=\"kml-cta\">'+e.creation.cta_text+\"</a>\");n=\"DESKTOP\"===t.device?e.creation.url_image_desktop:e.creation.url_image_mobile;\"DESKTOP\"===t.device&&\"Coupon avec CTA\"===e.creation.type&&(a='<div class=\"kml-coupon\">'+e.creation.coupon+\"</div>\");var r='\\t\\t\\t\\t<div id=\"kml-gigabanner\" style=\"background: -webkit-'+e.creation.color+\"; background: \"+e.creation.color+'\">\\t\\t\\t\\t\\t<div class=\"kml-banner\">',d=\"\";\"Oui\"===e.creation.newTab&&(d='target=\"_blank\"');var l=e.creation.alt_seo||\"\";e.creation.link?r+='\\t\\t\\t\\t\\t<a href=\"'+e.creation.link+'\" '+d+'>\\t\\t\\t\\t\\t\\t<img alt=\"'+l+'\" src=\"'+KML.CDN.images+\"/visuels\"+n+'\">\\t\\t\\t\\t\\t</a>':r+='<img alt=\"'+l+'\" src=\"'+KML.CDN.images+\"/visuels\"+n+'\">';r+=i+a+\"\\t\\t\\t\\t\\t</div>\\t\\t\\t\\t</div>\",Kameleoon.API.Core.runWhenElementPresent('[data-hypernova-key=\"Header\"], #header, header[data-qa=\"header\"]',(function(n){document.querySelector(\"#kml-gigabanner\")&&document.querySelector(\"#kml-gigabanner\").remove(),\"SUPER_BOUTIQUE\"===t.pageType&&\"DESKTOP\"===t.device||\"MOBILE\"!==t.device||\"SEARCH\"!==t.pageType&&t.pageType,document.getElementById(\"kmlBottomBanner\").innerHTML=r,KML.sendAtPublisherTag(e,\"impression\",\"Gigabanner\"),document.querySelector(\"#kml-gigabanner\").addEventListener(\"click\",(function(){KML.sendAtPublisherTag(e,\"click\",\"Gigabanner\")}))}))}(n)}(n),function(e){if(![\"FP\"].includes(t.pageType))return;var n=KML.getFilteredCampaigns(e.topProductSentence);if(KML.log(n),!n)return;!function(t){var e='<style class=\"KML-sentence\">\\t\\t\\t#kml-merchandisingText {\\t\\t\\t\\tmargin: 12px 0 0 0;\\t\\t\\t}\\t\\t\\t#kml-merchandisingText a {\\t\\t\\t\\ttext-decoration: none;\\t\\t\\t\\tcolor: black;\\t\\t\\t}\\t\\t\\t</style>';document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",e);var n='<div id=\"kml-merchandisingText\">';t.creation.text&&(n+='<a href=\"'+t.creation.link+'\">'+KML.formatText(t.creation.text)+\"</a>\");n+=\"</div>\",Kameleoon.API.Core.runWhenElementPresent(\"#prdTitleBlock .dspflexGen\",(function(e){document.getElementById(\"kml-merchandisingText\")||e[0].insertAdjacentHTML(\"beforebegin\",n),KML.sendAtPublisherTag(t,\"impression\",\"PhraseFicheProduit\"),document.querySelector(\"#kml-merchandisingText a\").addEventListener(\"click\",(function(){KML.sendAtPublisherTag(t,\"click\",\"PhraseFicheProduit\")}))}))}(n)}(n),function(n){if(\"SUPER_BOUTIQUE\"===t.pageType||\"MOBILE\"===t.device||document.querySelector('[data-hypernova-key=\"EshopHeader\"]'))return;var i=KML.getFilteredCampaigns(n.habillage);if(KML.log(i),!i)return document.querySelector(\"body\").classList.remove(\"widthSideBanners-U\"),document.querySelector(\"body\").style.backgroundImage=\"none\",void pushDFPhabillage();window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(t){(\"Oui\"===i.creation.withConsent&&t.getUserConsentStatusForVendor(\"google\")||\"Non\"===i.creation.withConsent)&&(\"H\"===i.creation.type?(document.querySelector(\"body\").classList.remove(\"widthSideBanners-U\"),document.querySelector(\"body\").classList.remove(\"widthSideBanners-H\"),document.querySelector(\"body\").style.backgroundImage=\"none\",function(t){var n='<style class=\"KML-habillage\">\\t\\t\\t\\t.kml-sideBanner {\\t\\t\\t\\t\\tposition: absolute;\\t\\t\\t\\t\\ttop: 0;\\t\\t\\t\\t\\twidth: 150px;\\t\\t\\t\\t\\theight: 100%;\\t\\t\\t\\t\\tdisplay: block;                    background: rgb(240,240,240);\\t\\t\\t\\t\\topacity: 0;\\t\\t\\t\\t\\tz-index: 1;\\t\\t\\t\\t}\\t\\t\\t\\t.kml-sideBanner.opened {\\t\\t\\t\\t\\topacity: 1;\\t\\t\\t\\t}\\t\\t\\t\\t.kml-sideBanner.left {\\t\\t\\t\\t\\tleft: -150px;\\t\\t\\t\\t\\tpadding: 0 !important;\\t\\t\\t\\t}\\t\\t\\t\\t@media screen and (max-width: 1665px) and (min-width: 1530px) {\\t\\t\\t\\t\\tbody.nav #main {\\t\\t\\t\\t\\t\\tmax-width: 1181px !important;\\t\\t\\t\\t\\t}\\t\\t\\t\\t\\t#my_account .KML-flex-wrapper {\\t\\t\\t\\t\\t\\tmax-width: 1196px !important;\\t\\t\\t\\t\\t}\\t\\t\\t\\t}\\t\\t\\t\\t.kml-sideBanner.right {\\t\\t\\t\\t\\tright: -150px;\\t\\t\\t\\t\\tpadding: 0 !important;\\t\\t\\t\\t}\\t\\t\\t  .kml-sideBanner.left img {\\t\\t\\t\\t\\tright: 0;\\t\\t\\t\\t\\tposition: absolute;\\t\\t\\t\\t}\\t\\t\\t  .kml-sideBanner.right img {\\t\\t\\t\\t\\tleft: 0;\\t\\t\\t\\t\\tposition: absolute;\\t\\t\\t\\t}\\t\\t\\t\\t.fpV3 .kml-sideBanner.left, main.structure_content-main > section .kml-sideBanner.left, #__next .kml-sideBanner.left {\\t\\t\\t\\t\\tleft: 0;\\t\\t\\t\\t}\\t\\t\\t\\t.fpV3 .kml-sideBanner.right, main.structure_content-main > section .kml-sideBanner.right, #__next .kml-sideBanner.right {\\t\\t\\t\\t\\tright: 0;\\t\\t\\t\\t}\\t\\t\\t\\tbody.fpV3.widthkml-sideBanners-H #main, body.widthkml-sideBanners-H #page_nav, #__next div[data-kml=\"kml_marker\"] {\\t\\t\\t\\t\\tpadding: 0 150px !important;\\t\\t\\t\\t\\tposition: relative;\\t\\t\\t\\t\\tmax-width: none !important;\\t\\t\\t\\t}\\t\\t\\t\\t#__next div[data-kml=\"kml_marker\"] {\\t\\t\\t\\t\\tbackground-color: rgb(240, 240, 240) !important;    \\t\\t\\t\\tz-index: 0;\\t\\t\\t\\t}\\t\\t\\t\\t#__next div[data-kml=\"kml_marker\"] > .grid_row {\\t\\t\\t\\t\\tbackground-color: white;\\t\\t\\t\\t}\\t\\t\\t\\tbody.widthkml-sideBanners-H #struct_full, body.widthkml-sideBanners-H #main, #struct_page .KML-flex-wrapper {\\t\\t\\t\\t\\tposition: relative;\\t\\t\\t\\t\\tbackground: white;\\t\\t\\t\\t}\\t\\t\\t\\thtml body.widthkml-sideBanners-H.nav #siteBody.siteBody, html body.widthkml-sideBanners-H main.structure_content-main > section {\\t\\t\\t\\t\\tbackground-color: rgb(240,240,240) !important;\\t\\t\\t\\t}\\t\\t\\t\\tbody.widthkml-sideBanners-H #struct_page {\\t\\t\\t\\t\\tbackground-color: rgb(240,240,240) !important;\\t\\t\\t\\t}\\t\\t\\t\\tmain.structure_content-main > section .kml-sideBanner, #__next .kml-sideBanner{\\t\\t\\t\\t\\ttop: 211px;\\t\\t\\t\\t}\\t\\t\\t\\thtml body.widthkml-sideBanners-H main.structure_content-main #page_nav > div {\\t\\t\\t\\t\\tbackground-color: white !important;\\t\\t\\t\\t\\tpadding-left: 7px;\\t\\t\\t\\t}\\t\\t\\t\\thtml body.widthkml-sideBanners-H #header {\\t\\t\\t\\t\\tbackground-color: white;\\t\\t\\t\\t}\\t\\t\\t</style>';document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",n);var i=new Event(\"displaykml-sideBanners-H\");function a(n){window.innerWidth>=1530&&!document.querySelector(\"body\").classList.contains(\"widthkml-sideBanners-H\")&&!document.querySelector(\"body\").classList.contains(\"widthkml-sideBanners-U\")?(document.querySelector(\"body\").classList.add(\"widthkml-sideBanners-H\"),n.insertAdjacentHTML(\"afterbegin\",'\\t\\t\\t\\t\\t\\t<a data-role=\"none\" href=\"'+t.creation.link+'\" target=\"_blank\" class=\"kml-sideBanner left\"><img src=\"'+KML.CDN.images+\"/visuels\"+t.creation.url_image_desktop_gauche+'\" /></a>\\t\\t\\t\\t\\t\\t<a data-role=\"none\" href=\"'+t.creation.link+'\" target=\"_blank\" class=\"kml-sideBanner right\"><img src=\"'+KML.CDN.images+\"/visuels\"+t.creation.url_image_desktop_droite+'\" /></a>'),document.dispatchEvent(i),document.querySelector(\".kml-sideBanner.left\").addEventListener(\"click\",(function(){KML.sendAtPublisherTag(t,\"click\",\"Habillage-H\")})),document.querySelector(\".kml-sideBanner.right\").addEventListener(\"click\",(function(){KML.sendAtPublisherTag(t,\"click\",\"Habillage-H\")})),document.querySelector(\".kml-sideBanner.left\").classList.add(\"opened\"),document.querySelector(\".kml-sideBanner.right\").classList.add(\"opened\"),t.creation.trackingUrl&&e(t.creation.trackingUrl),KML.sendAtPublisherTag(t,\"impression\",\"Habillage-H\")):window.innerWidth<1530&&(document.querySelector(\"body\").classList.remove(\"widthkml-sideBanners-H\"),document.querySelector(\".kml-sideBanner\")&&document.querySelectorAll(\".kml-sideBanner\").forEach((function(t){t.remove()}))),dataLayer=dataLayer||[],dataLayer.push({event:\"habillagePushed\"})}Kameleoon.API.Core.runWhenElementPresent(\"body:not(.nav) #main, .KML-flex-wrapper, main.structure_content-main > section, #__next\",(function(t){document.querySelector(\".kml-sideBanner\")&&(document.querySelector(\".kml-sideBanner.left\").remove(),document.querySelector(\".kml-sideBanner.right\").remove(),document.querySelector(\"body\").classList.remove(\"widthkml-sideBanners-H\")),a(t[0])})),window.addEventListener(\"resize\",KML.throttle((function(t){a(document.querySelector(\"body:not(.nav) #main, .KML-flex-wrapper, #page_nav\"))}),500)),window.addEventListener(\"initStickyPub\",(function(){a(document.querySelector(\"body:not(.nav) #main, .KML-flex-wrapper, #page_nav\"))}))}(i)):\"U\"===i.creation.type&&(document.querySelector(\"body\").classList.remove(\"widthSideBanners-U\"),document.querySelector(\"body\").classList.remove(\"widthSideBanners-H\"),function(t){var n='<style class=\"KML-habillage\">\\t\\t\\t\\thtml {\\t\\t\\t\\t\\tcursor: pointer;\\t\\t\\t\\t\\tbackground: none !important;\\t\\t\\t\\t}\\t\\t\\t\\thtml body.widthSideBanners-U {\\t\\t\\t\\t\\tmax-width: 1231px !important;\\t\\t\\t\\t\\tmargin: 99px auto 0 auto !important;\\t\\t\\t\\t\\tcursor: default;\\t\\t\\t\\t\\tbackground-position: center 0;\\t\\t\\t\\t\\tbackground-repeat: no-repeat;\\t\\t\\t\\t\\tbackground-attachment: fixed;\\t\\t\\t\\t}\\t\\t\\t\\t#productPageStickyHeader {\\t\\t\\t\\t\\tleft: 0;\\t\\t\\t\\t}\\t\\t\\t\\t.hp--categories--bloc-img {\\t\\t\\t\\t\\twidth: 120px !important;\\t\\t\\t\\t\\theight: 120px !important;\\t\\t\\t\\t}\\t\\t\\t</style>';document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",n);var i=new Event(\"displaykml-sideBanners-H\");function a(n){window.innerWidth>=1439&&!n.classList.contains(\"widthSideBanners-U\")&&!n.classList.contains(\"widthkml-sideBanners-H\")?(n.classList.add(\"widthSideBanners-U\"),n.style.backgroundImage=\"url(\"+KML.CDN.images+\"/visuels\"+t.creation.url_image_desktop+\")\",document.dispatchEvent(i),document.querySelector(\"html\").addEventListener(\"click\",o),t.creation.trackingUrl&&e(t.creation.trackingUrl),KML.sendAtPublisherTag(t,\"impression\",\"Habillage-U\")):window.innerWidth<1439&&(n.classList.remove(\"widthSideBanners-U\"),n.backgroundImage=\"none\",document.querySelector(\"html\").removeEventListener(\"click\",o)),dataLayer=dataLayer||[],dataLayer.push({event:\"habillagePushed\"})}function o(e){\"HTML\"===e.target.tagName&&(window.open(t.creation.link,\"_blank\"),KML.sendAtPublisherTag(t,\"click\",\"Habillage-U\"))}Kameleoon.API.Core.runWhenElementPresent(\"body:not(.shopPro)\",(function(t){a(t[0])})),window.addEventListener(\"resize\",KML.throttle((function(t){a(document.querySelector(\"body:not(.shopPro)\"))}),500)),window.addEventListener(\"initStickyPub\",(function(){a(document.querySelector(\"body:not(.shopPro)\"))}))}(i)))}))}(n),function(e){if(\"MOBILE\"===t.device||\"SELL\"===t.pageType)return;var n=KML.getFilteredCampaigns(e.header_onglet);if(!n)return;!function(t){var e='<style class=\"KML-onglet\">\\t\\t\\t\\t#kml-onglet {\\t\\t\\t\\t\\tmargin: 0 0 0 20px;\\t\\t\\t\\t\\twidth: 190px;\\t\\t\\t\\t\\tdisplay: inline-block;\\t\\t\\t\\t}\\t\\t\\t\\t#jahiaOnglet, .header_jahia_3Km {\\t\\t\\t\\t\\tdisplay: none;\\t\\t\\t\\t}\\t\\t\\t</style>';document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",e);var n='\\t\\t\\t\\t<a data-role=\"none\" id=\"kml-onglet\" href=\"'+t.creation.link+'\">\\t\\t\\t\\t\\t<img alt=\"'+t.name+'\" src=\"'+KML.CDN.images+\"/visuels\"+t.creation.url_image_desktop+'\" />\\t\\t\\t\\t</a>';Kameleoon.API.Core.runWhenElementPresent(\"header > div:first-child\",(function(e){document.querySelector(\"#kml-onglet\")||(e[0].insertAdjacentHTML(\"beforeend\",n),KML.sendAtPublisherTag(t,\"impression\",\"Onglet\"),document.querySelector(\"#kml-onglet\").addEventListener(\"click\",(function(){KML.sendAtPublisherTag(t,\"click\",\"Onglet\")})))}))}(n)}(n)}))}),!0)}Kameleoon.API.Core.runWhenConditionTrue((()=>\"function\"==typeof window.KML.getAsyncDataLayer),(()=>{initMerchandisingCampaign()}));var kmlTempo=!0;function pushDFPhabillage(){KML.getAsyncDataLayer((function(t){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.getUserConsentStatusForVendor(\"google\")&&Kameleoon.API.Core.runWhenElementPresent(\"body\",(function(){document.querySelector(\"body\").insertAdjacentHTML(\"beforeend\",'<div id=\"KML-habillage-dfp\" style=\"width: 1px; height: 1px\"></div>'),window.googletag=window.googletag||{cmd:[]},googletag.cmd.push((function(){if(window.innerWidth>=1530){var e=googletag.defineSlot(\"57948771/Priceminister_FR/toutes_les_pages/toutes_les_pages_habillage\",[1,1],\"KML-habillage-dfp\").addService(googletag.pubads());KML.asyncDFPsetTargeting([e],t),googletag.enableServices(),googletag.display(\"KML-habillage-dfp\")}}))}))}))}))}window.addEventListener(\"ReloadProductListNS\",(function(){kmlTempo&&(initMerchandisingCampaign(),kmlTempo=!1),setTimeout((function(){kmlTempo=!0}),2e3)}));","afterDOMReady":false}},{"name":"Variante 1","id":332171,"css":"","elementSets":[],"javaScriptCode":{"code":"KML.getAdvertsList((function(e){e.forEach((function(e){try{\"Chapitre-lib\"===e.login&&(e.elem.querySelector(\"button.buttonPickup span\").innerText=\"Retrait gratuit\",e.elem.querySelector(\".clickCollectShipping p\").innerHTML=\"<strong>Disponible</strong> en retrait gratuit en magasin\")}catch(e){}try{\"Gibert-LivresNeufs\"!==e.login&&\"GibertJoseph\"!==e.login||(e.elem.querySelector(\"button.buttonPickup span, .ui-mobile .clickncollectButton span.label\").innerText=\"Retrait gratuit en 48h\",e.elem.querySelector(\".clickCollectShipping p\").innerHTML=\"<strong>Disponible</strong> en retrait gratuit en 48h en magasin\")}catch(e){}}))}));","afterDOMReady":false}},{"name":"Variante 1","id":340042,"css":"","elementSets":[],"javaScriptCode":{"code":"function initBrandsSearch(){document.querySelector(\".structure_wrapper-global\")&&KML.getAsyncDataLayer((function(t){KML.loadJSONbyName(\"brandsSearch\",(function(e){var r=e.find((function(e){return e.searchableName===t.keyword}));if(r){document.querySelector(\"#kml-customized-shop-css\")||document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",'<style id=\"kml-customized-shop-css\">\\t\\t\\t\\t\\t.sellerShop_seller_2jR, .sellerShop_seller_2jR + div.b--light-gray {\\t\\t\\t\\t\\t\\tdisplay: none;\\t\\t\\t\\t\\t}\\t\\t\\t\\t</style>');var o=\"\\t\\t\\t\\t\\t\\tbackground-image: url(\"+r.imageUrl+\");\\t\\t\\t\\t\\t\\tbackground-position: 12px 12px;\\t\\t\\t\\t\\t\\tbackground-size: 40px;\\t\\t\\t\\t\\t\\tbackground-repeat: no-repeat;\";try{document.querySelector(\"#kml-customized-shop\").remove()}catch(t){}document.querySelector(\"h1\").parentElement.insertAdjacentHTML(\"afterend\",'\\t\\t\\t\\t\\t\\t<div id=\"kml-customized-shop\" class=\"db bt b--light-gray\">\\t\\t\\t\\t\\t\\t\\t<div class=\"f6 pv-16 pl-64 sellerShop_storeName_3Ao\" style=\"'+o+'\">\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"b\">'+r.name+\"</span><br/>\\t\\t\\t\\t\\t\\t\\t\\t<span>\"+r.description+'.</span> <a class=\"black underline\" href=\"/boutique/'+r.sellerLogin+'\">Découvrez-là</a>\\t\\t\\t\\t\\t\\t\\t</div>\\t\\t\\t\\t\\t\\t</div>')}else{try{document.querySelector(\"#kml-customized-shop\").remove()}catch(t){}try{document.querySelector(\"#kml-customized-shop-css\").remove()}catch(t){}}}))}),!0)}window.addEventListener(\"ReloadProductListNS\",(function(){initBrandsSearch()}));","afterDOMReady":false}},{"name":"Variante 1","id":346721,"css":".kmlNps{padding:26px 23px 26px 74px!important;background-color:#f7f7f7!important;border-radius:3px!important;background-repeat:no-repeat!important;background-position:20px 40px!important;background-image:url('https://fr.shopping.rakuten.com/visuels/0_content_square/autres/ic_campaign_nps.svg')!important;background-repeat:no-repeat!important;background-position:20px 40px!important;width:327px;margin-top:20px;margin-bottom:90px}.nps__header .titre{color:#4a4a4a!important;font-size:14px!important;font-weight:600!important;line-height:19px!important}.nps__header .content{color:#4a4a4a!important;font-size:12px!important;line-height:14px!important;margin-top:3Px!important}.kmlNps .notes{margin-top:8px!important;display:flex!important;align-items:center!important;justify-content:space-between!important}.kmlNps .notes .note{height:27px!important;width:34px!important;border-radius:4px!important;background-color:#fff!important;box-shadow:0 2px 4px 0 rgba(74,74,74,.2)!important;color:#000!important;font-size:14px!important;font-weight:700!important;line-height:19px!important;text-align:center!important;outline:0!important;border:0!important;cursor:pointer!important}.kmlNps .notes .note:hover{transform:scale(1.1);transition:.2s ease-out all}.Kml__kmlNps{padding:16px 63px 16px 74px!important;background-color:#f7f7f7!important;border-radius:3px!important}.Kml__Nps__header__titre{color:#4a4a4a!important;font-size:14px!important;font-weight:600!important;line-height:19px!important}.Kml__Nps__header__content{color:#4a4a4a!important;font-size:10px!important;line-height:14px!important;margin-top:3Px!important}.Kml__Nps__test{overflow:hidden!important}.Kml__Nps__notes{margin-top:8px!important;display:flex!important;align-items:center!important;justify-content:space-between!important}.Kml__Nps__notes .note{height:27px!important;width:34px!important;border-radius:4px!important;background-color:#fff!important;box-shadow:0 2px 4px 0 rgba(74,74,74,.2)!important;color:#000!important;font-size:14px!important;font-weight:700!important;line-height:19px!important;text-align:center!important;outline:0!important;border:0!important}","elementSets":[],"javaScriptCode":{"code":"var npsKml=function(){function e(e){var t=KML.getDataLayer(),n=e.getAttribute(\"value\"),r=!1;try{r=r||t.user_id}catch(e){}var c=!1;try{c=c||t.rsp_pgs_status.split(\"|\")[0].trim().toUpperCase()}catch(e){}var a=!1;try{a=a||\"SUBSCRIBED\"===t.clubMemberStatus?1:0}catch(e){}if(console.log(n,r,c,a),console.log(\"clicked\",e),n&&r&&a&&c){var o=`https://www.surveygizmo.com/s3/4757920/NPS-L1?scoreNPS=${n}&userid=${r}&pgsrank=${c}&template=NPS_CONF_PAGE&club=${a}`;window.open(o,\"_blank\").focus()}}!function(){var t=KML.getDataLayer();if(!t)return!1;if(\"PART\"!=t.userType)return!1;var n=function(){var e=!1;try{e=e||document.querySelector(\"#checkout_continue_navigation\"),document.querySelector(\"#checkout_continue_navigation\").innerHTML=\"\"}catch(e){}return e}();if(!n)return!1;let r=function(e){var t=document.createElement(\"div\");t.classList.add(\"kmlNps\"),t.innerHTML='<div class=\"nps__header\"><p class=\"titre\">Recommanderiez-vous Rakuten à vos proches ?</p><p class=\"content\">0 = Pas du tout probable, 10 = Très probable</p></div><div class=\"notes\"></div>',e.insertAdjacentElement(\"beforeend\",t);let n=!1;try{n=n||t.querySelector(\".notes\")}catch(e){}return n}(n);if(!r)return!1;!function(t){for(let n=-1;n<10;n++){let r=document.createElement(\"button\");r.classList.add(\"note\"),r.setAttribute(\"value\",n+1),r.innerText=n+1,r.addEventListener(\"click\",(function(){e(r)})),t.append(r)}t.querySelectorAll(\".note\").length}(r)}()};npsKml();","afterDOMReady":true}},{"name":"Variante 1","id":356234,"css":"[for=useBankCard] .svg-icon-cadoArte{display:none!important}.shopPro .navModV2 .scrolling_menu{padding:0!important}.ui-mobile-viewport .product_container .categories{padding-top:0!important}","elementSets":[]},{"name":"Variante 1","id":364057,"css":"","elementSets":[],"javaScriptCode":{"code":"KML&&(KML.openFeedbackModale=function(e){KML.feedback={},KML.feedback.label=e;var t=document.createElement(\"script\");t.src=KML.CDN.statics+\"/visuels/0_content_square/feedbacks/script.js\",t.type=\"text/javascript\",t.id=\"kml-feedback-script\",document.querySelector(\"head\").insertAdjacentElement(\"beforeend\",t)},document.addEventListener(\"DOMContentLoaded\",(()=>{initFeedbackButton(),location.hash.includes(\"feedback\")&&KML&&KML.openFeedbackModale(\"Via URL\")})),KML.initFeedbackButton=function(){document.querySelector(\"[data-feedback]\")&&KML&&document.querySelector(\"[data-feedback]\").addEventListener(\"click\",(function(e){e.preventDefault(),KML.openFeedbackModale(this.dataset.label)}))});","afterDOMReady":true}},{"name":"Variante 1","id":370236,"css":".seller-warranties__warranty>div>label{color:#000!important}","elementSets":[],"javaScriptCode":{"code":"document.querySelectorAll(\".seller-warranties__warranty > div > label\").forEach((function(e){e.innerText=\"Sélectionner\"}));","afterDOMReady":true}},{"name":"Variation 1","id":425628,"css":"#kameleoonId1034600,[data-kameleoon-id=\"1034600\"]{display:none!important}header div[class*=geoLoc-module_location]{display:none!important}#header.header #geolocMarkerCtn{display:none}header .toggleGeolocMarker{display:none}","elementSets":[{"selector":"#searchField","options":{"idSelector":true,"selector":"#searchField"},"currentQuery":null},{"selector":"#PageForm > div:nth-of-type(2) > div:nth-of-type(2) > div:first-child > div:first-child","options":{"kameleoonId":1034600,"autoGeneratedSelector":true,"selector":"#kameleoonId1034600, [data-kameleoon-id=\"1034600\"]"},"currentQuery":"#PageForm > div:nth-of-type(2) > div:nth-of-type(2) > div:first-child > div:first-child"}]},{"name":"Variation 1","id":445128,"css":".godfatherBanner-desk{margin-top:8px}","elementSets":[],"javaScriptCode":{"code":"$j(document).ready((function(){$j(\"#dashboard\").before('<a href=\"/offre-parrainage-rakuten\"><img class=\"godfatherBanner-desk\" src=\"https://fr.shopping.rakuten.com/visuels/0_Kameleoon/images/0_kameleoon-buy/godfather-banner.svg\" alt=\"banner\" /></a>')}));","afterDOMReady":false}},{"name":"Variation 1","id":469757,"css":"html body.shopPro div #header{z-index:1000}","elementSets":[],"javaScriptCode":{"code":"var elem=document.querySelector(\"body.shopPro\");if(elem){var siteBody=document.querySelector(\"#siteBody\");siteBody&&siteBody.style.setProperty(\"padding\",\"118px 0 0 0\",\"important\")}","afterDOMReady":true}},{"name":"Variation 1","id":493895,"css":".kml-coronavirus-info-header{text-align:center;color:#fff;font-size:14px;animation:kml-slidedown .5s ease;height:auto;padding:6px;display:block;text-decoration:none;cursor:default}a.kml-coronavirus-info-header{cursor:pointer;color:#fff;font-style:normal}.kml-coronavirus-info-header.a:hover{text-decoration:none}.kml-coronavirus-info-header span,.kml-coronavirus-info-header strong{color:#fff!important;text-decoration:underline!important}.kml-coronavirus-info-header img{vertical-align:middle;margin-right:8px;top:-1px;position:relative}@keyframes kml-slidedown{from{height:0;padding:0;opacity:0}to{height:auto;padding:8px;opacity:1}}@media all and (max-width:640px){.kml-coronavirus-info-header img{vertical-align:-2px;margin-right:4px;top:-2px;position:relative;width:13px}.kml-coronavirus-info-header{font-size:11px;line-height:13px}}#appStoreBanner{display:none}","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenElementPresent('#panel_head, #header, .structure_wrapper-global, header[data-qa=\"header\"]',(function(){if(!document.querySelector(\".kml-coronavirus-info-header\")){document.getElementById(\"kmlTopBanner\").innerHTML='<a style=\"background: #C10001;\" target=\"_blank\" href=\"/buyers/giftcard#xtatc=PUB-[PMC]-[H]-[bandeau]-[html]-[carte-cadeau]-[]-[]\" class=\"kml-coronavirus-info-header\">\\n      <img height=\"16\" title=\"\" alt=\"\" src=\"https://fr.shopping.rakuten.com/visuels/0_vis-fo/giftcard/picto-cartecadeau.png\" />\\n      Nouveau ! Gagnez du cashback sur vos bons d\\'achats et cartes-cadeaux : Airbnb, Zalando, Leroy Merlin... \\n  <span> Je découvre</span></a>'}}));","afterDOMReady":false}},{"name":"Variation 1","id":514877,"css":"","elementSets":[],"javaScriptCode":{"code":"document.querySelectorAll(\"p, span, b, strong\").forEach((e=>{(e.innerHTML.includes(\"PriceMinister\")||e.innerHTML.includes(\"PriceMinister - Rakuten\")||e.innerHTML.includes(\"Priceminister\"))&&(e.innerHTML=e.innerHTML.replace(/(PriceMinister)|(PriceMinister - Rakuten)|(Priceminister - Rakuten)|(Priceminister)|(Rakuten - PriceMinister)/g,\"Rakuten\")),e.innerHTML.includes(\"Superpoints\")&&(e.innerHTML=e.innerHTML.replace(/(Superpoints)/g,\"Points\"))}));","afterDOMReady":true}},{"name":"Variation 1","id":520779,"css":"html body.shopPro.components_v2 #siteBody #main.main{margin-top:60px!important}","elementSets":[]},{"name":"Variation 1","id":551299,"css":"","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenElementPresent('.rc-tooltip a[href=\"/connect?action=register&proform=true\"]',(()=>{document.querySelector('.rc-tooltip a[href=\"/connect?action=register&proform=true\"]').innerHTML='\\n\\t\\t<span class=\"db lh-title\">Je suis un commerçant</span>\\n\\t\\t<small class=\"silver f12 db lh-title\">J\\'ouvre un e-shop</small>',document.querySelector(\".kameleoon-tooltip-vendre\")||document.querySelector('.rc-tooltip a[href=\"/connect?action=register&proform=true\"]').insertAdjacentHTML(\"afterend\",'\\n\\t\\t\\t<a class=\"kameleoon-tooltip-vendre dark-gray no-underline db hover-bg-light-gray tooltip_line_3zq\" href=\"https://global.fr.shopping.rakuten.com/\">Conseils pour les commerçants</a>'),document.querySelector('.rc-tooltip a[href=\"/v/vendre\"]').innerHTML='\\n\\t\\t<span class=\"db lh-title\">Vendre un produit en tant que particulier</span>\\n\\t\\t<small class=\"silver f12 db lh-title\">Je dépose une annonce gratuitement</small>',document.querySelector('.rc-tooltip a[href=\"/v/vendre\"]').classList.remove(\"blue\"),document.querySelector('.rc-tooltip a[href=\"/v/vendre\"]').classList.add(\"dark-gray\"),document.querySelector('.rc-tooltip a[href=\"/evt/astuces_vendeur\"]').innerHTML=\"Astuces vendeurs particuliers\"}));","afterDOMReady":false}},{"name":"Variation 1","id":563906,"css":"","elementSets":[],"javaScriptCode":{"code":"KML=KML||{},KML.madTest=1;","afterDOMReady":false}},{"name":"Variation 2","id":563911,"css":"","elementSets":[],"javaScriptCode":{"code":"KML=KML||{},KML.madTest=2;","afterDOMReady":false}},{"name":"Variation 3","id":563912,"css":"","elementSets":[],"javaScriptCode":{"code":"KML=KML||{},KML.madTest=3;","afterDOMReady":false}},{"name":"Variation 1","id":580729,"css":"#mobileBanner{display:none}","elementSets":[]},{"name":"Variation 1","id":624205,"css":"","elementSets":[],"javaScriptCode":{"code":"function hiddenDescriptionRefurbish(){document.querySelector(\".buyBoxBlock .refurbishedWarrantyEncart\")&&(document.querySelector(\".descriptionSellerLink\").style.display=\"none\",document.querySelector(\".descriptionSeller\").style.display=\"none\");for(var e=document.querySelectorAll(\"#prdListingV2 .refurbishedWarrantyEncart\"),n=0;n<e.length;n++)e[n].nextElementSibling.nextElementSibling.style.display=\"none\",e[n].nextElementSibling.style.display=\"none\"}document.addEventListener(\"ProductPage|ReloadAjaxSuccess\",(function(e){hiddenDescriptionRefurbish()})),KML.getAdvertsList((function(e){hiddenDescriptionRefurbish()}));","afterDOMReady":false}},{"name":"Variation 1","id":625885,"css":"","elementSets":[],"javaScriptCode":{"code":"function hiddenDescriptionRefurbishMobile(){document.querySelector(\".advertItem #refurbishedEncartProgramTarget\")&&(document.querySelector(\".moreDetails \").style.display=\"none\"),document.querySelector(\".itemInfoZoom #refurbishedEncartProgramTarget2\")&&(document.querySelector(\".itemInfoZoom .moreDetails \").style.display=\"none\")}document.addEventListener(\"ProductPage|ReloadAjaxSuccess|Mobile\",(function(e){hiddenDescriptionRefurbishMobile()})),KML.getAdvertsList((function(e){hiddenDescriptionRefurbishMobile()}));","afterDOMReady":false}},{"name":"Variation 1","id":629414,"css":".kml-refurbished{font-size:15px;padding:15px 23px;box-shadow:0 0 6px #0000002e;display:inline-block;margin-bottom:16px;border-radius:4px;color:#333;position:relative}.kml-refurbished span{color:#5fd95f;font-weight:700}.kml-refurbished:hover{text-decoration:none}.kml-tag-new{position:absolute;background-color:#5fd95f;color:#fff;padding:0 5px;top:-10px;left:-5px;font-style:normal;border-radius:3px;font-size:10px}.kml-chevron{width:21px;height:15px;display:inline-block;margin-left:5px;transform:rotate(-90deg) translate(-5px,0)}.kml-mobile-tag{position:absolute;background-color:#5fd95f;color:#fff;padding:0 5px;top:-10px;left:7px;font-style:normal;border-radius:3px;font-size:10px;z-index:10}.controlgroup.adv_filter li[value=refurbished]{position:relative}","elementSets":[],"javaScriptCode":{"code":"const f=()=>{let e=KML.getDataLayer(),t=!1,r=[];if(\"true\"==e.has_certified_refurbished_advert||\"false\"==e.has_certified_refurbished_advert)t=\"true\"==e.has_certified_refurbished_advert;else{r=[2333578946,2333749170,2333749201,2333749208,2897090024,3435254955,3435254958,3435254959,3435254960,3435254974,3435254975,3435254976,3435254979,3438311170,3438311172,3763435994,3763435996,3763435997,3763435999,3763436006,3763436008,3763436009,3764108850,3764108861,3764108863,3764572746,3977286131,4025981512,4025981519,4127563256,4127563260,4127563264,4127563276,4203109224,4203109225,4203109226,4203109229,4203109230,4203109231,4203109233,4203109238,4203109239,4203109247,4203109249,4207154505,4207154610,4245950545,4288573911,4566203550,4664531404,4664531405,4664531408,4664531411,4664531412,4664531414,4664531415,4672470559,4890304e3,4890757689,4890757691,2333578946,2333749213,2937213158,4203109235,4203109236,4203109257,4207154808,5313454698,5504650598,5504650602,5667337826,4049150286,4049150288,4049150295,4049150296,4049150297,4534754078,4664531410,4664531416,4665314710,2333749153,2333819154,2333819156,2333819167,2936682249,2937213150,3438311165];let i=location.search.match(/pid=([0-9]*)/)?location.search.match(/pid=([0-9]*)/)[1]:e.productID;t=r.includes(parseInt(i))}document.querySelector(\".kml-refurbished\")||\"DESKTOP\"!==e.device||location.search.indexOf(\"filter=40\")+1||!document.querySelectorAll(\".aspectSelector > .aspectFilter:not(.inactive)\").length||!t?!document.querySelector(\".kml-mobile-tag\")&&\"MOBILE\"===e.device&&r.includes(parseInt(productID))&&document.querySelector('.controlgroup.adv_filter li[value=\"refurbished\"]').insertAdjacentHTML(\"afterbegin\",'\\n\\t\\t\\t<i class=\"kml-mobile-tag\">GARANTI 2 ANS</i>\\n\\t\\t '):(document.querySelector(\"#prdSelectorsBlock\").insertAdjacentHTML(\"afterbegin\",'\\n\\t\\t\\t<a class=\"kml-refurbished\" href=\"#\" data-js=\"kml-refurbished\">\\n\\t\\t\\t\\t<i class=\"kml-tag-new\">NOUVEAU</i>\\n\\t\\t\\t\\t<span>Reconditionné Certifié</span> • Découvrez toutes nos offres reconditionnées garanties 2 ans ! <span class=\"iconCollaps svg-icon-chevron-down kml-chevron\"></span>\\n\\t\\t\\t</a>\\n\\t\\t  '),document.querySelector('[data-js=\"kml-refurbished\"]').addEventListener(\"click\",(e=>{e.preventDefault(),location.search.indexOf(\"filter\")+1?location.href=location.href.replace(/filter=[0-9]{2}/,\"filter=40\"):location.href=location.origin+location.pathname+location.search+(location.search?\"&\":\"?\")+\"filter=40\"+location.hash})))};f(),KML.getAdvertsList((e=>{f()}));","afterDOMReady":true}},{"name":"Variation 1","id":668874,"css":"","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenConditionTrue((function(){return window.fstrz}),(function(){KML.sendAtClickTag(\"trafic-fasterized\")}));","afterDOMReady":false}},{"name":"Variation 1","id":682096,"css":".sticky-container-right{width:100%;height:600px}#main_ctn,#panel_body{width:746px!important}.left-mid-container{max-width:1006px!important}","elementSets":[]},{"name":"Variation 1","id":682215,"css":"","elementSets":[],"javaScriptCode":{"code":"var patternUserAgentAPP=/BuyerApp/gi;if(!patternUserAgentAPP.test(window.navigator.userAgent)){let t=document.getElementsByTagName(\"head\")[0],e=document.createElement(\"script\");e.setAttribute(\"type\",\"text/javascript\"),e.setAttribute(\"src\",\"//static.queue-it.net/script/queueclient.min.js\"),t.appendChild(e),e=document.createElement(\"script\"),e.setAttribute(\"type\",\"text/javascript\"),e.setAttribute(\"src\",\"//static.queue-it.net/script/queueconfigloader.min.js\"),e.setAttribute(\"data-queueit-c\",\"rakuten\"),t.appendChild(e)}","afterDOMReady":false}},{"name":"Variation 1","id":683965,"css":".kml-modale{display:none;position:fixed;z-index:10000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4);animation-name:opacityTransition;animation-duration:.3s}.kml-modale.popin-newsletter .modal-content{max-width:420px}@keyframes opacityTransition{from{opacity:0}to{opacity:1}}.kml-modale .close{position:absolute;top:10px;right:10px;width:24px;height:24px;cursor:pointer}.kml-modale .modal-content{box-shadow:0 0 30px 0 rgba(0,0,0,.2);width:100%;max-width:600px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}.kml-modale .kml-modal-wrapper{padding:50px 30px 30px 30px;background:#fff;border-radius:5px}.kml-modale .kml-modal-wrapper .panel1,.kml-modale .kml-modal-wrapper .panel2{display:flex;flex-direction:column;align-items:center}.kml-modale .kml-modal-wrapper .panel2{display:none}.kml-modale .form{display:flex;width:100%;margin-bottom:30px}.kml-modale .form input{border-color:#d1d1d1;border-radius:.5rem;font-size:2rem;height:49px;border-style:solid;border-width:1px;flex-grow:1;padding:0 20px;font-size:14px}.kml-modale .title{text-align:center;max-width:310px;margin-bottom:10px}.kml-modale .title span{color:#bf0000}.kml-modale .picto{margin-bottom:20px}.kml-modale .subtitle{text-align:center;font-size:16px;max-width:330px;margin-bottom:30px}.kml-modale .conditions,.kml-modale .conditions a{font-size:12px;color:#9c9c9c!important}.kml-modale .form button{background-color:#bf0000;border-radius:3px;margin-left:10px;border:none;padding:0 20px;font-size:14px;color:#fff;cursor:pointer}.kml-modale .error{margin:-22px 0 30px 0;font-size:14px;color:red;display:none}@media screen and (max-width:900px){.kml-modale .modal-content{width:90%}.kml-modale .form button{height:44px;margin:13px 0 0 0}.kml-modale .form{flex-direction:column}}","elementSets":[],"javaScriptCode":{"code":"function pushOverlay(e,t){let n,o;o=\"DESKTOP\"===t.device?e.creation.url_image_desktop:e.creation.url_image_mobile,n=\"Popin newsletter\"===e.creation.type?'\\n\\t\\t\\t<div class=\"kml-modal-wrapper\"> \\n              <div class=\"panel1\"> \\n                  <img class=\"picto\" width=\"130\" src=\"https://fr.shopping.rakuten.com/visuels/0_content_square/emailing/email-10euros2.svg\" />\\n                  <h2 class=\"title\">Bénéficiez de <span>10€ de réduction</span> en vous abonnant à la newsletter !</h3>\\n                  <p class=\"subtitle\">Restez informé(e) des promotions, offres exclusives réservées aux membres, dernières sorties…</p>\\n                  <div class=\"form\"> \\n                      <input type=\"email\" placeholder=\"Adresse e-mail\" />\\n                      <button>S\\'abonner</button> \\n                  </div>\\n                  <p class=\"error\">Une erreur est survenue</p>\\n                  <p class=\"conditions\">Votre adresse électronique est utilisée par Rakuten France pour vous proposer des offres personnalisées par courriel. Pour en savoir plus sur la gestion de vos données personnelles et pour exercer vos droits, reportez-vous à notre <a href=\"https://fr.shopping.rakuten.com/newhelp/vie-privee-et-cookies/\" target=\"_blank\">Politique Vie privée</a>.<br/>10 euros offerts pour toute première commande de 59 euros minimum, hors frais de livraison. Coupon utilisable sur une seule et unique commande, non cumulable et valable pendant 30 jours à compter de votre inscription.</p>\\n              </div> \\n              <div class=\"panel2\">\\n                  <img class=\"picto\" width=\"130\" src=\"https://fr.shopping.rakuten.com/visuels/0_content_square/emailing/success.svg\" />\\n                  <h2 class=\"title\">Merci pour votre inscription !</h3>\\n                  <p class=\"subtitle\">Vous recevrez votre code de réduction par mail d’ici quelques minutes.</p>\\n              </div>\\n\\t\\t\\t</div>':'\\n\\t\\t\\t<a data-role=\"none\" target=\"_blank\" href=\"'+e.creation.link+'\">\\n\\t\\t\\t\\t<img width=\"100%\" alt=\"Image promotionnelle\" src=\"'+KML.CDN.images+\"/visuels\"+o+'\" />\\n\\t\\t\\t</a>';let s='\\n\\t\\t<div class=\"kml-modale '+e.creation.type.toLowerCase().replace(/ /g,\"-\")+'\">\\n\\t\\t\\t<div class=\"modal-content\">\\n\\t\\t\\t\\t<span class=\"close\">\\n\\t\\t\\t\\t\\t<svg viewBox=\"0 0 24 24\" class=\"\" fill=\"#777\" stroke=\"none\" stroke-width=\"1\"><g><title id=\"title\">icons / nav24 / close</title></g><g id=\"Symbols\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"icons-/-nav24-/-close\" fill=\"#777\"><g id=\"Icons-/-close-white\" transform=\"translate(4.000000, 4.000000)\"><path d=\"M13.6824394,0.281232507 C14.0557458,-0.0920738405 14.6588376,-0.0942312121 15.0307839,0.27771506 L15.7222849,0.969216131 C16.0936487,1.34057985 16.0899822,1.94634589 15.7187675,2.31756055 L10.036328,8 L15.7187675,13.6824394 C16.0920738,14.0557458 16.0942312,14.6588376 15.7222849,15.0307839 L15.0307839,15.7222849 C14.6594202,16.0936487 14.0536541,16.0899822 13.6824394,15.7187675 L8,10.036328 L2.31756055,15.7187675 C1.94425421,16.0920738 1.3411624,16.0942312 0.969216131,15.7222849 L0.27771506,15.0307839 C-0.0936486555,14.6594202 -0.0899821601,14.0536541 0.281232507,13.6824394 L5.96367195,8 L0.281232507,2.31756055 C-0.0920738405,1.94425421 -0.0942312121,1.3411624 0.27771506,0.969216131 L0.969216131,0.27771506 C1.34057985,-0.0936486555 1.94634589,-0.0899821601 2.31756055,0.281232507 L8,5.96367195 L13.6824394,0.281232507 Z\" id=\"Combined-Shape\"></path></g></g></g></svg>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t'+n+\"\\n\\t\\t\\t</div>\\n\\t\\t</div>\";document.querySelector(\"body\").insertAdjacentHTML(\"beforeend\",s);let i=document.querySelector(\".kml-modale\"),r=(i.querySelector(\".modal-content\"),document.querySelector(\".kml-modale .close\"));function l(){i.style.display=\"none\"}if(i.style.display=\"block\",r.addEventListener(\"click\",(function(e){e.preventDefault(),l()})),i.addEventListener(\"click\",(function(e){console.log(e.target.classList),e.target.classList.contains(\"kml-modale\")&&l()})),KML.sendAtPublisherTag(e,\"impression\",\"Overlay\"),\"Popin newsletter\"===e.creation.type){let t=document.querySelector(\".kml-modale .form button\"),n=document.querySelector(\".kml-modale .form input\");t.addEventListener(\"click\",(async function(){const t=await fetch(\"https://fr.shopping.rakuten.com/ws/contact/account\",{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:n.value})}).catch((function(){document.querySelector(\".kml-modale .error\").style.display=\"block\"})),o=await t.json();201===t.status?(document.querySelector(\".kml-modale .panel1\").style.display=\"none\",document.querySelector(\".kml-modale .panel2\").style.display=\"flex\",KML.sendAtPublisherTag(e,\"click\",\"Overlay\")):(document.querySelector(\".kml-modale .error\").style.display=\"block\",document.querySelector(\".kml-modale .error\").innerText=o.replace(\"This account already exists\",\"Un compte associé à cet email existe déjà\").replace(\"Cannot send email\",\"Impossible d'envoyer l'email\"))}))}else{document.querySelector(\".kml-modale a img\").addEventListener(\"click\",(async function(){KML.sendAtPublisherTag(e,\"click\",\"Overlay\")}))}}function initMerchandisingCampaign(){Kameleoon.API.Core.runWhenConditionTrue((()=>\"function\"==typeof window.KML.getAsyncDataLayer),(()=>{window.KML.getAsyncDataLayer((function(e){fetch(\"https://fr.shopping.rakuten.com/visuels/0_content_square/marketing/merchandising-campaigns/element_type_5.json\").then((function(e){return e.json()})).then((function(t){(t=KML.getFilteredCampaigns(t))&&pushOverlay(t,e)}))}))}))}initMerchandisingCampaign();var kmlTempo=!0;window.addEventListener(\"ReloadProductListNS\",(function(){kmlTempo&&(initMerchandisingCampaign(),kmlTempo=!1),setTimeout((function(){kmlTempo=!0}),2e3)}));","afterDOMReady":false}},{"name":"Variante 1","id":684268,"css":".crew-offer{font-size:16px;color:#bf0000;font-weight:700}.crew-offer span{font-size:14px;color:#333;font-weight:400}.crew-product #noAddToCart{display:none}.crew-product .sellerInfos{margin-top:8px}.crew-infos-taille{font-size:12px;color:#333;margin-top:10px}.modal-crew .puce{top:0!important}.crew-product.shopPro .modal-crew .modal--header{margin:40px!important}.crew-product.shopPro .modal-crew .modal--content--img{margin:-20px 0 0 0!important}.crew-product.fpV3 .modal-crew .modal--footer--CTA[data-js=signin],.crew-product.shopPro .modal-crew .modal--footer--CTA[data-js=signin]{background-color:#fff;color:#000;border-color:#fff}.crew-product.fpV3 .modal--footer,.crew-product.shopPro .modal--footer{margin-top:20px}.crew-product.fpV3 .modal-crew .encart-clubr--crew div:nth-child(2),.crew-product.shopPro .modal-crew .encart-clubr--crew div:nth-child(2){display:flex;flex-direction:column}.ui-mobile-viewport.crew-product .crew-cta{background:#bf0000;border:none;width:100%;text-align:center;padding:17px 0;color:#fff;font-weight:700;font-size:14px;border-radius:3px;cursor:pointer;display:flex;justify-content:center}.ui-mobile-viewport.crew-product .advertItem:not(.ListingMarketPlaceFP):not(.mainFP):not(.detailedAdvert) .seller,.ui-mobile-viewport.crew-product .cmplt_infos>p+p,.ui-mobile-viewport.crew-product .lemaireLaw,.ui-mobile-viewport.crew-product .priceClubBuyBox>a,.ui-mobile-viewport.crew-product .reco_offer>.header,.ui-mobile-viewport.crew-product a.sizeSlctBtn{display:none}.ui-mobile-viewport.crew-product .priceClubBuyBox{background-image:none!important}.ui-mobile-viewport.crew-product .crew-logo{margin-bottom:20px}.ui-mobile-viewport.crew-product .clubRLogo>.crew-logo{margin-bottom:inherit}.ui-mobile-viewport.crew-product .priceClubBuyBox>div:not(.crew-offer){display:none}@media screen and (max-width:768px){.order_detail_title{font-size:14px}.article_count{font-size:12px}}@media screen and (min-width:1058px) and (max-width:1200px){.shippingMode.buyBoxCta button.crew-cta>span{display:none}}@media screen and (min-width:1058px) and (max-width:1500px){.shippingMode.buyBoxCta button.crew-cta>div{font-size:12px}}@media screen and (min-width:1058px) and (max-width:1710px){.fpV3 .siteBody #main .prdBuyBox.versionA .rakutenClb[data-seller-name*=ClubR] .rakutenClb_card.rakutenClb_txtLight.buybox{padding-top:0!important}.fpV3 .siteBody #main .prdBuyBox.versionA .rakutenClb[data-seller-name*=ClubR] .rakutenClbAdvantages .clubLnk{flex-grow:2;flex-shrink:1}.fpV3 .siteBody #main .prdBuyBox.versionA .rakutenClb[data-seller-name*=ClubR] .rakutenClbAdvantages .rakutenClb_card.buybox{flex-grow:1;flex-shrink:3}.rakutenClb[data-seller-name*=ClubR] img.crew-logo{width:88%}.fpV3 .rakutenClb[data-seller-name*=ClubR] .clubLnk{padding:10px 8px 4px 8px!important}.fpV3 .rakutenClb[data-seller-name*=ClubR] .clubLnk>div{height:26px}}.v2_fpp_photo.v2_fpp_photo_nothing img{width:100%!important}","elementSets":[],"javaScriptCode":{"code":"!function(){function e(){if(document.querySelector('input[name*=\"Partner Site\"]')){try{document.querySelector(\"body\").classList.add(\"crew-product\")}catch(s){}if(document.getElementById(\"shop_header\")){document.querySelector(\"head\").insertAdjacentHTML(\"beforeend\",\"<style>\\t\\t\\t\\t.imageWithSearchModV2 .shop_search {\\t\\t\\t\\t\\tdisplay: none;\\t\\t\\t\\t}\\t\\t\\t\\t.v2_fpp_club_info_subcontent, .v2_fpp_user_actions, .v2_fpp_seller_info, .v2_fpp_shipping, #pm_tooltip_shop_global, .shopModule.noteMod, .shopModule.commentMod {\\t\\t\\t\\t\\tdisplay: none;\\t\\t\\t\\t}\\t\\t\\t\\t#size_color > div:first-child {\\t\\t\\t\\t\\tdisplay: none;\\t\\t\\t\\t}\\t\\t\\t\\t.v2_fpp_price_promo_sticker_container {\\t\\t\\t\\t\\tpadding: 2px 6px;\\t\\t\\t\\t\\tfont-size: 14px;\\t\\t\\t\\t}\\t\\t\\t</style>\");var e=document.querySelector(\".v2_fpp_shipping\");\"Livres\"===KML.asyncDataLayer.categorie&&e&&(e.style.display=\"block\",e.innerHTML='<ul><li class=\"v2_fpp_shipping_info\"><div style=\"font-weight: 400;font-size: 14px; line-height: 19px; \">Livraison : 0,01 € </div><div style=\" font-size: 12px; line-height: 16px; \">Livré selon les délais du partenaire</div></li></ul>'),(l=document.querySelector('input[name=\"Partner Site\"]').value.toLowerCase().split(\" \").join(\"\")).indexOf(\"'\")>-1&&(l=l.replace(\"'\",\"\"));var r=document.querySelector('input[name=\"Partner Site\"]').value,a=document.querySelector('input[name=\"Partner Site URL\"]').value,i=\"10%\";try{document.querySelector(\".v2_fpp_content_details_section\").classList.add(\"crew-product\")}catch(p){}document.querySelector(\"#itAddToCart\").insertAdjacentHTML(\"afterend\",'<div class=\"buyBoxCta\" style=\"margin-top: 16px;display: inline-block;\"><button disabled class=\"crew-cta\" style=\"pointer-events: none;margin-top:0\"><span class=\"\" style=\"background:url(https://fr.shopping.rakuten.com/visuels/0_content_square/openEcommerce/pictos/externalLinkWhite.svg) no-repeat !important;width:19px;height:19px;margin-right: 5px\"></span><div>Acheter chez '+r+\"</div></button></div>\"),document.querySelector(\"#itAddToCart\").remove(),document.querySelector(\".crew-cta\").setAttribute(\"data-popin\",\"\"),document.querySelector(\".crew-cta\").setAttribute(\"data-js\",l),document.querySelector(\".crew-cta\").setAttribute(\"data-link\",a),document.querySelector(\".crew-cta\").setAttribute(\"data-tracking\",180701);try{document.querySelector(\".crew-cta\").setAttribute(\"data-productID\",KML.asyncDataLayer.productID)}catch(d){}document.querySelector(\".v2_fpp_club_info\")&&document.querySelector(\".v2_fpp_club_info\").insertAdjacentHTML(\"afterbegin\",'<div class=\"crew-offer\"><b>'+i+\"</b> remboursés <span>sur votre cagnotte.</span></div>\"),(document.querySelector(\"form.sizeAndColor\")||document.querySelector('select[name=\"sizeFilter\"]'))&&document.querySelector(\".crew-cta\").insertAdjacentHTML(\"afterend\",'<p class=\"crew-infos-taille\">Le choix de la taille se fait à l\\'étape suivante.</p>'),t(l)}if(!document.querySelector(\".ui-mobile\")&&!document.getElementById(\"shop_header\")){function n(){for(var e=document.querySelectorAll(\"div[advert-crew-id]\"),r=0;r<e.length;r++){if(o=e[r]){var a=o.querySelector(\"div[class*='PartnerInformation-module_partnerLogo']\");a&&(a.style.cssText+=\"background:white;\")}}for(var i=document.querySelectorAll('input[name=\"Partner Site\"]'),n=0;n<i.length;n++){var o=i[n].closest(\".actionBuy\"),c=i[n].closest(\"[data-advert-id]\");o.classList.add(\"crew-product\");var l=o.querySelector('input[name=\"Partner Site\"]').value,u=l.toLowerCase().split(\" \").join(\"\"),s=o.querySelector('input[name=\"Partner Site URL\"]').value;c.querySelector(\".rakutenClb.club_popin\").setAttribute(\"data-popin\",\"\"),c.querySelector(\".rakutenClb.club_popin\").setAttribute(\"data-js\",u),c.querySelector(\".rakutenClb.club_popin\").setAttribute(\"data-link\",s),c.querySelector(\".rakutenClb.club_popin\").setAttribute(\"data-tracking\",180701),c.querySelector(\".rakutenClb.club_popin\").addEventListener(\"click\",(function(){event.stopPropagation()}));var p=o.querySelector(\".buyBoxCta .buttonPrimary\").offsetWidth,d=o.parentElement.querySelector(\".shipping\");\"Livres\"===KML.asyncDataLayer.categorie&&d&&(d.innerHTML='<div class=\"shipping\"><div style=\"font-weight: 400;font-size: 14px; line-height: 19px; \">Livraison : 0,01 € </div><div style=\" font-size: 12px; line-height: 16px; \">Livré selon les délais du partenaire</div>');var y=p<216?\"Acheter sur le site\":\"Acheter sur \"+l;if(o.querySelector(\".buyBoxCta .buttonPrimary:not(.crew-cta)\")){o.querySelector(\".buyBoxCta .buttonPrimary\").insertAdjacentHTML(\"afterend\",'<button disabled class=\"crew-cta button_v2 buttonPrimary\" style=\"pointer-events: none\"><span class=\"\" style=\"background:url(https://fr.shopping.rakuten.com/visuels/0_content_square/openEcommerce/pictos/externalLinkWhite.svg) no-repeat !important;width:19px;height:19px;margin-right: 5px\"></span><div>'+y+\"</div></button>\"),o.querySelector(\".buyBoxCta .buttonPrimary:not(.crew-cta)\").remove(),o.querySelector(\".crew-cta\").setAttribute(\"data-popin\",\"\"),o.querySelector(\".crew-cta\").setAttribute(\"data-js\",u),o.querySelector(\".crew-cta\").setAttribute(\"data-link\",s),o.querySelector(\".crew-cta\").setAttribute(\"data-tracking\",180701);try{o.querySelector(\".crew-cta\").setAttribute(\"data-productID\",KML.asyncDataLayer.productID)}catch(e){}}t(u,c)}}n(),KML.ajaxHook(\"listingAnnonce\",n)}if(document.querySelector(\".ui-mobile\")){try{document.querySelector(\"body\").classList.add(\"crew-product\")}catch(y){}function o(){KML.ajaxHook(\"detailAnnonceMobile\",(function(){var e=document.querySelector(\".itemInfoZoom\"),r=e.querySelector(\".deliveryOptions\");if(r&&dataLayer&&dataLayer[3]&&dataLayer[3].categories&&dataLayer[3].categories.indexOf(\"Livres\")>-1&&(r.innerHTML='<div class=\"deliveryOption\"><span class=\"shipping_amount\">Livraison : 0,01 €</span></div><div class=\"deliveryOption\"><span class=\"deliveryInfo\">Livré selon les délais du partenaire</span></div>'),e.querySelector('input[name=\"Partner Site\"]')){var i=e.querySelector('input[name=\"Partner Site\"]').value,n=i.toLowerCase().split(\" \").join(\"\"),o=e.querySelector('input[name=\"Partner Site URL\"]').value;e.querySelector(\".ui-mobile-viewport .shippingBtn\").insertAdjacentHTML(\"afterend\",'<div class=\"buyBoxCta\"><button disabled class=\"crew-cta\" style=\"pointer-events: none;\"><span class=\"\" style=\"background:url(https://fr.shopping.rakuten.com/visuels/0_content_square/openEcommerce/pictos/externalLinkWhite.svg) no-repeat !important;width:19px;height:19px;margin-right: 5px\"></span><div>Acheter chez '+i+\"</div></button></div>\"),e.querySelector(\".ui-mobile-viewport .shippingBtn\").remove(),e.querySelector(\".crew-cta\").setAttribute(\"data-popin\",\"\"),e.querySelector(\".crew-cta\").setAttribute(\"data-js\",n),e.querySelector(\".crew-cta\").setAttribute(\"data-link\",o),e.querySelector(\".crew-cta\").setAttribute(\"data-tracking\",180701),e.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-popin\",\"\"),e.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-js\",l),e.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-link\",a),e.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-tracking\",180701),e.querySelector(\".box-club .club_popin.ui-link\").addEventListener(\"click\",(function(){event.stopPropagation()}));try{e.querySelector(\".crew-cta\").setAttribute(\"data-productID\",KML.asyncDataLayer.productID)}catch(e){}t(n,e)}}))}function c(){for(var e=document.querySelectorAll('input[name=\"Partner Site\"]'),r=0;r<e.length;r++){var i=e[r].closest(\"[data-advert]\");u=i.querySelector('input[name=\"Partner Site\"]').value,l=u.toLowerCase().split(\" \").join(\"\");var n=i.querySelector(\".advert-list\"),o=i.querySelector(\".shipping-container-marketplace\");if(n&&!o&&dataLayer&&dataLayer[3]&&dataLayer[3].categories&&dataLayer[3].categories.indexOf(\"Livres\")>-1&&(n.innerHTML+='<div class=\"shipping-container-marketplace\"><div class=\"deliveryOption\"><span class=\"shipping_amount\">Livraison : 0,01 €</span></div></div>'),!i.closest(\".adv_list\")){a=document.querySelector('input[name=\"Partner Site URL\"]').value,i.querySelector(\".ui-mobile-viewport .shippingBtn\").insertAdjacentHTML(\"afterend\",'<div class=\"buyBoxCta\"><button disabled class=\"crew-cta\"><span class=\"\" style=\"background:url(https://fr.shopping.rakuten.com/visuels/0_content_square/openEcommerce/pictos/externalLinkWhite.svg) no-repeat !important;width:19px;height:19px;margin-right: 5px\"></span><div>Acheter chez '+u+\"</div></button></div>\"),i.querySelector(\".ui-mobile-viewport .shippingBtn\").remove(),i.querySelector(\".crew-cta\").setAttribute(\"data-popin\",\"\"),i.querySelector(\".crew-cta\").setAttribute(\"data-js\",l),i.querySelector(\".crew-cta\").setAttribute(\"data-link\",a),i.querySelector(\".crew-cta\").setAttribute(\"data-tracking\",180701),i.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-popin\",\"\"),i.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-js\",l),i.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-link\",a),i.querySelector(\".box-club .club_popin.ui-link\").setAttribute(\"data-tracking\",180701),i.querySelector(\".box-club .club_popin.ui-link\").addEventListener(\"click\",(function(){event.stopPropagation()}));try{i.querySelector(\".crew-cta\").setAttribute(\"data-productID\",KML.asyncDataLayer.productID)}catch(e){}}t(l,i)}}var l,u;i=\"10%\";if(document.querySelector('input[name=\"Partner Site\"]')&&(c(),document.querySelector(\".listingMarketplaceContainer\")&&o(),KML.ajaxHook(\"listingAnnonce\",(function(){\"block\"!==document.querySelector(\".itemInfoZoom\").style.display&&(c(),document.querySelector(\".listingMarketplaceContainer\")&&o())}))),document.querySelector('input[name=\"private Partner Site\"]')){u=document.querySelector('input[name=\"private Partner Site\"]').value,l=u.toLowerCase().split(\" \").join(\"\"),a=document.querySelector('input[name=\"private Partner Site URL\"]').value;i=\"10%\";document.querySelector(\".ui-mobile-viewport .shippingBtn\").insertAdjacentHTML(\"afterend\",'<div class=\"buyBoxCta\" style=\"margin-top: 16px;display: inline-block;\"><button disabled class=\"crew-cta\" style=\"pointer-events: none;\"><span class=\"\" style=\"background:url(https://fr.shopping.rakuten.com/visuels/0_content_square/openEcommerce/pictos/externalLinkWhite.svg) no-repeat !important;width:19px;height:19px;margin-right: 5px\"></span><div>Acheter chez '+u+\"</div></button></div>\"),document.querySelector(\".ui-mobile-viewport .shippingBtn\").remove(),document.querySelector(\".crew-cta\").setAttribute(\"data-popin\",\"\"),document.querySelector(\".crew-cta\").setAttribute(\"data-js\",l),document.querySelector(\".crew-cta\").setAttribute(\"data-link\",a),document.querySelector(\".crew-cta\").setAttribute(\"data-tracking\",180701);try{document.querySelector(\".crew-cta\").setAttribute(\"data-productID\",KML.asyncDataLayer.productID)}catch(m){}document.querySelector(\".ui-mobile-viewport .priceClubBuyBox \")&&(document.querySelector(\".ui-mobile-viewport .priceClubBuyBox \").insertAdjacentHTML(\"afterbegin\",'<div class=\"crew-offer\"><b>'+i+\"</b> remboursés <span>sur votre cagnotte.</span></div>\"),(document.querySelector(\"form.sizeAndColor\")||document.querySelector('select[name=\"sizeFilter\"]'))&&document.querySelector(\".crew-cta\").insertAdjacentHTML(\"afterend\",'<p class=\"crew-infos-taille\">Le choix de la taille se fait à l\\'étape suivante.</p>')),t(l)}}}}function t(e,t){KML.loadJSON(KML.CDN.statics+\"/visuels/content-short/lucy/club-r-everywhere/partners/partner_\"+e+\".json\",(function(r){var a=r[e].cashback.value;if(a+=\"p\"===r[e].cashback.type?\"%\":\"€\",document.querySelector(\".crew-offer b\"))document.querySelector(\".crew-offer b\").innerHTML=a;else if(t&&t.querySelector(\".rakutenClb_card\")){var i='<span class=\"cartTltpPCAmout rakutenClb_txtStrong primary\">'+a+' <span class=\"cartTltpPCWording\">offerts</span></span>';t.querySelector(\".rakutenClb_card\").innerHTML=i}else if(t&&t.querySelector(\".box-club\")){var n='<span class=\"pointsMoneyAmount\">'+a+\"</span> offerts\";t.querySelector(\".rspText\").innerHTML=n}if(r[e].avatar){if(t.querySelector(\".profileInfo\")){var o='<img class=\"partnerSmallLogo\" width=\"32\" height=\"32\" src=\"'+r[e].avatar+'\" style=\"margin-right: 5px\" />';if(!t.querySelector(\".partnerSmallLogo\"))(l=t.querySelector(\".mdBoxImg img\"))&&l.remove(),t.querySelector(\".profileInfo\").insertAdjacentHTML(\"afterbegin\",o)}var c=t.querySelector(\".seller.advert-desc\")||t.querySelector(\".seller.buy-box\")||t.querySelector(\".container-seller-info\");if(c){var l;o='<img class=\"partnerSmallLogo\" width=\"32\" height=\"32\" src=\"'+r[e].avatar+'\" style=\"margin-right: 5px\" />';if(!t.querySelector(\".partnerSmallLogo\"))(l=t.querySelector(\"svg.svg-container.media\"))&&t.querySelector(\"a.seller\").removeChild(l),c.insertAdjacentHTML(\"afterbegin\",o)}}}))}Kameleoon.API.Core.runWhenElementPresent('#itAddToCart, #footer, #foot, div[data-hypernova-key=\"Footer\"]',(function(){setTimeout((()=>{e(),setTimeout((()=>{e(),setTimeout((()=>{e()}),500)}),500)}),500),KML.ajaxHook(\"listingAnnonce\",e)}))}();","afterDOMReady":true}},{"name":"Variation 1","id":698881,"css":"","elementSets":[],"javaScriptCode":{"code":"document.location.href.includes(\"bbaid\")||document.location.href.includes(\"filter\")||KML.getAsyncDataLayer((e=>{[\"4664531410\",\"5478214186\",\"6035617272\",\"4664531409\",\"6677351638\",\"5596816508\",\"4300768974\",\"7384653557\",\"3831123682\",\"6924111481\",\"5601189519\",\"7197507097\",\"5596368772\",\"5596697732\",\"4203109229\",\"4203109248\",\"4203109239\",\"4811724394\",\"5327874803\",\"5525004078\"].includes(e.productID)&&KML.getAdvertsList((r=>{try{let c=r[0].price,t=\"\";r[0].elem.querySelector(\".oldPrice\")&&(t=r[0].elem.querySelector(\".oldPrice\").innerHTML.replace(\"&nbsp;€\",\"\").replace(/ /g,\"\").replace(/(\\r\\n|\\n|\\r)/gm,\"\"),t=parseFloat(t));let l=\"\";r[0].elem.querySelector(\".headerRecommandedOffer .cartTltpPCAmout\")&&(l=r[0].elem.querySelector(\".headerRecommandedOffer .cartTltpPCAmout\").innerHTML.replace(\"&nbsp;€\",\"\").replace(/ /g,\"\").replace(/(\\r\\n|\\n|\\r)/gm,\"\"),l=parseInt(l.match(/([0-9]*)/)[0])+1),KML.sendAtClickTag(\"product-infos::\"+e.productID+\"::\"+c+\"|\"+t+\"|\"+l)}catch(e){}}))}));","afterDOMReady":true}},{"name":"Variation 1","id":701869,"css":".pickupSearch .pickupPointGeolocalizer{top:193px!important}footer{display:none!important}","elementSets":[]},{"name":"Variation 1","id":702650,"css":"","elementSets":[],"javaScriptCode":{"code":"document.location.href.indexOf(\"bbaid\")+1||KML.getAsyncDataLayer((function(n){KML.getAdvertsList((function(i){i.forEach((function(i,t){t<5&&!i.shipping&&\"PRO\"===i.sellerType&&KML.sendAtClickTag(\"no-shipping-time-monitoring::productID|\"+n.productID+\"::\"+t+\"|\"+i.login)}))}))}));","afterDOMReady":true}},{"name":"Variation 1","id":710161,"css":"","elementSets":[],"javaScriptCode":{"code":"function hideCounter(){if(!document.querySelector('span[class*=\"_giftContainer\"]'))return;document.querySelector('span[class*=\"_giftContainer\"]').closest('div[class*=\"filter_filter_UUG\"]').querySelectorAll('div[class*=\"labelCount_alignCount\"]').forEach((e=>{e.style.display=\"none\"}))}function init(){setTimeout((()=>{hideCounter(),window.addEventListener(\"ReloadProductListNS\",(function(){setTimeout((()=>{hideCounter()}),200)}))}),700)}Kameleoon.API.Core.runWhenElementPresent(\"#footer\",init);","afterDOMReady":false}},{"name":"Variation 1","id":729811,"css":"#prdTitleBlock{margin-bottom:24px!important}#prdTitleBlock #prdTitleHead .prdTitleBrand{display:none!important}#prdTitleBlock .dspflexGen{display:none!important}section#prdSelectorsBlock{display:none!important}#prdFilterBarV2 #sortBy{display:none!important}.product_2019 .seller-status .sellerTag,.sellerInfos .sellerTag{display:none!important}.product_2019 .container-seller-info .seller_mark,.sellerInfos .sellerRating{display:none!important}.prdBuyBox .shippingMode .labelShipping,.prdBuyBox .shippingMode .modelnk,.product_2019 .product-price .deliveryOptions,.product_2019 .shipping-container-marketplace{display:none!important}.product_2019 .controlgroup.adv_filter,.product_container .controlgroup.adv_filter{display:none!important}.prdBuyBox .rakutenClb.club_popin,.product_2019 .product-price .box-money-and-club .box-club{display:none!important}.prdBuyBox .infosPrice .offerType,.prdBuyBox .paiement-differe,.product_2019 .monthlyPayment,.product_2019 .product-price .advtype.condition{display:none!important}.tooltipPopCtn.sellerTooltip{display:none!important}.prdData .prd_side .heading{display:none!important}.sellerInfos .profile .media{border-radius:0!important}","elementSets":[],"javaScriptCode":{"code":"function addFlagUkraine(){KML.getAdvertsList((function(e){for(var r=0;r<e.length;r++)\"SoutienUkraine\"===e[r].login&&e[r].elem.querySelector(\".container-seller-info .seller-status .country-name img\")&&(e[r].elem.querySelector(\".container-seller-info .seller-status .country-name img\").src=\"https://fr.shopping.rakuten.com/visuels/0_merch/contest/image/ukraine.svg\",e[r].elem.querySelector(\".shippingBtn .cartIcon .label\").innerText=\"Faire un don\");document.querySelector(\".listingMarketplaceContainer .titleMarketplace h2\")&&(document.querySelector(\".listingMarketplaceContainer .titleMarketplace h2\").innerText=\"Les differents dons\")})),KML.getAdvertsList((function(e){for(var r=0;r<e.length;r++)\"SoutienUkraine\"===e[r].login&&e[r].elem.querySelector(\".profileInfo img\")&&(e[r].elem.querySelector(\".profileInfo img\").src=\"https://fr.shopping.rakuten.com/visuels/0_merch/contest/image/ukraine.svg\",e[r].elem.querySelector(\".profileInfo img\").dataset.pmLazySrc=\"https://fr.shopping.rakuten.com/visuels/0_merch/contest/image/ukraine.svg\",e[r].elem.querySelector(\".shippingMode .addToCartBtn\").innerText=\"Faire un don\");document.querySelector(\".prdBuyBox #prdFilterBarV2 .offers p\")&&(document.querySelector(\".prdBuyBox #prdFilterBarV2 .offers p\").innerText=\"Les differents dons\")}))}addFlagUkraine(),document.addEventListener(\"ProductPage|ReloadAjaxSuccess|Mobile\",(function(e){addFlagUkraine()})),document.addEventListener(\"ProductPage|ReloadAjaxSuccess\",(function(e){addFlagUkraine()}));","afterDOMReady":false}},{"name":"Variation 1","id":733341,"css":"","elementSets":[],"javaScriptCode":{"code":"function deletePriceDiscount(){KML.getAdvertsList((function(e){for(var o=0;o<e.length;o++)-1===e[o].login.indexOf(\"ClubR_Electrodepot\")&&\"Electrodepot\"!==e[o].login&&\"ElectroDepot\"!==e[o].login||(e[o].elem.querySelector(\".v2_fpp_buy_info  .v2_fpp_price_discount\")&&e[o].elem.querySelector(\".v2_fpp_buy_info  .v2_fpp_price_discount\").remove(),e[o].elem.querySelector(\".infosPrice  .pricePromoSales\")&&e[o].elem.querySelector(\".infosPrice  .pricePromoSales\").remove(),e[o].elem.querySelector(\".product-price  .box-money-and-club .box-money  .discount\")&&e[o].elem.querySelector(\".product-price  .box-money-and-club .box-money  .discount\").remove())}))}deletePriceDiscount(),document.addEventListener(\"ProductPage|ReloadAjaxSuccess|Mobile\",(function(e){deletePriceDiscount()})),document.addEventListener(\"ProductPage|ReloadAjaxSuccess\",(function(e){deletePriceDiscount()}));","afterDOMReady":false}},{"name":"Variation 1","id":764366,"css":"","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenElementPresent(\".claim_seller_tools_listing #lnk_cancel_item\",(()=>{document.querySelector(\".claim_seller_tools_listing #lnk_cancel_item\").parentElement.parentElement.remove()})),Kameleoon.API.Core.runWhenElementPresent(\".ui-mobile-viewport .order_tracking_action_link.xt_cancel_item\",(()=>{document.querySelector(\".ui-mobile-viewport .order_tracking_action_link.xt_cancel_item\").remove()})),Kameleoon.API.Core.runWhenElementPresent('#buyerRequest option[value=\"annul\"]',(()=>{document.querySelector('#buyerRequest option[value=\"annul\"]').remove()}));","afterDOMReady":false}},{"name":"Variation 1","id":769731,"css":"body.rebranding ol.abo_details{display:flex;justify-content:center}body.rebranding #seller_profile .pro_subscription .abo_details .abo_choice label{background:#fff!important;border:solid 1px #000!important;border-radius:3px!important;text-shadow:none!important;color:#000!important;padding:1px 13px!important}body.rebranding #seller_profile .pro_subscription .abo_details .abo_choice .pm-checked label{background:#000!important;color:#fff!important}body.rebranding #seller_profile form.pm_frm div.frm_fldset{background:#fff!important}body.rebranding #seller_profile form.pm_frm{font-size:14px!important}body.rebranding #seller_profile form.pm_frm fieldset p.frm_lgnd{font-size:17px!important}body.rebranding #main h5{font-size:14px!important}body.rebranding .blueinptsmall{padding:15px 60px!important}body.rebranding #seller_profile .pro_subscription .abo_details .abo_rate{background:#bf0000!important}body.rebranding #seller_profile form.pm_frm div#modes_xpdtion div.modes_xpdtion_ctn div.mini_ctn{border:1px solid #bbb!important}body.rebranding #seller_profile form.pm_frm div#modes_xpdtion div.modes_xpdtion_ctn div.mini_nav ul li.show_nfo{background:#ddd!important}","elementSets":[],"javaScriptCode":{"code":"function updateExistingAbos(){var e=document.querySelectorAll(\".abo_more_details table tr\");e[1].querySelector(\"th\").innerHTML=\"<b>Catégorie A : </b> Télévision, Informatique - Ordinateur, Composants (hors accessoires)\",e[2].querySelector(\"th\").innerHTML=\"<b>Catégorie B : </b> Electronique, Téléphonie, Image et son, Petit et gros électroménager, Pneus, Instruments de musique, Jeux vidéo - Consoles (hors accessoires), Logiciels, Musique, Vidéo, Accessoires automobiles\",e[3].querySelector(\"th\").innerHTML=\"<b>Catégorie C : </b> Bricolage, Outillages de jardin\",e[4].querySelector(\"th\").innerHTML=\"<b>Catégorie D : </b> Livres, Papeterie, Mode, Montres, Cigarette électronique, Jouets et puéricuture, Matériel de sport, Décoration, Mobilier, Activités de loisirs, Art de la table, Linge de maison, Accessoires (télévision, téléphonie, image et son, électroménager, jeux vidéo), Consommables informatiques, Vin et gastronomie, Cosmétique\",e[5].querySelector(\"th\").innerHTML=\"<b>Catégorie E : </b> Art et collection, Bijoux, Espace coquin\"}function init(){Kameleoon.API.Core.runWhenElementPresent(\"#PRO_COMPANY\",(()=>{document.querySelector(\"body\").classList.add(\"rebranding\"),updateExistingAbos()}))}init();","afterDOMReady":true},"widgetTemplateInputData":null,"widgetTemplateName":null},{"name":"Variation 1","id":789798,"css":"","elementSets":[],"javaScriptCode":{"code":"!function(){try{let e=()=>{let e=dataLayer.findLast((e=>e.categorie_produit));if(!e)return;e.keyword=e.keyword||\"no-keyword\",e.categorie_produit=e.categorie_produit||\"no-category\";let t=document.querySelector(\"span.titlePage_keyword_oZu\").innerText;KML.sendAtClickTag(\"kml-monitoring-rads-detailed::\"+e.categorie_produit+\";\"+e.sous_categorie_produit+\";\"+e.page_title+\";\"+document.querySelectorAll('[data-qa=\"seller\"]').length),KML.sendAtClickTag(\"kml-monitoring-rads::\"+e.keyword+\";\"+document.querySelectorAll('[data-qa=\"seller\"]').length);try{let o=function(){KML.sendAtClickTag(\"kml-monitoring-clicked-products::\"+t+\";\"+this.dataset.productid+\";[\"+e.product_ids.toString()+\"]\")};document.querySelectorAll(\"div[data-productid]\").forEach((e=>{e.addEventListener(\"click\",o.bind(e))}))}catch(e){}};window.addEventListener(\"ReloadProductListNS\",(function(){e()})),Kameleoon.API.Core.runWhenConditionTrue((()=>window.dataLayer&&window.Didomi&&window.ATInternet.Tracker),(()=>{e()}))}catch(e){console.log(\"Erreur JS concernant le test Content Square : [FDU] Metriques monitoring Rakuten Ads\"),console.log(e)}}();","afterDOMReady":false}},{"name":"Variation 1","id":794225,"css":".satisfiedOrRefundedModal rect.badgeBg{fill:#EBF7EC;transition:fill .2s ease}.satisfiedOrRefundedModal rect.badgeBg:hover{fill:#BFF4BF}","elementSets":[]},{"name":"Variation 1","id":800596,"css":"","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenElementPresent('.grid_container.errorContent, #content .pg404_redirect, img[src$=\"/static/front/brand/www/images/illustration/404.png\"]',(()=>{KML.sendAtClickTag(\"kameleoon::oups-page-viewed::\"+document.location.pathname)}));","afterDOMReady":false}},{"name":"Variation 1","id":809037,"css":"","elementSets":[],"javaScriptCode":{"code":"KML.getAdvertsList((function(e){e.forEach((function(e){var r=e.elem.querySelector(\"ul.shipping li\");if(r&&r.querySelector(\"span.value\")&&\"0,00 €\"==r.querySelector(\"span.value\").innerText)r.innerText=\"Livraison GRATUITE\";else{var n=e.elem.querySelector(\"li.shipping\");n&&n.querySelector(\"span.value\")&&\"0,00 €\"==n.querySelector(\"span.value\").innerText&&(n.innerText=\"Livraison GRATUITE\")}}))}));","afterDOMReady":false}},{"name":"Variation 1","id":809474,"css":"","elementSets":[],"javaScriptCode":{"code":"var productNodes=document.querySelectorAll('div[data-qa=\"product\"]');productNodes.forEach((e=>{if(e.querySelector('[class*=\"description_styleTitle\"]').innerText.startsWith(\"Précommande\")){let t=e.querySelector('div[class*=\"shippingBadge_shippingBadgeEvent\"]');t&&(t.style.visibility=\"hidden\")}}));","afterDOMReady":false}},{"name":"Variation 1","id":809854,"css":"","elementSets":[],"javaScriptCode":{"code":"console.log(\"Test Kameleoon intégration Namogoo\");let head=document.getElementsByTagName(\"head\")[0],script=document.createElement(\"script\");script.async=!0,script.src=\"https://ascpqnj-oam.global.ssl.fastly.net/RASNAP148.js\",head.appendChild(script);","afterDOMReady":false},"widgetTemplateInputData":null,"widgetTemplateName":null},{"name":"Variation 1","id":815069,"css":"[class*=sales_campaign]{display:none}[class*=promo_campaign]{display:none}[class*=v2_fpp_price_discount]{display:none}","elementSets":[],"javaScriptCode":{"code":"document.querySelectorAll(\".rrp_price\").forEach((e=>e.style.display=\"none\")),window.addEventListener(\"load\",(()=>{document.querySelectorAll(\".rrp_price\").forEach((e=>e.style.display=\"none\"))}));","afterDOMReady":false}},{"name":"Variation 1","id":817663,"css":"body.rebranding ol.abo_details{display:flex;justify-content:center}body.rebranding #seller_profile .pro_subscription .abo_details .abo_choice label{background:#fff!important;border:solid 1px #000!important;border-radius:3px!important;text-shadow:none!important;color:#000!important;padding:1px 13px!important}body.rebranding #seller_profile .pro_subscription .abo_details .abo_choice .pm-checked label{background:#000!important;color:#fff!important}body.rebranding #seller_profile form.pm_frm div.frm_fldset{background:#fff!important}body.rebranding #seller_profile form.pm_frm{font-size:14px!important}body.rebranding #seller_profile form.pm_frm fieldset p.frm_lgnd{font-size:17px!important}body.rebranding #main h5{font-size:14px!important}body.rebranding .blueinptsmall{padding:15px 60px!important}body.rebranding #seller_profile .pro_subscription .abo_details .abo_rate{background:#bf0000!important}body.rebranding #seller_profile form.pm_frm div#modes_xpdtion div.modes_xpdtion_ctn div.mini_ctn{border:1px solid #bbb!important}body.rebranding #seller_profile form.pm_frm div#modes_xpdtion div.modes_xpdtion_ctn div.mini_nav ul li.show_nfo{background:#ddd!important}","elementSets":[],"javaScriptCode":{"code":"function updateExistingAbos(){document.querySelectorAll(\".abo_details .abo_name\")[2].innerText=\"Expert\";let t=document.querySelectorAll(\".abo_details li.abo_ctn\")[2];t.querySelector(\".abo_price\").innerHTML='49&nbsp;€&nbsp;<abbr title=\"Hors Taxes\"><sup>HT</sup></abbr>&nbsp;/&nbsp;mois&nbsp;<sup class=\"pm_ref\" title=\"Facturation mensuelle, paiement par prélèvement bancaire en fin de mois.\">(1)</sup>',t.querySelector(\".abo_rate .value > b\").innerText=\"8\",document.querySelectorAll(\".abo_ctn\")[0].remove(),document.querySelectorAll(\".abo_ctn\")[0].remove(),document.querySelectorAll(\".frm_fldset .footnote\")[1].innerHTML='<p class=\"footnote\">\\n\\t\\t\\t<sup class=\"pm_ref\">(2)</sup>&nbsp;Commission variable selon la catégorie (voir ci-dessous plus de détails sur les catégories). \\n\\t\\t\\tPrélevée directement sur le montant de vos ventes (TVA incluse et frais de port exclus si ces derniers ne sont pas personnalisés) avant reversement. \\n\\t\\t\\tTous ces montants et taux sont tous appliqués hors taxe (HT)<br/>\\n\\t\\t\\t2% de commission supplémentaire s\\'applique concernant les produits \"non neufs\".<br/>\\n\\t\\t\\t2% de commissions supplémentaires s\\'appliquent concernant les marchands basés en dehors de la France.<br/>\\n\\t\\t\\t<br><span>Ces nouvelles commissions seront effectives à partir du 1er Février 2023.</span>\\n\\t\\t</p>',document.querySelector(\"table.pm_table\").innerHTML='<table class=\"pm_table\" summary=\"Commission variable par catégorie de produit\">\\n\\t<thead>\\n\\t\\t<tr class=\"first_child last_child\">\\n\\t\\t<th scope=\"col\" class=\"first_child\">Catégorie de produit</th>\\n\\t\\t<th scope=\"col\">Expert</th>\\n\\t\\t<th scope=\"col\" class=\"last_child\">Starter</th>\\n\\t\\t</tr>\\n\\t</thead>\\n\\t<tbody>\\n\\t\\t<tr class=\" even first_child \">\\n\\t\\t<th scope=\"row\" class=\"first_child\"><b>Catégorie A : </b> Télévision, Informatique-Ordinateur, Composants (hors accessoires), Electronique, Pneus, Téléphonie, Image et Son, Petit et gros électroménager, Consoles (hors accessoires)</th>\\n\\t\\t\\t<td>8%</td>\\n\\t\\t\\t<td>14%</td>\\n\\t\\t</tr>\\n\\t\\t<tr class=\" odd \">\\n\\t\\t<th scope=\"row\" class=\"first_child\"><b>Catégorie B : </b> Bricolage, Outillage de jardin, Livres, Logiciels, Musique, Vidéo, Instruments de musique, Jeux vidéo</th>\\n\\t\\t\\t<td>12%</td>\\n\\t\\t\\t<td>18%</td>\\n\\t\\t</tr>\\n\\t\\t<tr class=\" even \">\\n\\t\\t<th scope=\"row\" class=\"first_child\"><b>Catégorie C : </b> Papeterie, Mode, Montres, Cigarette électronique, Jouets et puériculture, Matériel de sport, Décoration, Mobilier, Activité de loisirs, Arts de la table, Linge de maison, Accessoires (télévision, téléphonie, image et son, électroménager, jeux vidéo), Consommables informatiques, Casques et micro, Accessoires automobiles, Vin et gastronomie, Art et collection, Bijoux, Espace coquin</th>\\n\\t\\t\\t<td>15%</td>\\n\\t\\t\\t<td>21%</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n\\t</table>',document.querySelector('label[for=\"fast_pay\"]')&&(document.querySelector('label[for=\"fast_pay\"]').innerHTML='<span>\\n\\t\\t\\tJe choisis l\\'option \"Paiement des ventes accéléré\" pour 1% de commission supplémentaire. <sup class=\"pm_ref\">(4)</sup><br> Ventes payables dès confirmation de l\\'expédition des colis. <a href=\"javascript:PM.PopUp.open(\\'/help/is_info_fast_payment/popup/true\\', PM.PopUp.Type.HELP, 490, 600);\" class=\"link_action\">En savoir plus</a>\\n\\t\\t</span>')}function init(){Kameleoon.API.Core.runWhenElementPresent(\"#PRO_COMPANY\",(()=>{updateExistingAbos()}))}init();","afterDOMReady":true}},{"name":"Variation 1","id":844509,"css":"","elementSets":[],"javaScriptCode":{"code":"!function(){try{let e=()=>{document.querySelector('a[href=\"https://fr.shopping.rakuten.com/event/club-r-everywhere?p=carrefour\"]')&&(document.querySelector('a[href=\"https://fr.shopping.rakuten.com/event/club-r-everywhere?p=carrefour\"]').href=\"https://fr.shopping.rakuten.com/event/carrefour\")};window.addEventListener(\"ReloadProductListNS\",(function(){e()})),Kameleoon.API.Core.runWhenConditionTrue((()=>window.dataLayer&&window.Didomi&&window.ATInternet.Tracker),(()=>{e()}))}catch(e){console.log(\"Erreur JS concernant le test Content Square : [FDU] Remplacement lien Carrefour\"),console.log(e)}}();","afterDOMReady":false}},{"name":"Variation 1","id":847073,"css":".jss1.jss3{position:relative;margin-bottom:20px}.label-recommande{position:absolute;top:-6px;padding:2px 5px;background:#bf0000;color:#fff;font-size:11px;border-radius:4px;right:-10px}","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenElementPresent(\".jss1.jss3\",(()=>{document.querySelector(\".jss1.jss2\").insertAdjacentElement(\"beforebegin\",document.querySelector(\".jss1.jss3\")),document.querySelectorAll('[data-qa=\"radio-container\"]')[0].insertAdjacentHTML(\"afterbegin\",'<span class=\"label-recommande\">Recommandé</span>'),document.querySelector('input[value=\"OTP\"]').click(),document.querySelector(\".jss1.jss3\").querySelectorAll(\"p\")[1].innerHTML=\"Activez la connexion à deux facteurs avec un service d'authentification comme Google Authenticator.<br/><br/><i><strong>Indispensable si vous partagez votre compte avec d'autres collaborateurs</strong></i>\"})),Kameleoon.API.Core.runWhenElementPresent('[href=\"/connect?action=tfaconfiguration&method=OTP&enable=false\"]',(()=>{\"1\"===PM.Context.data.pro.value&&document.querySelector('[href=\"/connect?action=tfaconfiguration&method=OTP&enable=false\"]').remove()}));","afterDOMReady":true}},{"name":"Variation 1","id":885384,"css":"","elementSets":[],"javaScriptCode":{"code":"Kameleoon.API.Core.runWhenConditionTrue((()=>window.ATInternet&&window.ATInternet.Tracker),(()=>{let t=new ATInternet.Tracker.Tag;setTimeout((function(){document.querySelectorAll('[data-hypernova-key=\"ClubRTransfer\"]').length>0?(t.mvTesting.set({test:\"1312315151562[club_r_crt]\",waveId:1,creation:\"1[with_crt]\"}),t.dispatch(),document.cookie.split(\";\").some((t=>t.trim().startsWith(\"uxt_6132837=\")))||(document.cookie=\"uxt_6132837=1;max-age=2592000;path=/;\")):(t.mvTesting.set({test:\"1312315151562[club_r_crt]\",waveId:1,creation:\"0[without_crt]\"}),t.dispatch(),document.cookie.split(\";\").some((t=>t.trim().startsWith(\"uxt_6132837=\")))||(document.cookie=\"uxt_6132837=0;max-age=2592000;path=/;\"))}),7e3),console.log(\"Wait 7s\")}));","afterDOMReady":false}},{"name":"Variation 1","id":905614,"css":"","elementSets":[],"javaScriptCode":{"code":"!function(){try{Kameleoon.API.Core.runWhenConditionTrue((()=>dataLayer.findLast((n=>n.summary_product_id))),(()=>{let n=(document.querySelector(\"#prd_information\").querySelectorAll(\".productInformation #fp_info img\")||\"\").length,o=(document.querySelector(\"#prd_information .productInformation #fp_info\").innerText||\"\").length,t=(document.querySelector(\"#prd_information .productInformation #fp_info\").innerText.match(/(\\n([ \\n])*)/gi)||[]).length>1?\"oui\":\"non\",r=(document.querySelector(\"#prd_information .productInformation #fp_info\").innerText.match(/¿/gi)||[]).length>=1?\"oui\":\"non\",e=document.querySelector(\"#prd_information\").querySelectorAll(\".specs_ctn\")?\"oui\":\"non\",i=dataLayer.findLast((n=>n.summary_product_id));if(!i)return;let u=i.summary_product_id+\";\"+i.product_link_designation.substr(0,50)+\";[\"+i.categories.toString()+\"];\"+n+\";\"+o+\";\"+t+\";\"+r+\";\"+e;KML.sendAtClickTag(\"kml-monitoring-description-quality::\"+u)}))}catch(n){}}();","afterDOMReady":true}},{"name":"Variation 1","id":937252,"css":"","elementSets":[],"javaScriptCode":{"code":"//VISFO-3447 timeout pour hypernova\n\n/*\n\nsetTimeout(function() {\n    var previousElement = document.querySelector(\"[data-qa='footer-openShop']\");\n    var classA = previousElement.className;\n    var classLink = previousElement.parentNode.className;\n    previousElement.parentNode.insertAdjacentHTML(\"afterend\", '<li data-qa=\"footer-corporate-link\" class=\"'+classLink+'\"><a href=\"https://help.fr.shopping.rakuten.net/hc/fr/articles/10324490666002-A-quoi-correspondent-les-frais-prélevés-lors-de-mon-achat\" class=\"'+classA+'\" data-qa=\"footer-protection\">Frais de protection acheteurs</a></li>');\n}, 1000); \n\n*/","afterDOMReady":true}},{"name":"Variation 1","id":966757,"css":"._f-popin-cbc77f ._f-fullWidthBody-aee62d{top:30px!important}","elementSets":[]},{"name":"Variation 1","id":1043236,"css":"","elementSets":[],"javaScriptCode":{"code":"try{KML.getAdvertsList((e=>{e.forEach((e=>{\"-2%\"===e.elem.querySelector(\".hasSalesOrSpecialOfferDiv .value span\")?.innerText&&e.elem.querySelector(\".pricePromoSales\")?.remove()}))}))}catch(e){console.log(e)}","afterDOMReady":true}},{"name":"Variation 1","id":1043717,"css":".kmlRakupon{max-width:170px;min-width:100px!important}","elementSets":[]},{"name":"VARIANTE 1","id":1044232,"css":".marketingCampaignKML{margin-top:15px;margin-bottom:15px;font-size:14px;color:#000}.marketingCampaignKML strong{color:#bf0000}.couponPictoKML{width:14px;min-width:14px;height:15px;min-height:15px;background-repeat:no-repeat;background-size:contain;background-image:url('https://fr.shopping.rakuten.com/visuels/0_content_square/marketing/assets/ic_tag_filled.svg');margin:0 5px 0 0;display:inline-block;vertical-align:-2px}@media screen and (max-width:640px){.marketingCampaignKML{font-size:14x!important;line-height:16px!important;width:180px!important}}.nav .marketingCampaignKML{display:block;float:left;width:260px}.kml-odr span{font-size:16px}","elementSets":[],"javaScriptCode":{"code":"KML.getAsyncDataLayer((function(e){function t(e,t,n){e.elem.querySelector(\".kml-coupon-\"+t.id)||(e.elem.querySelector(\".infosPrice, .v2_fpp_buy_info\")?e.elem.querySelector(\".infosPrice, .v2_fpp_buy_info\").insertAdjacentHTML(\"afterend\",o(t,e,n)):e.elem.querySelector(\".deliveryOptions\").insertAdjacentHTML(\"beforebegin\",o(t,e,n)))}function o(e,t,o){var r=n(t),i=(function(e){var t=[];if(e&&e.elem&&e.elem.hasAttribute(\"data-sale-campaign-codes\")){let o=e.elem.getAttribute(\"data-sale-campaign-codes\");\"string\"==typeof o&&(t=o.split(\";\"))}}(t),\"\");if(\"ODR\"===e.type)i='<div class=\"marketingCampaignKML kml-odr kml-coupon-'+e.id+'\">'+KML.formatText(e.odr_text),e.endDate&&(i+=\" jusqu'au \"+e.endDate),\"\"!==e.link&&(i+=' <a style=\"color: black\" target=\"_blank\" title=\"Voir les conditions de l\\'offre\" href=\"'+e.link+'\">(?)</a>'),i+=\"</div>\";else if(\"COUPON\"===e.type){const n=e.excludedSellers&&e.excludedSellers.some((e=>e==r)),a=e.excludedMarketCampaigns&&e.excludedMarketCampaigns.some((e=>e==t.id||e==o));!n&&!a&&(i='<div class=\"marketingCampaignKML kml-coupon-'+e.id+'\" title=\"Ce code coupon est à renseigner sur la page paiement\"><span class=\"couponPictoKML\"></span><strong style=\"font-size: 16px\">-'+e.amount+\" €</strong> avec le code <strong>\"+e.code+\"</strong></div>\")}return i}function n(e){var t=\"\";return e&&e.elem&&e.elem.hasAttribute(\"data-seller-id\")&&(t=e.elem.getAttribute(\"data-seller-id\")),t}KML.getAdvertsList((function(o){o.forEach((function(o){\"PARTNER\"!==o.sellerType&&KML.marketing.coupons.get(e.categorie,e.categorie+\"_\"+e.sousCategorie,e.productID,o.id,o.price,e.club_member_status,o.state,n(o)).then((function(n){n&&t(o,n,e.productID)})),KML.marketing.odr.get(e.categorie,e.categorie+\"_\"+e.sousCategorie,e.productID,o.id,o.price,e.club_member_status).then((function(n){n&&t(o,n,e.productID)}))}))})),KML.getProductListOnSearch((function(t){t.forEach((function(t){KML.marketing.coupons.get(e.categorie,e.categorie+\"_\"+e.sousCategorie,t.id,0,t.buyboxPrice,e.club_member_status).then((function(o){o&&(\"global\"===o.scope||\"product\"===o.scope||\"category\"===o.scope&&\"NAV\"===e.pageType)&&function(e,t){if(!e.elem.querySelector(\".marketingCampaignKML\")){e.elem.querySelector(\".product\").insertAdjacentHTML(\"beforeend\",function(e){var t=\"\";\"COUPON\"===e.type&&(t='<div class=\"marketingCampaignKML\" title=\"Ce code coupon est à renseigner sur la page paiement\"><span class=\"couponPictoKML\"></span><strong style=\"font-size: 16px\">-'+e.amount+\" €</strong> avec le code <strong>\"+e.code+\"</strong></div>\");return t}(t))}}(t,o)}))}))}))}));","afterDOMReady":true}},{"id":0,"name":"Reference","css":"","elementSets":[]},{"id":null,"name":"Excluded"}],"goals":[{"id":148747,"name":"Retention rate","type":"ENGAGEMENT"},{"id":168003,"name":"Confirmation achat - Desktop","type":"URL","url":"(.*)/checkout\\?action\\=paymentsuccess&purchaseId\\=(.*)"},{"id":168004,"name":"Confirmation achat - Mobile","type":"URL","url":"(.*)/checkout/payment/processout/success/(.*)"},{"id":204333,"name":"Transaction avec montant IA","type":"CUSTOM"},{"id":210418,"name":"Transaction avec montant IA - GTM","type":"CUSTOM"},{"id":318848,"name":"wording-vendre","type":"CLICK"},{"id":318850,"name":"Accès page ","type":"URL","url":"https\\://fr\\.shopping\\.rakuten\\.com/seller/sell-form\\?step\\=landing(.*)"},{"id":318854,"name":"[SRO] Atteinte Etape 1 NSE","type":"URL","url":"^https\\://fr\\.shopping\\.rakuten\\.com/seller/sell-form\\?step\\=landing$"}],"scriptProduceTime":1733211144552,"timeZone":"Europe/Paris","webExperimentationSetup":true,"boLocale":"ENGLISH","DATA_URL":"https://data.kameleoon.eu","useWideDomainSupport":true,"geolocation":true,"graphicalEditorVersion":"v1","globalScript":"var gatherer=function(){window.kamkam=\"kam\",window.KML=window.KML||{},window.KML.CDN={},window.KML.CDN.images=\"https://fr.shopping.rakuten.com\",window.KML.CDN.statics=\"https://fr.shopping.rakuten.com\",window.KML.CDN.staticsWithoutCache=\"https://fr.shopping.rakuten.com\",window.KML.JSONdata={},window.KML.JSONdata.merchandisingCampaigns={url:\"/visuels/0_content_square/marketing/merchandising-campaigns/merchandising-campaigns.json\"},window.KML.JSONdata.marketingCoupons={url:\"/visuels/content-short/lucy/coupons-odr/coupons-odr.json\"},window.KML.JSONdata.shippingDelay={url:\"/visuels/0_content_square/delaisLivraison/shippingV3.json\"},window.KML.JSONdata.brandsSearch={url:\"/visuels/0_content_square/brandsSearch/super_pros.json\"},window.KML.log=function(e){(window.KML.debug||window.kmlSimulator)&&console.log(e)},window.KML.loadScript=function(e){var t=document.getElementsByTagName(\"head\")[0],a=document.createElement(\"script\");a.setAttribute(\"type\",\"text/javascript\"),a.setAttribute(\"src\",e),t.appendChild(a)},window.KML.contains=function(e,t){return!!e.innerHTML.match(new RegExp(t,\"i\"))},window.KML.ajaxHook=function(e,t){var a={modaleLivraisonFP:/offer\\?action=shippingtypedescription\\&advertId=/i,listingAnnonce:/(\\/mfp\\/.*fromSelectorsOrTextSearch=true)|(mfp\\?action=advlstmeta)|(\\/offer\\/buy\\/ajax\\/)|(\\/offer\\/buy\\/advertdesc\\/ajax\\/)/i,warrantyPopin:/\\/cart\\?action=warrantypopin/i,addToCart:/\\/cart\\?action=cartpopin/i,diaporama:/\\/image\\?action=slideshow/i,shippingCart:/cart\\?action=cartshippingajaxupdate/i,detailAnnonceMobile:/\\/offer\\/buy\\/advertdesc\\/ajax/i,cartPage:/\\/cart\\?action=updateajax/i};const n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(o){return this.addEventListener(\"load\",(function(){this.responseURL.match(a[e])&&t()})),n.call(this,o)}},window.KML.getAdvertsList=function(e){var t=[];function a(){var a;a=[],document.querySelectorAll('.fpV3 #prdListingListV2 > li,\\t\\t\\t\\t\\t   .fpV3 div[data-qa=\"buyBoxBlock\"],\\t\\t\\t\\t\\t   .shopPro .v2_fpp_content_details_content,\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t   .advertItem.mainFP,\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t   .advertItem.detailedAdvert,\\t\\t\\t\\t\\t   .advertItem.ListingMarketPlaceFP').forEach((function(e){var t=null,n=null,o=null,i=null,r=null,s=null,c=null;try{t=e.querySelector('form[method=\"POST\"]').id.replace(\"formadvert\",\"\").replace(\"bb\",\"\").replace(\"a\",\"\")}catch(e){}try{t=t||e.querySelector('input[name=\"aid\"]').value}catch(e){}try{t=t||e.dataset.advert}catch(e){}try{n=parseFloat(e.querySelector(\".price\").innerHTML.replace(/ /g,\"\").replace(\"€\",\"\").replace(/ /g,\"\").replace(\",\",\".\").replace(/&nbsp;/g,\"\"))}catch(e){}try{n=n||parseFloat(e.querySelector(\".v2_fpp_price\").innerHTML.replace(/ /g,\"\").replace(\"€\",\"\").replace(/ /g,\"\").replace(\",\",\".\").replace(/&nbsp;/g,\"\"))}catch(e){}try{o=e.querySelector(\".nameSeller\").innerHTML.replace(/&n/g,\"\").replace(/bsp;/g,\"\").replace(/ /g,\"\").replace(/ /g,\"\")}catch(e){}try{o=o||e.querySelector(\".v2_fpp_seller_name\").innerText.replace(/ /g,\"\").replace(/ /g,\"\").replace(/ /g,\"\")}catch(e){}try{o=o||e.querySelector(\".sellerName\").innerHTML.replace(/\\/n\\/r/g,\"\").replace(/ /g,\"\").replace(/ /g,\"\")}catch(e){}try{i=e.querySelector('abbr[title=\"Vendeur partenaire\"]')?\"PARTNER\":e.querySelector(\"abbr.proTag\")?\"PRO\":\"PART\"}catch(e){}try{r=parseFloat(e.querySelector(\".sellerRating\").innerText.match(/([,0-9]*).*/i)[1].replace(\",\",\".\"))}catch(e){}try{r=r||parseFloat(e.querySelector(\".seller_mark\").innerText.match(/([,0-9]*).*/i)[1].replace(\",\",\".\"))}catch(e){}try{s=!!e.querySelector(\".ShippingExpressLabelDelivery\")}catch(e){}try{e.querySelector(\".advtype.condition, .offerType\").innerText.includes(\"Occasion\")&&(c=\"Occasion\"),e.querySelector(\".advtype.condition, .offerType\").innerText.includes(\"Neuf\")&&(c=\"Neuf\"),e.querySelector(\".advtype.condition, .offerType\").innerText.includes(\"Reconditionné\")&&(c=\"Reconditionné\")}catch(e){}try{document.querySelector(\".advtype.condition, .offerType\").innerText.includes(\"Occasion\")}catch(e){}a.push({elem:e,id:t,price:n,login:o,sellerType:i,note:r,shipping:s,state:c})})),(t=a).length&&e(t)}window.KML.ajaxHook(\"listingAnnonce\",a),Kameleoon.API.Core.runWhenElementPresent(\"#prdListingListV2 li, section.prdRRTopCtn, #footer, .v2_fpp_seller_title, footer\",(function(){a()})),document.addEventListener(\"DOMContentLoaded\",(function(){a()}))},window.KML.getProductListOnSearch=function(e){var t=[];document.querySelectorAll(\"#navContainer .navItem\").forEach((function(e){var a=null,n=null;try{a=e.dataset.radsProductid}catch(e){}try{a=a||e.id.replace(\"navItem\",\"\")}catch(e){}try{n=parseFloat(e.querySelector(\".prdBuybox .buybox .price\").innerHTML.replace(/€/g,\"\").replace(/&n/g,\"\").replace(/bsp;/g,\"\").replace(/,/g,\".\"))}catch(e){}try{n=n||parseFloat(e.querySelector('[data-qa=\"new_product_advertised\"] .price').innerText.replace(/€/g,\"\").replace(/ /g,\"\"))}catch(e){}t.push({elem:e,id:a,buyboxPrice:n})})),t.length&&e(t)},window.KML.throttle=function(e,t){var a,n;return function(){var o=this,i=+new Date,r=arguments;a&&i<a+t?(clearTimeout(n),n=setTimeout((function(){a=i,e.apply(o,r)}),t)):(a=i,e.apply(o,r))}},window.KML.loadRgpdAds=function(){var e=(/rgpd=([^;]*);/gi.exec(document.cookie)||[])[1];if(e){var t=JSON.parse(decodeURIComponent(e));return null!=t&&t.loadAds}return!0},window.KML.setPagesViewed=function(){sessionStorage.getItem(\"pagesViewed\")?sessionStorage.setItem(\"pagesViewed\",parseInt(sessionStorage.getItem(\"pagesViewed\"))+1):sessionStorage.setItem(\"pagesViewed\",1)},window.KML.setPagesViewed(),window.KML.getCustomDataLayer=function(e){var t={},a=null;e=e||{},t.userID=e.uid||e.user_id||e.userId,t.logged=\"Non\",t.userID&&(t.logged=\"Oui\"),t.clubMemberStatus=e.club_member_status||e.clubR,t.clubMemberStatus||(t.clubMemberStatus=\"UNSUBSCRIBED\"),\"1\"==e.pro?t.userType=\"PRO\":\"0\"==e.pro?t.userType=\"PART\":t.userType=\"\",a=\"\";try{a=e.categories||e.category_url}catch(e){}try{a=a||document.location.hash.match(/nav=([_-a-zA-Z0-9]*)/i)[1]}catch(e){}try{a=a||document.location.search.match(/nav=([_-a-zA-Z0-9]*)/i)[1]}catch(e){}try{a=a||document.location.pathname.match(/^\\/nav\\/([_-a-zA-Z0-9]*)/i)[1]}catch(e){}a&&(\"object\"!=typeof a&&(a=a.replace(/,/g,\"_\").split(\"_\")),t.categorie=a[0]||\"\",t.sousCategorie=a[1]||\"\",t.sousSousCategorie=a[2]||\"\"),navigator.userAgent.indexOf(\"Mobile\")+1?t.device=\"MOBILE\":t.device=\"DESKTOP\";var n=document.querySelector('extension-info[id=\"rakuten-club-extension\"]')?\"Oui\":\"Non\";t.extension_crew_installed=n,t.nombre_pages_vues=sessionStorage.getItem(\"pagesViewed\"),t.nombre_pages_vues>=6&&(t.nombre_pages_vues=\"superieur_5\"),/^\\/(s|search)\\//i.test(document.location.pathname)?t.pageType=\"SEARCH\":/^\\/nav\\//i.test(document.location.pathname)?t.pageType=\"NAV\":\"/\"===document.location.pathname?t.pageType=\"HOME\":document.querySelector(\".shopPro\")||/\\/offer\\?action=desc\\&aid=/i.test(document.location.pathname+document.location.search)||/\\/mfp\\/shop\\//i.test(document.location.pathname)||/\\/offer\\/shop\\//i.test(document.location.pathname)||/\\/boutique\\//i.test(document.location.pathname)?t.pageType=\"SUPER_BOUTIQUE\":/(^\\/offer\\/buy\\/)|(^\\/mfp\\/)/i.test(document.location.pathname)?t.pageType=\"FP\":/^\\/v\\/vendre/i.test(document.location.pathname)?t.pageType=\"SELL\":/^\\/event\\//i.test(document.location.pathname)?t.pageType=\"EVENT\":/^(\\/user$)|(\\/memo\\?action=list)|(\\/purchase\\?action=buylist)|(\\/purchase\\?action=itemmonitoring\\&itemid=)|(\\/usersecure\\?action=rakutenclubhistory)|(\\/usersecure\\?action=clubaccount)/i.test(document.location.pathname+document.location.search)?t.pageType=\"MON_COMPTE\":t.pageType=\"OTHER\",t.keyword=\"\",/^\\/s\\/([%\\+a-z0-9]*)/i.exec(document.location.pathname)&&(t.keyword=/^\\/s\\/([%\\+a-z0-9]*)/i.exec(document.location.pathname)[1]||\"\"),/^\\/search\\/([%\\+a-z0-9]*)/i.exec(document.location.pathname)&&(t.keyword=/^\\/search\\/([%\\+a-z0-9]*)/i.exec(document.location.pathname)[1]||\"\"),/^\\/mfp\\/[0-9]*\\/([-a-z0-9]*)/i.exec(document.location.pathname)&&(t.keyword=/^\\/mfp\\/[0-9]*\\/([-a-z0-9]*)/i.exec(document.location.pathname)[1].replace(/-/g,\"+\")||\"\"),/^\\/offer\\/buy\\/[0-9]*\\/([-a-z0-9]*)/i.exec(document.location.pathname)&&(t.keyword=/^\\/offer\\/buy\\/[0-9]*\\/([-a-z0-9]*)/i.exec(document.location.pathname)[1].replace(/-/g,\"+\").replace(\".html\",\"\")||\"\"),t.productID=\"\";var o=/^\\/offer\\/buy\\/([0-9]*)/i.exec(document.location.pathname)||/^\\/mfp\\/.*\\?pid=([0-9]*)/i.exec(document.location.pathname+document.location.search)||/^\\/offer\\?action=desc.*productid=([0-9]*)/i.exec(document.location.pathname+document.location.search);return o&&(t.productID=o[1]||\"\"),t.url=document.location.pathname,/\\/(s|search|nav).*ft=n/i.test(document.location.href)||\"FP\"===t.pageType&&/filter=10/i.test(document.location.search)?t.etat=\"Neuf\":/\\/(s|search|nav).*ft=u/i.test(document.location.href)||\"FP\"===t.pageType&&/filter=20/i.test(document.location.search)?t.etat=\"Occasion\":(/\\/(s|search|nav).*ft=r/i.test(document.location.href)||\"FP\"===t.pageType&&/filter=40/i.test(document.location.search))&&(t.etat=\"Reconditionne\"),t},window.KML.getDataLayer=function(e){var t={};return window.KML.dataLayer?window.KML.dataLayer:(\"undefined\"!=typeof PM&&PM.Context&&PM.Context.data?Object.keys(PM.Context.data).forEach((function(a){\"DFP\"===e?PM.Context.data[a].criteria&&(t[a]=PM.Context.data[a].value):t[a]=PM.Context.data[a].value})):\"undefined\"!=typeof PMContext?Object.assign(t,PMContext):\"undefined\"!=typeof dataLayer&&Object.assign(t,dataLayer[1]),Object.assign(t,window.KML.getCustomDataLayer(t)),window.KML.dataLayer=t,t)},window.KML.getAdblockInfo=function(e){e(\"Non\")},window.KML.getAsyncDataLayer=function(e,t){var a={};if(!t&&window.KML.asyncDataLayer)return e(window.KML.asyncDataLayer),!0;window.KML.getAdblockInfo((function(t){function n(a){return Object.assign(a,window.KML.getCustomDataLayer(a)),a.adblocker=t,window.KML.asyncDataLayer=a,e(a),!0}\"undefined\"!=typeof PM&&PM.Context&&PM.Context.data?(Object.keys(PM.Context.data).forEach((function(e){PM.Context.data[e].criteria&&(a[e]=PM.Context.data[e].value)})),n(a)):\"undefined\"!=typeof dataLayer&&dataLayer[0]?(Object.assign(a,dataLayer.find((e=>void 0!==e.userId))),n(a)):Kameleoon.API.Core.runWhenElementPresent('[data-role=\"page\"] #header',(function(){\"undefined\"!=typeof PMContext&&(Object.assign(a,PMContext),n(a))}))}))},window.KML.DFPsetTargeting=function(e,t){var a=window.KML.getDataLayer(\"DFP\");Object.keys(a).forEach((function(t){e[0].setTargeting(t,a[t])})),t&&t.forEach((function(t){e[0].setTargeting(Object.keys(t)[0],Object.values(t)[0])}))},window.KML.asyncDFPsetTargeting=function(e,t,a){Object.keys(t).forEach((function(a){e[0].setTargeting(a,t[a])})),a&&a.forEach((function(t){e[0].setTargeting(Object.keys(t)[0],Object.values(t)[0])}))},window.KML.loadJSON=function(e,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(200==a.status){var n=a.response;n?t(n):console.log(\"Problème avec le format du fichier JSON : \"+e)}else console.log(\"Problème chargement fichier JSON : \"+e)},a.responseType=\"json\",a.open(\"GET\",e,!0),a.send(null)},window.KML.getCookie=function(e){for(var t=e+\"=\",a=decodeURIComponent(document.cookie).split(\";\"),n=0;n<a.length;n++){for(var o=a[n];\" \"==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},window.KML.setCookie=function(e,t,a){if(!window.KML.getCookie(e)){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var o=\"expires=\"+n.toUTCString();document.cookie=e+\"=\"+t+\";\"+o+\";path=/\"}},window.KML.loadJSONbyName=function(e,t){if(window.KML.JSONdata[e].data)t(window.KML.JSONdata[e].data);else if(window.KML.JSONdata[e].ajaxPile?window.KML.JSONdata[e].ajaxPile.push(t):window.KML.JSONdata[e].ajaxPile=[t],1===window.KML.JSONdata[e].ajaxPile.length){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(200==a.status){var t=a.response;t?(window.KML.JSONdata[e].data=t,window.KML.JSONdata[e].ajaxPile.forEach((function(e){e(t)})),window.KML.JSONdata[e].ajaxPile=[]):console.log(\"Problème avec le format du fichier JSON : \"+window.KML.JSONdata[e].url)}else console.log(\"Problème chargement fichier JSON : \"+window.KML.JSONdata[e].url)},a.responseType=\"json\",/(preview)|(editors)/i.test(document.location.host)||window.KML.debug||window.draftCampaigns?a.open(\"GET\",window.KML.CDN.staticsWithoutCache+window.KML.JSONdata[e].url.replace(\".json\",\"-preview.json\"),!0):window.kmlSimulator?a.open(\"GET\",window.KML.CDN.staticsWithoutCache+window.KML.JSONdata[e].url.replace(\".json\",\"-extension.json\"),!0):a.open(\"GET\",window.KML.CDN.statics+window.KML.JSONdata[e].url,!0),a.send(null)}},window.KML.obtainExperimentFromVariationId=function(e){var t=!1;return Kameleoon.API.Experiments.getActive().forEach((function(a){a.variations.forEach((function(n){e===n.id&&(t=a)}))})),t},window.KML.isDisplayed=function(e){var t=!1;return e.forEach((function(e){4===e.start[1].length&&(e.start[1]=\"0\"+e.start[1]),4===e.end[1].length&&(e.end[1]=\"0\"+e.end[1]);var a=new Date;window.simulationDate&&(a=new Date(simulationDate)),t=t||new Date(e.start[0]+\"T\"+e.start[1]+\":00\").getTime()<a.getTime()&&new Date(e.end[0]+\"T\"+e.end[1]+\":00\").getTime()>a.getTime()})),t},window.KML.getFilteredCampaigns=function(e,t){e=e.filter((function(e){var t=!0;Object.keys(e.targeting).forEach((function(a){if(\"keyword\"===a){let n=0;return e.targeting[a].forEach((function(e){window.KML.asyncDataLayer[a].indexOf(e)+1&&n++})),void(0===n&&(t=!1))}\"ExcludeUrl\"!==a?e.targeting[a].includes(window.KML.asyncDataLayer[a])||(t=!1):e.targeting[a].includes(window.KML.asyncDataLayer.url)&&(t=!1)}));var a=localStorage.getItem(\"merchandising-campaign-\"+e.id),n=(new Date-new Date(a))/864e5;return a&&0!==e.expositionLimitDays&&n<e.expositionLimitDays&&(t=!1),t=t&&window.KML.isDisplayed(e.programmation)}));if(t)return e;var a=[];if(e.length)for(var n of e){if(a.length&&n.priority>a[0].priority)break;a.push(n)}var o=a[Math.floor(Math.random()*Math.floor(a.length))];return o&&0!==o.expositionLimitDays&&localStorage.setItem(\"merchandising-campaign-\"+o.id,new Date),o},window.KML.formatText=function(e){var t=['<span style=\"color: #bf0000; font-weight: bold\">$1</span>','<span style=\"color: #409030; font-weight: bold\">$1</span>','<span style=\"color: #00A0F0; font-weight: bold\">$1</span>',\"<strong>$1</strong>\",'<span style=\"font-size: 12px;\">$1</span>',\"<br/>\",'<span style=\"display: inline-block; padding: 2px 10px; background: #bf0000; color: #fff; border-radius: 100px; font-weight: bold;\">$1</span>','<span style=\"display: inline-block; padding: 2px 10px; background: #EBF7EC; color: #009500; border-radius: 100px; font-weight: bold;\">$1</span>','<span style=\"display: inline-block; padding: 2px 10px; background: #000; color: #fff; border-radius: 100px; font-weight: bold;\">$1</span>','<span style=\"display: inline-block; padding: 2px 10px; background: #00A0F0; color: #fff; border-radius: 100px; font-weight: bold;\">$1</span>','<span style=\"text-decoration: underline;\">$1</span>'];return[/{color:red}(.*){color}/gi,/{color:green}(.*){color}/gi,/{color:blue}(.*){color}/gi,/{strong}(.*){strong}/gi,/{small}(.*){small}/gi,/{br}/gi,/{highlight:red}(.*){highlight}/gi,/{highlight:green}(.*){highlight}/gi,/{highlight:black}(.*){highlight}/gi,/{highlight:blue}(.*){highlight}/gi,/{underline}(.*){underline}/gi].forEach((function(a,n){e=e.replace(a,t[n])})),e},window.KML.sendAtPublisherTagFunction=function(e,t,a,n){var o={};o[t]={campaignId:\"[Merchandising]\",creation:\"[\"+a+\"]\",variant:\"[\"+e.id+\"]\",format:\"[\"+e.name+\"]\"};try{o[t].generalPlacement=\"[\"+window.KML.asyncDataLayer.pageType+\"]\"}catch(e){}try{window.KML.asyncDataLayer.categorie&&(o[t].detailedPlacement=\"[\"+window.KML.asyncDataLayer.categorie+\" > \"+window.KML.asyncDataLayer.sousCategorie+\"]\")}catch(e){}\"undefined\"!=typeof ATInternet&&(n.publisher.set(o),n.dispatch())},window.KML.sendAtPublisherTag=function(e,t,a){if(window.Didomi)window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{const n={disableCookie:!window.Didomi.getUserConsentStatusForVendor(\"c:atinterne-cWQKHeJZ\")};if(window.ATInternet.Tracker){var o=new window.ATInternet.Tracker.Tag(n);window.KML.sendAtPublisherTagFunction(e,t,a,o)}}));else if(window.ATInternet.Tracker){var n=new window.ATInternet.Tracker.Tag;window.KML.sendAtPublisherTagFunction(e,t,a,n)}},window.KML.sendAtClickTagFunction=function(e,t){\"undefined\"!=typeof ATInternet&&t.click.send({elem:this,name:e,level2:\"0\",type:\"navigation\"})},window.KML.sendAtClickTag=function(e){if(window.Didomi)window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{const t={disableCookie:!window.Didomi.getUserConsentStatusForVendor(\"c:atinterne-cWQKHeJZ\")};if(window.ATInternet.Tracker){var a=new window.ATInternet.Tracker.Tag(t);window.KML.sendAtClickTagFunction(e,a)}}));else if(window.ATInternet.Tracker){var t=new window.ATInternet.Tracker.Tag;window.KML.sendAtClickTagFunction(e,t)}},window.KML.DOMReady=new Promise((function(e,t){\"complete\"===document.readyState&&e(!0),window.addEventListener(\"DOMContentLoaded\",(function(t){e(!0)}))})),window.KML.marketing={},window.KML.marketing.coupons_odr={},window.KML.marketing.coupons={},window.KML.marketing.odr={},window.KML.marketing.coupons_odr.get=function(e,t,a,n,o,i,r,s,c=\"\"){return new Promise((function(l,d){window.KML.loadJSONbyName(\"marketingCoupons\",(function(d){window.KML.getAsyncDataLayer((function(u){var p=[];if(d.ciblage.categories&&d.ciblage.categories[e]&&(p=p.concat(d.ciblage.categories[e])),d.ciblage.categories&&d.ciblage.categories[t]&&(p=p.concat(d.ciblage.categories[t])),d.ciblage.productIDs&&d.ciblage.productIDs[a]&&(p=p.concat(d.ciblage.productIDs[a])),d.ciblage.advertIDs&&d.ciblage.advertIDs[n]&&(p=p.concat(d.ciblage.advertIDs[n])),d.ciblage.global&&(p=p.concat(d.ciblage.global)),0!==p.length){var m=p.reduce((function(e,t){var l=d.campaigns[t],u=void 0!==l;return u=u&&l.type===r&&window.KML.isDisplayed(l.programmation)&&o>=l.minPurchase,\"Neuf\"===l.state||\"Occasion\"===l.state||\"Reconditionné\"===l.state?u=u&&l.state===s:\"Seconde main\"===l.state&&(u=u&&(\"Occasion\"===s||\"Reconditionné\"===s)),l.clubMember&&(u=u&&l.clubMember===i),l.excludedMarketCampaigns&&l.excludedMarketCampaigns.length>0&&(u=u&&!l.excludedMarketCampaigns.some((e=>e==a||e==n))),l.excludedSellers&&l.excludedSellers.length>0&&c&&\"\"!=c&&(u=u&&!l.excludedSellers.some((e=>e==c))),d.campaigns[e]&&(u=u&&d.campaigns[e].amount<=l.amount),u?t:e}),null);m&&l(d.campaigns[m])}}))}))}))},window.KML.marketing.coupons.get=function(e,t,a,n,o,i,r,s=\"\"){return window.KML.marketing.coupons_odr.get(e,t,a,n,o,i,\"COUPON\",r,s)},window.KML.marketing.odr.get=function(e,t,a,n,o,i){return window.KML.marketing.coupons_odr.get(e,t,a,n,o,i,\"ODR\",\"Tous\")},window.KML.ajaxCall=function(e,t){var a=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(n){return this.addEventListener(\"load\",(function(){this.responseURL.match(e)&&t()})),a.call(this,n)}}};gatherer();var globalScript=function(){var e,t;if({pagesRegex:{cart:/fr\\.shopping\\.rakuten\\.com\\/cart/,homepage:/fr\\.shopping\\.rakuten\\.com/},convert_transaction:function(){var e=this;-1===document.location.href.indexOf(\"checkout?action=paymentsuccess&purchaseId\")&&-1===document.location.href.indexOf(\"/checkout/payment/processout/success/\")||Kameleoon.API.Core.runWhenConditionTrue((function(){return e.value_in_datalayer(\"event\",\"paymentEvent\")}),(function(){if(!sessionStorage.getItem(\"lastTransactionId\")||sessionStorage.getItem(\"lastTransactionId\")!==e.crawl_datalayer(\"purchase_id\")){var t=parseFloat(e.crawl_datalayer(\"purchase_total_value\"));Kameleoon.API.Goals.processConversion(204333,t),sessionStorage.setItem(\"lastTransactionId\",e.crawl_datalayer(\"purchase_id\"))}}),200)},value_in_datalayer:function(e,t){for(var a=0;a<dataLayer.length;a++)if(dataLayer[a][e]===t)return!0;return!1},crawl_datalayer:function(e){for(var t=!1,a=0;a<dataLayer.length;a++)if(void 0!==dataLayer[a][e]&&null!==dataLayer[a][e]){t=dataLayer[a][e];break}return t},set_customdatas:function(){var e=this;-1!==location.href.indexOf(\"https://fr.shopping.rakuten.com/nav/\")?Kameleoon.API.Core.runWhenConditionTrue((function(){return\"undefined\"!=typeof dataLayer&&dataLayer.length>2}),(function(){Kameleoon.API.Data.setCustomData(\"site_type\",e.crawl_datalayer(\"site_type\")),Kameleoon.API.Data.setCustomData(\"super_points\",e.crawl_datalayer(\"super_points\")),Kameleoon.API.Data.setCustomData(\"categories\",e.crawl_datalayer(\"categories\")),Kameleoon.API.Data.setCustomData(\"first_buy\",e.crawl_datalayer(\"first_buy\")),Kameleoon.API.Data.setCustomData(\"page_number\",e.crawl_datalayer(\"page_number\")),Kameleoon.API.Data.setCustomData(\"hits\",e.crawl_datalayer(\"hits\")),Kameleoon.API.Data.setCustomData(\"location_alias\",e.crawl_datalayer(\"location_alias\")),Kameleoon.API.Data.setCustomData(\"product_type\",e.crawl_datalayer(\"product_type\"))}),500):\"https://fr.shopping.rakuten.com/\"===window.location.href?Kameleoon.API.Core.runWhenConditionTrue((function(){return\"undefined\"!=typeof dataLayer&&dataLayer.length>2}),(function(){Kameleoon.API.Data.setCustomData(\"site_type\",e.crawl_datalayer(\"site_type\")),Kameleoon.API.Data.setCustomData(\"super_points\",e.crawl_datalayer(\"super_points\")),Kameleoon.API.Data.setCustomData(\"first_buy\",e.crawl_datalayer(\"first_buy\")),Kameleoon.API.Data.setCustomData(\"location_alias\",e.crawl_datalayer(\"location_alias\"))}),500):-1!==location.href.indexOf(\"https://fr.shopping.rakuten.com/offer/buy/\")?Kameleoon.API.Core.runWhenConditionTrue((function(){return\"undefined\"!=typeof dataLayer&&dataLayer.length>2}),(function(){Kameleoon.API.Data.setCustomData(\"site_type\",e.crawl_datalayer(\"site_type\")),Kameleoon.API.Data.setCustomData(\"super_points\",e.crawl_datalayer(\"super_points\")),Kameleoon.API.Data.setCustomData(\"categories\",e.crawl_datalayer(\"categories\")),Kameleoon.API.Data.setCustomData(\"first_buy\",e.crawl_datalayer(\"first_buy\")),Kameleoon.API.Data.setCustomData(\"page_structure\",e.crawl_datalayer(\"page_structure\")),Kameleoon.API.Data.setCustomData(\"location_alias\",e.crawl_datalayer(\"location_alias\")),Kameleoon.API.Data.setCustomData(\"summary_available_stock\",e.crawl_datalayer(\"summary_available_stock\")),Kameleoon.API.Data.setCustomData(\"advert_bb_price\",e.crawl_datalayer(\"advert_bb_price\")),Kameleoon.API.Data.setCustomData(\"best_new_price\",e.crawl_datalayer(\"best_new_price\")),Kameleoon.API.Data.setCustomData(\"best_used_price\",e.crawl_datalayer(\"best_used_price\"))}),500):-1!==location.href.indexOf(\"https://fr.shopping.rakuten.com/s/\")?Kameleoon.API.Core.runWhenConditionTrue((function(){return\"undefined\"!=typeof dataLayer&&dataLayer.length>2}),(function(){Kameleoon.API.Data.setCustomData(\"site_type\",e.crawl_datalayer(\"site_type\")),Kameleoon.API.Data.setCustomData(\"super_points\",e.crawl_datalayer(\"super_points\")),Kameleoon.API.Data.setCustomData(\"categories\",e.crawl_datalayer(\"categories\")),Kameleoon.API.Data.setCustomData(\"page_number\",e.crawl_datalayer(\"page_number\")),Kameleoon.API.Data.setCustomData(\"hits\",e.crawl_datalayer(\"hits\")),Kameleoon.API.Data.setCustomData(\"location_alias\",e.crawl_datalayer(\"location_alias\")),Kameleoon.API.Data.setCustomData(\"product_types\",e.crawl_datalayer(\"product_types\"))}),500):window.location.href.match(e.pagesRegex.cart)&&Kameleoon.API.Core.runWhenConditionTrue((function(){return\"undefined\"!=typeof dataLayer&&dataLayer.length>2}),(function(){Kameleoon.API.Data.setCustomData(\"site_type\",e.crawl_datalayer(\"site-type\")),Kameleoon.API.Data.setCustomData(\"super_points\",e.crawl_datalayer(\"super_points\")),Kameleoon.API.Data.setCustomData(\"first_buy\",e.crawl_datalayer(\"first_buy\")),Kameleoon.API.Data.setCustomData(\"location_alias\",e.crawl_datalayer(\"location_alias\"))}),500)},init:function(){this.convert_transaction(),this.set_customdatas()}}.init(),e={site_type:{mobile:1,desktop:2,tablet:3,false:0},super_points:{\"regular|0\":1,REGULAR:2,PLATINUM:3,\"regular|1\":4,GOLD:5,SILVER:6,\"platinum|1\":7,\"gold|1\":8,\"silver|1\":9,platinum:10,silver:11,gold:12,\"platinum|0\":13,false:0},categories:{\"Maison,soins-du-corps\":1,\"Maison,Petit-Electromenager\":2,\"Maison,deco-interieur\":3,\"jardin,mobilier-de-jardin\":4,\"Mode,Cosmetique-Produit-de-beaute\":5,\"jardin,piscine\":6,\"Maison,mobilier\":7,\"Musique,CD\":8,\"Maison,accessoires-electromenager\":9,\"Jeux-Video-et-Consoles,Accessoires-Jeux-Video\":10,\"Livres,Sciences-humaines-et-spiritualite\":11,\"Livres,BD-et-humour\":12,\"Livres,Enfant-jeunesse\":13,\"Livres,Litterature\":14,\"Tel-PDA,Accessoires-mobiles\":15,\"bricolage,quincaillerie\":16,\"Enfant,jeux-plein-air\":17,\"Video,DVD-Zone-2\":18,\"Loisirs,musculation-fitness\":19,\"Maison,Electromenager\":20,\"Mode,chaussures\":21,\"Mode,Mode-homme\":22,\"Jeux-Video-et-Consoles,Jeux-Video\":23,\"Enfant,jouets,playmobil\":24,\"Tel-PDA,Telephones-mobiles\":25,\"Informatique,Ordinateur-portable\":26,\"Informatique,Accessoires\":27,\"jardin,outillage-jardin\":28,\"Mode,Mode-femme\":29,\"Maison,animalerie\":30,\"Informatique,Logiciels\":31,\"Jeux-Video-et-Consoles,Consoles\":32,\"Livres,Revues\":33,\"bricolage,outillage-a-main\":34,\"Maison,luminaire\":35,\"Maison,linge-maison\":36,\"Enfant,jouets,figurine\":37,\"Hifi,accessoire-audio-video\":38,\"Enfant,jeux-societe\":39,\"Jeux-Video-et-Consoles,Cartes-de-jeux\":40,\"Hifi,casques-micros\":41,\"Livres,Art-et-culture\":42,\"Enfant,modelisme\":43,\"bricolage,outillage-electroportatif\":44,\"Enfant,jouets,jeux-educatifs-interactifs\":45,\"Enfant,jouets,vehicules-radiocommandes-miniatures\":46,\"Maison,repassage-couture\":47,\"Maison,ustensile-de-cuisine\":48},first_buy:{false:0,true:1},page_structure:{\"fiche_produit_classique,avec_buybox\":1,\"fiche_produit_classique,sans_buybox\":2,\"fiche_produit_privée\":3,fiche_produit_complement:4},location_alias:{SEARCH:1,NAVIGATION:2,HP2012:3,ADVERT_LIST:4,CART_SHIPPING:5,CART_V2:6,\"CART_V2%%ADD_ITEM\":7,ADVERT_DESCRIPTION:8,default:9},summary_available_stock:{false:0,true:1}},t={range:[{interval:[-1,1],result:0},{interval:[1,3],result:1},{interval:[3,5],result:2},{interval:[5,10],result:3},{interval:[10,25],result:4},{interval:[25,50],result:5},{interval:[50,100],result:6},{interval:[100,300],result:7},{interval:[300,500],result:8},{interval:[500,\"inf\"],result:9}],hitsRange:[{interval:[-1,5],result:0},{interval:[5,10],result:1},{interval:[10,20],result:2},{interval:[20,40],result:3},{interval:[40,100],result:4},{interval:[100,\"inf\"],result:5}],rangeData:[\"advert_bb_price\",\"best_new_price\",\"best_used_price\"]},window.addEventListener(\"load\",(function(){var a=t.rangeData,n=t.range,o=t.hitsRange;dataLayer.forEach((function(t){Object.keys(e).forEach((function(a){var n=e[a];t.hasOwnProperty(a)&&n.hasOwnProperty(t[a])?Kameleoon.API.Data.setCustomData(\"\".concat(a,\"_AI\"),n[t[a]]):t[a]&&\"location_alias\"===a&&Kameleoon.API.Data.setCustomData(\"\".concat(a,\"_AI\"),n.default)})),a.forEach((function(e){if(t.hasOwnProperty(e)){var a=Number(t[e]);if(!isNaN(a))for(var o=0;o<n.length;o++){var i=n[o].result,r=n[o].interval[0],s=n[o].interval[1];(a>r&&a<=s||\"inf\"===s&&a>500)&&Kameleoon.API.Data.setCustomData(\"\".concat(e,\"_AI\"),i)}}}));var i=t.hits;if(i&&!isNaN(i))for(var r=0;r<o.length;r++){var s=o[r].result,c=o[r].interval[0],l=o[r].interval[1];(i>c&&i<=l||\"inf\"===l&&i>100)&&Kameleoon.API.Data.setCustomData(\"hits_AI\",s)}}))})),1===Kameleoon.API.CurrentVisit.pageViews&&document.cookie.match(/_ga=(.+?);/)){var a=document.cookie.match(/_ga=(.+?);/)[1].split(\".\").slice(-2).join(\".\");Kameleoon.API.Data.setCustomData(\"id_visiteur\",a)}Kameleoon.API.Core.runWhenConditionTrue((function(){return\"undefined\"!=typeof __tcfapi}),(function(){__tcfapi(\"addEventListener\",2,((e,t)=>{if(t&&(\"useractioncomplete\"===e.eventStatus||\"tcloaded\"===e.eventStatus)&&e){e.vendor.consents[820];var a=e.purpose.consents;1==a[1]&&1==a[10]?Kameleoon.API.Core.enableLegalConsent(\"AB_TESTING\"):Kameleoon.API.Core.disableLegalConsent(\"AB_TESTING\"),1==a[1]&&1==a[3]&&1==a[5]&&1==a[6]&&1==a[8]?Kameleoon.API.Core.enableLegalConsent(\"PERSONALIZATION\"):Kameleoon.API.Core.disableLegalConsent(\"PERSONALIZATION\")}}),[820])}),200)};\"complete\"==document.readyState||\"interactive\"==document.readyState?globalScript():Kameleoon.API.Utils.addEventListener(document,\"DOMContentLoaded\",(function(){globalScript()}),!1);try{var kameleoonEventsTracker=[{id:318848,selector:\"#header > div:first-child > div:first-child > div:first-child > header:first-child > div:nth-of-type(2) > nav:first-child > div:nth-of-type(2) > a:first-child > span:nth-of-type(2)\"}],createEventTracking=function(e,t){for(var a,n=function(e){Kameleoon.Internals.runtime.touchMoveEvent||Kameleoon.API.Goals.processConversion(t.id)},o=0;o<e.length;++o)a=e[o],Kameleoon.Utils.addEventListener(a,Kameleoon.Internals.runtime.mouseDownEvent,n,!0)},kameleoonTimeoutId=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearTimeout(kameleoonTimeoutId),kameleoonEventsTracker.forEach((e=>{Kameleoon.API.Core.runWhenElementPresent(e.selector,(t=>{createEventTracking(t,e)}),null,Kameleoon.Internals.runtime.singlePageSupport||Kameleoon.Internals.runtime.dynamicRefresh)}))}),250)}catch(e){console.log(\"An error occurred in your custom JavaScript Kameleoon tracking function, please check your code.\"),console.log(e,e.message)}","useAudience":true,"track":true,"trackerExcludedIPRanges":[],"Gatherer":"eyJtYXhWaXNpdElkbGVEdXJhdGlvbiI6MTgwMDAwMCwiZGlyZWN0Tm9uZVJlZmVycmVyT25seUZpcnN0IjpmYWxzZSwiYnJvd3NlcnMiOnsiMCI6eyJuYW1lIjoiQ0hST01FIn0sIjEiOnsibmFtZSI6IkVYUExPUkVSIn0sIjIiOnsibmFtZSI6IkZJUkVGT1gifSwiMyI6eyJuYW1lIjoiU0FGQVJJIn0sIjQiOnsibmFtZSI6Ik9QRVJBIn19LCJvc3MiOnsiMCI6eyJuYW1lIjoiV0lORE9XUyJ9LCIxIjp7Im5hbWUiOiJNQUMifSwiMiI6eyJuYW1lIjoiSU9TIn0sIjMiOnsibmFtZSI6IkxJTlVYIn0sIjQiOnsibmFtZSI6IkFORFJPSUQifSwiNSI6eyJuYW1lIjoiV0lORE9XUyBQSE9ORSJ9fSwibm9SZWZlcnJlclBhZ2VzIjpbXSwicmVmZXJyZXJzIjp7IjAiOnsibmFtZSI6Ikdvb2dsZSBBZFdvcmRzIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7Im1ldGhvZCI6MCwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcLmdvb2dsZShcXC5jb20/KT9cXC5bXi9cXC5dKy9hY2xrKFtcXD8mI10uKnwpJCJ9LHsibWV0aG9kIjoxLCJhbmQiOmZhbHNlLCJwYXJhbWV0ZXJzIjoiW1xcPyYjXWdjbGlkPSJ9XX0sIjEiOnsibmFtZSI6Ikdvb2dsZSBPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJtZXRob2QiOjAsImFuZCI6ZmFsc2UsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvKD8hYWNsa3xpbWdyZXMpLipbXFw/JiNdcT0uKihbXFw/JiNdLip8KSQifSx7Im1ldGhvZCI6MCwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcLmdvb2dsZShcXC5jb20/KT9cXC5bXi9cXC5dKy8/JCJ9XX0sIjIiOnsibmFtZSI6IkJpbmcgT3JnYW5pYyBTZWFyY2giLCJwcmlvcml0eSI6MCwiZGV0ZWN0aW9ucyI6W3sibWV0aG9kIjowLCJhbmQiOmZhbHNlLCJwYXJhbWV0ZXJzIjoiXi4rXFwuYmluZ1xcLlteL1xcLl0rLy4qW1xcPyYjXXE9LiooW1xcPyYjXS4qfCkkIn1dfSwiMyI6eyJuYW1lIjoiWWFob28gT3JnYW5pYyBTZWFyY2giLCJwcmlvcml0eSI6MCwiZGV0ZWN0aW9ucyI6W3sibWV0aG9kIjowLCJhbmQiOmZhbHNlLCJwYXJhbWV0ZXJzIjoiXi4rXFwueWFob29cXC5bXi9cXC5dKy8uKltcXD8mI11wPS4qKFtcXD8mI10uKnwpJCJ9XX0sIjQiOnsibmFtZSI6IkJhaWR1IE9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7Im1ldGhvZCI6MCwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcLmJhaWR1XFwuW14vXFwuXSsvLipbXFw/JiNdd2Q9LiooW1xcPyYjXS4qfCkkIn1dfX0sImtleVBhZ2VzIjp7fSwiY3VzdG9tRGF0YSI6eyIwIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJzaXRlX3R5cGUiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjEiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6InN1cGVyX3BvaW50cyIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMiI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiY2F0ZWdvcmllcyIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiZmlyc3RfYnV5IiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCI0Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJwYWdlX251bWJlciIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiNSI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoicGFnZV9zdHJ1Y3R1cmUiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjYiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImJlc3RfdXNlZF9wcmljZSIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiNyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiYmVzdF9uZXdfcHJpY2UiLCJmb3JtYXQiOi0xLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCI4Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJhZHZlcnRfYmJfcHJpY2UiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjkiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6InByb2R1Y3RfdHlwZSIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMTAiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6InN1bW1hcnlfYXZhaWxhYmxlX3N0b2NrIiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCIxMSI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoibG9jYXRpb25fYWxpYXMiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjEyIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJoaXRzIiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCIxMyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoic2l0ZV90eXBlX0FJIiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSIsImxlYXJuYWJsZSI6dHJ1ZX0sIjE0Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJzdXBlcl9wb2ludHNfQUkiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIiwibGVhcm5hYmxlIjp0cnVlfSwiMTUiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImNhdGVnb3JpZXNfQUkiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIiwibGVhcm5hYmxlIjp0cnVlfSwiMTYiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImZpcnN0X2J1eV9BSSIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUiLCJsZWFybmFibGUiOnRydWV9LCIxNyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoicGFnZV9zdHJ1Y3R1cmVfQUkiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIiwibGVhcm5hYmxlIjp0cnVlfSwiMTgiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImxvY2F0aW9uX2FsaWFzX0FJIiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSIsImxlYXJuYWJsZSI6dHJ1ZX0sIjE5Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJzdW1tYXJ5X2F2YWlsYWJsZV9zdG9ja19BSSIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUiLCJsZWFybmFibGUiOnRydWV9LCIyMCI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiaGl0c19BSSIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUiLCJsZWFybmFibGUiOnRydWV9LCIyMSI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiYmVzdF91c2VkX3ByaWNlX0FJIiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSIsImxlYXJuYWJsZSI6dHJ1ZX0sIjIyIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJiZXN0X25ld19wcmljZV9BSSIsImZvcm1hdCI6MCwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUiLCJsZWFybmFibGUiOnRydWV9LCIyMyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoiYWR2ZXJ0X2JiX3ByaWNlX0FJIiwiZm9ybWF0IjowLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSIsImxlYXJuYWJsZSI6dHJ1ZX0sIjI0Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJpZF92aXNpdGV1ciIsImZvcm1hdCI6LTEsInNjb3BlIjoiVklTSVRPUiIsInR5cGUiOiJVTklRVUUifX19","MentalistLearner":{"startOfVisitLearner":{"beforeMean":[0.03847,0.2154,0.2851,0.000002858,0.000001996,0.000006896,0,0.01906,0.1539,0.1979,0.00000242,6.654e-7,0.000002949,0,0.0109,0.1168,0.148,0.000002117,1.21e-7,0.000001709,0,0.08853,1.02,1.321,0.00001744,0.000003387,0.00001426,0,1.777,134000000,94540000,3.166,225200000,138200000,0.5689,0.5013,0.4609,19.82,19.82,101600000,118700000,0,0.115,0.1085,11.07,10.66,0,0,0,0,0,0,0,0,0,6.597,5.733,0,0,0,0,0,0,0,0,0,0,1364000000,78.24,0.9961,0.01659,0.3038,0.4306,0.000002722,0.000001225,0.000002495,0.4707,1,1,0.5397,0.04409,0.06933,0.2608,0.007944,0.07816,99.3,0.672,0.2575,0.0511,0.2934,0.009147,0.3784,0.000001104,0.01053,801,732.5,815.5,878.7,0],"trainingOutputVectorTargetNbUpdates":66126918,"standarizeInputs":true,"outputDimension":2,"bias":[-4.117,-4.31],"inputDimension":99,"beforeDeviation":[0.1923,0.4111,0.4515,0.001691,0.001413,0.002626,0,0.1367,0.3609,0.3984,0.001556,0.0008157,0.001717,0,0.1038,0.3211,0.3551,0.001455,0.0003478,0.001307,0,0.4635,2.765,3.431,0.01267,0.002247,0.005983,0,3.997,526300000,341700000,4.005,673600000,383200000,0.4952,0.5,0.4985,42.6,42.6,428300000,336100000,0,0.5079,0.4946,204,203.8,0,0,0,0,0,0,0,0,0,19.34,18.76,0,0,0,0,0,0,0,0,0,0,4198000000,367.3,0.06219,0.1277,0.4599,0.4952,0.00165,0.001107,0.00158,0.4991,2.002e-13,2.002e-13,0.4984,0.2053,0.254,0.4391,0.08877,0.2684,61.79,0.4695,0.4373,0.2202,0.4553,0.0952,0.485,0.001051,0.1021,597.2,166.2,633.6,143.7,0],"weights":[[-0.03944,-0.01493,0.05049,0.01914,0.07993,-0.2417,-0.1191,-0.01816,-0.02316,0.04231,-0.1982,0.09432,-0.2297,-0.1482,-0.07749,-0.05316,0.0639,-0.03688,0.1364,-0.1965,0.03329,0.09269,-0.03478,0.08572,0.01613,-0.1028,-0.11,0.04435,-0.06267,0.06541,-0.01046,-0.3697,0.1206,0.06543,-0.275,-0.03274,0.08402,0.2633,-0.001414,-0.2518,-0.1568,0.07361,0.4401,-0.03245,-0.4725,-0.07206,-0.1794,-0.01608,0.05386,-0.06568,-0.1212,0.004216,0.09979,-0.2353,-0.144,0.04369,-0.105,-0.1693,-0.04446,0.2298,-0.2374,-0.1824,0.1623,0.05206,-0.0868,0.158,-0.2036,-0.02469,-0.06511,0.9915,0.00738,0.2882,0.358,0.06679,-0.03172,-0.2064,0.2672,0.2237,-0.1283,0.1864,0.05127,0.07398,-0.08723,0.03424,0.0333,0.05443,-0.2561,0.06124,0.02811,0.02353,-0.1617,-0.207,-0.2072,-0.09049,0.2434,0.06131,-0.08481,-0.006555,-0.09749],[0.004515,0.02832,0.0249,-0.05458,-0.06546,-0.2056,0.2308,-0.009368,0.02,0.02705,0.01993,0.1349,-0.003535,0.1948,-0.0832,-0.09138,0.05519,-0.1136,-0.1175,0.03484,0.02859,0.07748,0.04976,0.08964,-0.01935,-0.1197,-0.2056,0.2072,-0.06463,0.07897,-0.0155,-0.4146,0.1429,0.07479,-0.2131,-0.0285,0.1199,0.07129,0.02171,-0.2191,-0.1471,-0.01813,0.1076,0.2155,-0.4197,-0.1497,0.1715,-0.08643,0.02804,-0.1561,-0.1186,0.09903,-0.1063,0.07061,-0.0677,0.04031,-0.09313,-0.1473,0.1104,0.05545,-0.01413,0.06951,0.009063,0.01846,0.1101,0.2428,0.01954,0.004946,-0.0708,0.9436,0.02415,0.3526,0.3744,-0.2279,-0.01156,-0.1291,0.2347,-0.04463,0.1567,0.02029,0.05204,0.0709,-0.179,-0.0006309,-0.04795,0.06393,-0.2424,0.1502,0.1133,0.1804,-0.06425,-0.08413,-0.2373,-0.07175,0.1947,-0.003733,-0.1808,0.09082,-0.09642]],"trainingOutputVectorTargetMean":[0.02405,0.02226]},"experiments":{},"numberTrainingVisits":66126918,"previousVisitsHistoryVectorDimension":67,"targetingSegments":{"127712":{"probabilityLearner":{"beforeMean":[0.03836,0.2127,0.2756,0.000002975,0.000002108,0.000007269,0,0.01823,0.1563,0.1973,0.0000026,6.107e-7,0.000002915,0,0.01006,0.1205,0.1503,0.000002285,5.91e-8,0.000001793,0,0.08443,1.058,1.35,0.00001932,0.000003309,0.00001436,0,1.828,129800000,93560000,3.327,216700000,138200000,0.5665,0.5104,0.4755,22.3,22.3,90840000,114300000,0,0.1222,11.76,0,0,0,0,0,0,0,0,0,7.125,6.369,0,0,0,0,0,0,0,0,0,0,0,0.005953,0.31,0.4205,0.000002994,0.000001221,0.000003191,0,0.000686,0.02784,0.03973,2.364e-7,7.88e-8,7.88e-8,0,0.00004105,0.001033,0.001238,1.97e-8,0,0,0,0.006706,0.339,0.4616,0.00000325,0.0000013,0.00000327,0,0.5608,6484,77.77,0.9994,0.3114,0.07515,1.409,1.409,18750,650.3,0,0,0,0,0,0,0,0,0,0.8064,0,0,0,0,0,0.0001027,0.01845,1254000000,87.95,0.9998,0.006233,0.3067,0.4164,0.000002915,0.000001221,0.000003073,0.4928,1,1,0.5447,0.04945,0.0766,0.2456,0.008605,0.07507,101.8,0.644,0.2867,0.05522,0.2797,0.01022,0.364,0.00000128,0.004074,841.8,736.4,858,882.3,0],"trainingOutputVectorTargetNbUpdates":50763263,"standarizeInputs":true,"outputDimension":1,"bias":[-3.989],"inputDimension":153,"beforeDeviation":[0.1921,0.4092,0.4468,0.001725,0.001452,0.002696,0,0.1338,0.3631,0.398,0.001613,0.0007815,0.001707,0,0.09981,0.3256,0.3574,0.001512,0.0002431,0.001339,0,0.4264,2.871,3.553,0.01357,0.002119,0.005963,0,4.146,510900000,337100000,4.103,650200000,379800000,0.4956,0.4999,0.4994,45.84,45.84,397000000,323900000,0,0.5316,179.5,0,0,0,0,0,0,0,0,0,21.06,20.61,0,0,0,0,0,0,0,0,0,0,0,0.07693,0.4625,0.4936,0.00173,0.001105,0.001786,0,0.02618,0.1645,0.1953,0.0004862,0.0002807,0.0002807,0,0.006407,0.03212,0.03517,0.0001404,0,0,0,0.08452,0.5294,0.5738,0.00195,0.001191,0.001841,0,0.5879,70700,5502,0.02451,0.4631,0.2636,0.7399,0.7399,122800,15500,0,0,0,0,0,0,0,0,0,3.774,0,0,0,0,0,0.01078,4.044,4023000000,392.3,0.01293,0.0787,0.4611,0.493,0.001707,0.001105,0.001753,0.4999,1.818e-13,1.818e-13,0.498,0.2168,0.266,0.4304,0.09236,0.2635,62.58,0.4788,0.4522,0.2284,0.4489,0.1006,0.4812,0.001132,0.0637,611.2,168.9,649.1,148.4,0],"weights":[[-0.01741,0.009692,0.02824,-0.05579,-0.1714,-0.06871,0.1862,0.00871,0.008016,0.02257,-0.08851,-0.1514,-0.184,0.0235,-0.04487,-0.08103,0.02385,0.1035,-0.1804,0.09472,0.04313,0.07147,0.03835,0.06434,-0.05485,0.02653,-0.1796,0.08885,-0.003792,0.06898,-0.008159,-0.4222,0.1196,0.05978,-0.04728,-0.02061,0.04937,0.05188,0.0283,-0.1391,-0.1016,0.009282,0.3556,-0.3905,0.03749,-0.1929,0.1714,0.0597,0.1808,-0.1108,-0.05574,-0.1579,-0.03124,0.04237,-0.09698,-0.1695,0.1042,0.1036,-0.0833,0.01526,0.1522,0.06502,0.08415,0.0332,-0.06836,-0.1186,0.1047,0.09324,0.2232,-0.177,-0.01125,0.05416,0.04419,0.1118,-0.05421,0.004643,-0.08445,-0.08203,0.0847,0.05052,-0.005855,0.08148,-0.01424,0.1962,-0.1782,0.1858,-0.04519,-0.1486,0.1169,-0.08099,0.04039,-0.1023,-0.05143,0.01668,-0.1117,0.06641,-0.06953,-0.01879,0.1437,-0.007361,0.0206,0.03004,-0.09118,-0.02348,0.04899,0.07541,0.1871,0.000536,0.05203,-0.1117,0.01661,0.00856,0.1814,0.2726,0.1139,-0.1675,-0.03354,0.1762,-0.09017,0.5691,-0.01284,0.05747,-0.07765,0.6828,0.1504,0.06719,0.1898,-0.1318,0.05579,-0.1678,0.05943,-0.0963,-0.1638,0.1835,0.1297,0.1647,-0.0635,0.07147,0.06892,-0.003014,-0.2279,0.08342,0.08526,0.1052,-0.04761,-0.1112,-0.1614,0.04755,0.1829,-0.03652,-0.1888,0.08975,-0.1872]],"trainingOutputVectorTargetMean":[0.02892]},"previousVisitsHistoryVectorDimension":65,"visitHistoryVectorDimension":56},"127713":{"probabilityLearner":{"beforeMean":[0.04312,0.2191,0.2801,0.000003389,0.000002236,0.000008392,0,0.02059,0.1627,0.2028,0.000002951,5.764e-7,0.000003389,0,0.01135,0.1262,0.1556,0.000002628,4.611e-8,0.000002052,0,0.09492,1.108,1.399,0.00002204,0.000003366,0.00001655,0,1.915,131400000,95690000,3.566,218400000,143300000,0.5907,0.5382,0.5049,24.67,24.67,87640000,115600000,0,0.1344,12.95,0,0,0,0,0,0,0,0,0,7.466,6.741,0,0,0,0,0,0,0,0,0,0,0,0.006912,0.3001,0.3971,0.000003251,0.000001176,0.00000355,0,0.0007981,0.04873,0.06827,4.38e-7,4.611e-8,1.614e-7,0,0.00005429,0.00344,0.0045,2.306e-8,0,2.306e-8,0,0.007794,0.3526,0.4703,0.000003712,0.000001222,0.000003735,0,0.5785,12560,307.4,0.9993,0.4588,0.1762,1.758,1.758,31740,2147,0,0,0,0,0,0,0,0,0,1.181,0,0,0,0,0,0.000139,0.02173,1169000000,98.12,0.9997,0.007246,0.2959,0.3914,0.000003066,0.000001176,0.000003389,0.5151,1,1,0.5452,0.05364,0.08251,0.2349,0.009162,0.07459,103,0.6139,0.3112,0.05965,0.2664,0.01096,0.3472,0.000001499,0.004523,879.3,740.1,897.4,886.5,0],"trainingOutputVectorTargetNbUpdates":43374228,"standarizeInputs":true,"outputDimension":1,"bias":[-3.718],"inputDimension":153,"beforeDeviation":[0.2031,0.4136,0.449,0.001841,0.001495,0.002897,0,0.142,0.3691,0.4021,0.001718,0.0007592,0.001841,0,0.106,0.3321,0.3625,0.001621,0.0002147,0.001432,0,0.4525,2.95,3.642,0.01448,0.002126,0.006374,0,4.258,510000000,339500000,4.181,645100000,384100000,0.4917,0.4985,0.5,48.28,48.28,384200000,321600000,0,0.5613,192.3,0,0,0,0,0,0,0,0,0,21.82,20.68,0,0,0,0,0,0,0,0,0,0,0,0.08285,0.4583,0.4893,0.001803,0.001084,0.001884,0,0.02824,0.2153,0.2522,0.0006619,0.0002147,0.0004017,0,0.007368,0.05855,0.06693,0.0001518,0,0.0001518,0,0.09108,0.5773,0.6312,0.002163,0.001126,0.002026,0,0.6537,96190,10690,0.02605,0.4983,0.381,1.107,1.107,151400,26220,0,0,0,0,0,0,0,0,0,4.227,0,0,0,0,0,0.01297,4.41,3874000000,417,0.01702,0.08482,0.4565,0.4881,0.001751,0.001084,0.001841,0.4998,1.907e-13,1.907e-13,0.498,0.2253,0.2751,0.424,0.09528,0.2627,62.14,0.4868,0.463,0.2368,0.4421,0.1041,0.4761,0.001224,0.0671,622.2,172.5,661.7,152.3,0],"weights":[[-0.000488,0.01557,0.0227,-0.03178,-0.1668,-0.1749,0.1412,-0.005509,0.003938,0.03391,-0.1237,-0.01111,-0.2137,0.0345,-0.06683,-0.09705,0.02136,-0.147,0.00453,-0.1133,-0.01734,0.0857,0.02566,0.04215,0.04926,-0.03281,-0.08215,0.1362,0.007837,0.06839,-0.01387,-0.4634,0.1016,0.06244,-0.04284,-0.04196,0.03788,0.0363,0.01975,-0.1247,-0.09175,0.09672,0.368,-0.4023,0.08802,-0.1053,0.09988,-0.035,-0.04225,-0.1954,0.1109,-0.04849,0.1116,0.04161,-0.06991,0.06128,-0.02462,0.1082,-0.01016,-0.0967,-0.01449,0.1954,0.07102,-0.01366,0.1261,0.1387,0.0788,-0.01625,0.05356,-0.05189,0.1157,-0.1654,-0.06072,0.121,-0.1638,-0.0466,-0.04276,-0.01552,0.08482,-0.1892,0.0425,-0.124,0.01073,0.1728,0.1102,-0.1742,0.1312,-0.1122,0.3194,0.2098,-0.1389,0.04018,-0.1766,0.02797,-0.2339,-0.02286,0.01327,-0.03698,0.2581,0.08501,-0.04879,0.02991,-0.0512,-0.05816,0.05791,0.08755,-0.03057,-0.1447,0.06351,-0.1652,0.03915,-0.1712,-0.1723,0.205,-0.001898,0.1298,0.07825,-0.1081,-0.132,0.3815,0.1432,0.06359,-0.09337,0.8578,0.09075,0.03003,0.1109,-0.006052,0.0006063,-0.09305,-0.06298,0.1617,0.02275,0.05633,0.07767,0.09695,-0.1734,0.003385,-0.01767,0.01143,-0.1953,0.1748,0.1422,0.1832,-0.01621,-0.005963,0.1138,0.06614,0.1681,-0.031,-0.1828,0.07959,-0.1019]],"trainingOutputVectorTargetMean":[0.03381]},"previousVisitsHistoryVectorDimension":65,"visitHistoryVectorDimension":56},"127714":{"probabilityLearner":{"beforeMean":[0.04995,0.2284,0.2879,0.000003941,0.000002449,0.000009852,0,0.02399,0.1711,0.2104,0.000003462,5.63e-7,0.000004053,0,0.01321,0.1334,0.1625,0.00000304,5.63e-8,0.000002393,0,0.11,1.171,1.463,0.00002567,0.000003547,0.00001925,0,2.031,135100000,99130000,3.871,222800000,150500000,0.6243,0.5749,0.5426,27.65,27.65,85700000,118400000,0,0.1485,14.3,0,0,0,0,0,0,0,0,0,7.84,7.147,0,0,0,0,0,0,0,0,0,0,0,0.008285,0.2888,0.3709,0.000003659,0.000001295,0.000004025,0,0.0009584,0.07188,0.09767,7.881e-7,1.407e-7,2.533e-7,0,0.00008281,0.01008,0.01357,5.63e-8,0,8.444e-8,0,0.009368,0.3726,0.4843,0.000004504,0.000001436,0.000004391,0,0.6058,22110,1080,0.9991,0.592,0.3103,2.304,2.304,51260,6371,0,0,0,0,0,0,0,0,0,1.779,0,0,0,0,0,0.0003296,0.03289,1092000000,112.2,0.9995,0.008697,0.2832,0.3629,0.000003406,0.000001239,0.0000038,0.5401,1,1,0.5502,0.05846,0.08955,0.2214,0.009917,0.07048,103.6,0.5773,0.3409,0.06516,0.2455,0.01186,0.3315,0.000001604,0.005078,924.5,745.1,945.1,891.7,0],"trainingOutputVectorTargetNbUpdates":35526349,"standarizeInputs":true,"outputDimension":1,"bias":[-3.704],"inputDimension":153,"beforeDeviation":[0.2178,0.4198,0.4528,0.001985,0.001565,0.003139,0,0.153,0.3766,0.4076,0.001861,0.0007503,0.002013,0,0.1142,0.34,0.3689,0.001744,0.0002373,0.001547,0,0.4874,3.043,3.752,0.01562,0.002162,0.006736,0,4.396,513200000,343900000,4.255,643600000,390800000,0.4843,0.4944,0.4982,51.21,51.21,374100000,321100000,0,0.5962,208.8,0,0,0,0,0,0,0,0,0,22.48,21.39,0,0,0,0,0,0,0,0,0,0,0,0.09064,0.4532,0.483,0.001913,0.001138,0.002006,0,0.03094,0.2583,0.2969,0.0008878,0.0003752,0.0005033,0,0.0091,0.0999,0.1157,0.0002373,0,0.0002906,0,0.09991,0.6431,0.7068,0.002511,0.001289,0.002313,0,0.7418,125300,19720,0.02978,0.4915,0.4626,1.679,1.679,184200,43040,0,0,0,0,0,0,0,0,0,4.994,0,0,0,0,0,0.01945,5.697,3719000000,450.3,0.0218,0.09285,0.4505,0.4808,0.001846,0.001113,0.001949,0.4984,1.969e-13,1.969e-13,0.4975,0.2346,0.2855,0.4152,0.09909,0.2559,59.92,0.494,0.474,0.2468,0.4304,0.1082,0.4708,0.001267,0.07108,632.9,176.8,674.4,156.5,0],"weights":[[0.005254,0.002697,0.01854,0.07492,-0.0976,-0.06962,0.1607,-0.006389,-0.01535,0.02187,-0.02384,0.08202,0.01686,0.06297,-0.06928,-0.1164,0.006134,-0.18,0.1631,-0.03893,0.09355,0.08555,0.01007,0.02861,-0.1346,0.02851,-0.2591,0.05822,0.03927,0.08491,-0.01947,-0.4535,0.07618,0.06373,-0.03979,-0.05952,-0.01203,-0.05728,0.05388,-0.08414,-0.07023,0.004408,0.3751,-0.4302,-0.111,0.002139,-0.1721,-0.1363,-0.1933,0.112,0.01432,0.08723,0.1925,0.01677,-0.05,0.1784,0.1232,-0.01364,0.1122,0.09752,0.1281,0.1147,0.1286,-0.1805,0.1539,-0.001106,0.005134,0.08376,-0.02437,-0.06702,-0.01366,0.02229,-0.1355,0.1371,-0.03833,-0.06554,0.1118,-0.09702,-0.03152,-0.171,0.03093,-0.04879,-0.1109,0.1844,-0.1313,0.02554,-0.1484,-0.05511,0.2071,0.2876,-0.1778,0.1713,-0.1223,-0.0889,-0.3037,-0.1338,-0.008164,-0.05029,0.3251,0.1986,0.1004,0.03787,-0.01646,-0.04985,0.09766,0.1052,0.1231,-0.1278,-0.08813,-0.05837,-0.07273,-0.09906,0.1576,0.2571,0.1133,-0.1027,0.1765,0.000371,-0.1273,-0.1016,0.3056,0.06897,-0.09339,0.9287,0.06185,-0.01248,0.08576,0.0119,-0.06795,-0.1168,-0.2225,0.0191,0.06041,0.05165,0.08676,0.09024,-0.1641,-0.009678,-0.02225,0.02062,-0.1249,0.05543,0.0826,0.04872,-0.05771,-0.1511,-0.001219,-0.01621,0.1727,-0.0419,-0.176,0.06176,-0.008886]],"trainingOutputVectorTargetMean":[0.04107]},"previousVisitsHistoryVectorDimension":65,"visitHistoryVectorDimension":56}},"visitHistoryVectorDimension":58},"MentalistFeatures":{"keyWords":[],"code":"m3t5ausedb","languages":[],"inputGoalIds":[204333,210418],"keyPages":[],"experiments":{},"customData":[],"browsers":[0,1,2,3,4],"oss":[0,1,2,3,4,5],"numberValuesByCustomDatum":{},"maxNumberPreviousVisits":10,"referrers":[0,1,2,3,4,5],"maxAbsoluteValueAfterStandardization":5,"outputGoalIds":[204333,210418],"interests":[],"targetingSegments":{"127712":{"inputGoalIds":[210418],"outputGoalIds":[210418]},"127713":{"inputGoalIds":[210418],"outputGoalIds":[210418]},"127714":{"inputGoalIds":[210418],"outputGoalIds":[210418]}},"timeZoneGroups":[]},"isNewEditorEnabled":true}};
})();if (window.kameleoonLightIframe){if (window.kameleoonExternalIFrameLoadedData) { window.kameleoonQueue = window.kameleoonQueue || [];window.kameleoonQueue.push({level: 'IMMEDIATE',command: function () {Kameleoon.Utils.runProtectedScript(window.kameleoonExternalIFrameLoadedData);}}); Kameleoon.Analyst.load();}}else{Kameleoon.Analyst.load();}}