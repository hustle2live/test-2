var __extends,PlatMod,NextFavourites;(function(n){var t=window,i=function(){function n(){this.ValidItemsCount=0;this.InvalidItemsCount=0}return n}(),r,u;n.FavouritesData=i;r=function(){function n(){this.OptionNo="-1";this.LinkedItemNumber=undefined;this.LinkedOptionNo=undefined}return
n}();n.ShoppingListItem=r;u=function(){function n(){this.Data=new i;this.NotifyError=[];this.InboundQueue=[];this.OutboundQueue=[];this.Errors=[];this.EventsWaiting=!1}return n.prototype.Init=function(){},n.prototype.BindEvents=function(){},n.prototype.FLPUpdatePrice=function(n){var
i=$(n).parents(".item-details").find(".item-price").text(),t=$(n).find("option:selected").attr("data-price-text");t.length>0&&i!==t&&$(n).parents(".item-placeholder").find(".item-price").text(t);Next.Settings.UI.EnableItemStockMessage&&$(n).parents(".item-placeholder").find(".btn-addtobag").text("Add
To Bag")},n.prototype.FLPUpdateSelectedButton=function(n){var i=$(n).parents(".selectors").siblings(".add-to-bag").find(".btn-addtobag").text(),t="CURRENTLY UNAVAILABLE";t.length>0&&i!==t&&$(n).parents(".item-placeholder").find(".btn-addtobag").text("CURRENTLY
UNAVAILABLE")},n.prototype.Load=function(){t.subjects["$ FAVOURITES_GET"].next()},n.prototype.SubscribeToEvents=function(){var n=this;typeof t.subjects!="undefined"&&(NextFavourites.Busy=!0,t.subjects["$ FAVOURITES_GET_CALLBACK"].subscribe(function(t){function
i(n){n.success?NextFavourites.Fill(NextFavourites.pageType):Next.Settings.Channel.PlatModGTMDataLayerEvents||(dataLayer[1].device_type==="mobile"?TrackGTMEvent("mSite "+NextFavourites.pageType+" Favourites","Page Load","Failed to Load Favourites",0):TrackGAEvent("Desktop
"+NextFavourites.pageType+" Favourites","Page Load","Failed to Load Favourites"));NextFavourites.Busy=!1}n.EventCallbackHandler(t,i)}))},n.prototype.BindFLPEvents=function(){},n.prototype.LoadError=function(n,t,i,r){r&&r(!1);this.Errors.push({Data:n,TextStatus:t,ErrorThrown:i});this.InboundQueue.length?this.ExecuteAction(this.InboundQueue.shift()):(this.EventsWaiting=!1,this.NotifyErrors())},n.prototype.AddRemoveFavourites=function(){},n.prototype.AddItemsToFavorites=function(){},n.prototype.ReadItem=function(){},n.prototype.ToggleFavourite=function(n,t){function
f(i){n.hasClass("desktop")||typeof TrackGTMEvent!="function"?TrackGAEvent("Desktop "+NextFavourites.pageType+" Favourites","Click",i+" Favourites list | Item Number "+t.ItemNumber):TrackGTMEvent("mSite "+NextFavourites.pageType+" Favourites","Tap",i+"
Favourites list | Item Number "+t.ItemNumber,0)}var i,e,u,r;Next.Settings.Channel.EnableResponsivePLP&&n.hasClass("icn-favourite")?(i=n.parent().attr("data-itemdesc")||"",e=n.parents(".pdp_favourites_container").find(".pdp_add-to-favourites_text"),i&&(i=i.replace(/
<\/?span[^>]*>/g,"")),n.hasClass("active")?(n.removeClass("active"),n.removeClass("loading"),f("Removed item from"),n.find("title").text("Add "+i+" to your favourites"),$(e).text("Add to Favourites")):(n.addClass("active"),n.removeClass("loading"),f("Added item
    to"),n.find("title").text("Remove "+i+" from your favourites"),$(e).text("Added to Favourites"))):n.hasClass("add")?(Next.Settings.Channel.ModularPDP&&(n.parent().parent().removeClass("add"),n.parent().parent().addClass("remove")),Next.Settings.Channel.IsHomewarePDPEnabled&&NextFavourites.pageType=="homeWarePDP"&&(u=n.closest(".nxbtn.fav.heart.desktop.hwpdp-btn-fav"),u.removeClass("add"),u.addClass("remove")),n.removeClass("add"),n.addClass("remove"),n.removeClass("loading-heart"),NextFavourites.OverlaySelectedHeart&&(r=$(".add2bag-container").find("a.heart.linked"),NextFavourites.OverlaySelectedHeart.add(r).addClass("remove"),NextFavourites.OverlaySelectedHeart.add(r).removeClass("add"),NextFavourites.OverlaySelectedHeart.add(r).removeClass("loading-heart")),NextFavourites.pageType==="sofas"&&n.hasClass("desktop")&&($(".heart").addClass("remove"),$(".heart").removeClass("add")),f("Added
    item to"),n.hasClass("desktop")||(i=n.attr("data-itemdesc").replace(/
    <\/?span[^>]*>/g,""),n.find(".sr-only").text("Remove "+i+" from your favourites"),n.siblings(".sr-only").text(i+" added to your favourites"))):(Next.Settings.Channel.ModularPDP&&(n.parent().parent().removeClass("remove"),n.parent().parent().addClass("add")),Next.Settings.Channel.IsHomewarePDPEnabled&&NextFavourites.pageType=="homeWarePDP"&&(u=n.closest(".nxbtn.fav.heart.desktop.hwpdp-btn-fav"),u.removeClass("remove"),u.addClass("add")),n.removeClass("remove"),n.addClass("add"),n.removeClass("loading-heart"),NextFavourites.OverlaySelectedHeart&&(r=$(".add2bag-container").find("a.heart.linked"),NextFavourites.OverlaySelectedHeart.add(r).addClass("add"),NextFavourites.OverlaySelectedHeart.add(r).removeClass("remove"),NextFavourites.OverlaySelectedHeart.add(r).removeClass("loading-heart")),NextFavourites.pageType==="sofas"&&n.hasClass("desktop")&&($(".heart").addClass("add"),$(".heart").removeClass("remove")),f("Removed
        item from"),n.hasClass("desktop")||(i=n.attr("data-itemdesc").replace(/
        <\/?span[^>]*>/g,""),n.find(".sr-only").text("Add "+i+" to your favourites"),n.siblings(".sr-only").text(i+" removed from your favourites")));n.hasClass("heart")&&n.siblings(".addFavouriteText").length>0&&(n.hasClass("remove")?n.siblings(".addFavouriteText").text("Added
            to Favourites"):n.siblings(".addFavouriteText").text("Add to Favourites"))},n.prototype.UpdateHeaderIcon=function(){},n.prototype.ShowMessage=function(n,t){var r=Next.Settings.Mobile.EnableUpgradedBootstrap,o=r?"dispose":"destroy",u=Next.Settings.Channel.EnableResponsivePLP&&NextFavourites.SelectedHeart.hasClass("icn-favourite")?"loading":"loading-heart",i,f,h,c,l,s,a,v,e;$(".heart,
            .style-with-heart","icn-favourite").popover(o);clearTimeout(NextFavourites.PopoverTimer);f=r?"bottom":"auto bottom";Next.Settings.Mobile.VerticalSpreadPhase2Enabled&&(f="right");i=NextFavourites.SelectedHeart.hasClass("furniture-overlay")?NextFavourites.OverlaySelectedHeart:NextFavourites.SelectedHeart;n.match("hover")?NextFavourites.PreviousHeart&&NextFavourites.PreviousHeart.removeClass(u):NextFavourites.PreviousHeart=i;$(NextFavourites.SelectedHeart).parents(".verticalTabsContainer").length>0&&(f=Next.Settings.Mobile.VerticalSpreadPhase2Enabled?"right":"left");i.hasClass("quick-view-fav")&&r&&(f="top");h=NextFavourites.SelectedHeart.offset();c=$(window).width();l=c-h.left;i.hasClass("desktop")&&l
            <150&&(f=Next.Settings.Mobile.VerticalSpreadPhase2Enabled?
                "right": "left");s=$( "."+n);a=$( "#"+n).html();i.customPopover({container: "body",content:a,html:!0,placement:f,trigger: "manual"});r?$(i.data( "bs.popover").tip).addClass(n):i.data( "bs.popover").tip().addClass(n);NextFavourites.SelectedHeart.hasClass(
                "desktop")&&(r?$(i.data( "bs.popover").tip).addClass( "desktop"):i.data( "bs.popover").tip().addClass( "desktop"));v=!Next.Settings.Channel.IsMobileSite&&$( ".ProductPage").hasClass( "SquareImagery")? "squareImageryFavPopup": "";NextFavourites.SelectedHeart!=NextFavourites.OverlaySelectedHeart&&(NextFavourites.pageType==="sofas"
                || "beds"|| "diningchairs"&&!NextFavourites.SelectedHeart.hasClass( "desktop"))&&(r?($(i.data( "bs.popover").tip).addClass( "sofasPopover"),$( ".grid-container").hasClass( "SquareImagery")&&Next.Settings.Channel.IsMobileSite&&($(i.data(
                "bs.popover").tip).addClass( "squareImageryFavPopup"),isIOS&&$(i.data( "bs.popover").tip).addClass( "squareImageryIosFavPopup"))):i.data( "bs.popover").tip().addClass( "sofasPopover "+v));($(NextFavourites.SelectedHeart).parents(
                ".verticalTabsContainer").length>0||$(NextFavourites.SelectedHeart).parents(".tabControls").hasClass("fixed"))&&(r?$(i.data("bs.popover").tip).addClass("fixed"):i.data("bs.popover").tip().addClass("fixed"));i.popover("show");n==="maxlimit-tooltip"&&$(".favouritesMaximumLimit").text(NextFavourites.Data.MaximumLimit);n==="authentication-tooltip"&&($(".authentication-tooltip").find(".username-target").text(NextFavourites.Data.SoftLoginFirstname),$(".authentication-tooltip").find("#action-target").text(t));e=function(){i.popover(o)};n.match("hover")||(NextFavourites.PopoverTimer=setTimeout(function(){e();NextFavourites.SelectedHeart.removeClass(u);$("body").removeClass("favpopover")},5e3));$(".continueShoppingLink
                a, .closePopover, .close-softLogin-tooltip").on("click",function(){e();clearTimeout(NextFavourites.PopoverTimer);NextFavourites.SelectedHeart.removeClass(u)});if(r)i.on("shown.bs.popover",function(){$("body").addClass("favpopover")});!NextFavourites.SelectedHeart.hasClass("desktop")&&this.TooltipCollision($("#nav-headers"),$(".popover."+n))&&$("html,
                body").animate({scrollTop:"-=100"},500);$(".heart").on("hover",function(){},function(){$(".addfavouritehover, .removefavouritehover").length>0&&(NextFavourites.PreviousHeart&&NextFavourites.PreviousHeart.removeClass(u),NextFavourites.SelectedHeart.removeClass(u),e())});$("body,
                #innovation-filter-header, #btn-innovation-filter, article").on("click",function(t){if(s=$("body").find("."+n),!$(t.target).is(".favouritesPopoverText, .loginPopoverText, .continueShoppingLink")&&s.length>0&&(i.popover(o),clearTimeout(NextFavourites.PopoverTimer),NextFavourites.PreviousHeart)){var
                r=NextFavourites.PreviousHeart.siblings(".addFavouriteText");$(t.target).is(NextFavourites.PreviousHeart)||$(t.target).is(r)||(NextFavourites.PreviousHeart.removeClass(u),clearTimeout(NextFavourites.PopoverTimer))}});NextFavourites.OverlaySelectedHeart=undefined},n.prototype.TooltipCollision=function(n,t){if(n.length>0&&t.length>0){var
                i=n.offset().left,r=n.offset().top,e=n.outerHeight(!0),o=n.outerWidth(!0),s=r+e,h=i+o,u=t.offset().left,f=t.offset().top,c=t.outerHeight(!0),l=t.outerWidth(!0),a=f+c,v=u+l;return s
                <f||r>a||h
                    <u||i>v?!1:!0}return!1},n.prototype.RemoveItemFromFLP=function(){},n.prototype.MoveItemFromFLPToBag=function(){},n.prototype.DisplayMoveNotification=function(){},n.prototype.DisplayMoveFailedNotification=function(){},n.prototype.RemoveMovedItem=function(){},n.prototype.DisplayMaximumLimitBanner=function(){},n.prototype.DisplayMovedToBagNotification=function(){},n.prototype.isTouchDevice=function(){return"ontouchstart"in
                        document.documentElement},n.prototype.ProcessResponse=function(n,t){var r=this,i;n.success?t&&setTimeout(function(){t(!0)},500):(i="",n.ErrorMessage==="MaximumLimitExceeded"&&(i="maxlimit-tooltip"),n.ErrorMessage==="TooManyRequests"&&(i="toomany-tooltip"),r.ShowMessage(i),NextFavourites.SelectedHeart.hasClass("desktop")||NextFavourites.SelectedHeart.siblings(".sr-only").text("You
                        have reached your limit of "+NextFavourites.Data.MaximumLimit+" items. Please review your Favourites List to keep this item"),NextFavourites.OverlaySelectedHeart&&NextFavourites.OverlaySelectedHeart.removeClass("loading-heart"),t&&t(!1));this.InboundQueue.length?this.ExecuteAction(this.InboundQueue.shift()):(this.EventsWaiting=!1,this.NotifyErrors())},n.prototype.EventCallbackHandler=function(n,t,i){var
                        r={getResponseHeader:function(){return!1},status:n.status};n.success?NextFavourites.Data=n.data:NextFavourites.LoadError(r,n.textStatus,null);t&&t(n);i&&i.unsubscribe()},n.prototype.AddItem=function(n,t){var i=0,f=this,r,u;NextFavourites.Data.ShoppingLists&&NextFavourites.Data.ShoppingLists[0]&&(i=f.Data.ShoppingLists[0].ListId);r={ItemNumber:n.ItemNumber,OptionCode:n.OptionNo,ItemUrl:n.ItemURL,LinkedItemNumber:n.LinkedItemNumber,LinkedOptionNo:n.LinkedOptionNo,ListId:i};u={actionPath:"favourite",postData:r,actionType:"add",httpverbType:"POST",refreshList:!0,callBack:t};this.AddAction(u)},n.prototype.RemoveItem=function(n,t){var
                        f=this,i=0,r,u;i=n.ListId?n.ListId:f.Data.ShoppingLists[0].ListId;r={ListId:i,ItemNumber:n.ItemNumber,OptionCode:n.OptionNo,LinkedItemNumber:n.LinkedItemNumber,LinkedOptionNo:n.LinkedOptionNo};u={actionPath:"favourite/remove",postData:r,actionType:"remove",httpverbType:"POST",refreshList:!0,callBack:t};this.AddAction(u)},n.prototype.AddAction=function(n){if(this.InboundQueue.push(n),!this.EventsWaiting){this.EventsWaiting=!0;var
                        t=this.InboundQueue.shift();this.ExecuteAction(t);this.InboundQueue.length?this.ExecuteAction(this.InboundQueue.shift()):(this.EventsWaiting=!1,this.NotifyErrors())}},n.prototype.ExecuteAction=function(n){function u(){switch(n.actionType){case"add":var
                        u="$ FAVOURITES_ADD",f="$ FAVOURITES_ADD_CALLBACK",e=n.callBack,s={itemNumber:n.postData.ItemNumber,optionCode:n.postData.OptionCode,itemUrl:n.postData.ItemURL,linkedItemNumber:n.postData.LinkedItemNumber,linkedOptionNo:n.postData.LinkedOptionNo,listId:n.postData.ListId,eventId:i},o=t.subjects[f].subscribe(function(n){function
                        t(n){r.ProcessResponse(n,e)}i===n.eventId&&r.EventCallbackHandler(n,t,o)});t.subjects[u].next(s);return;case"remove":var u="$ FAVOURITES_REMOVE",f="$ FAVOURITES_REMOVE_CALLBACK",e=n.callBack,h={itemNumber:n.postData.ItemNumber,optionCode:n.postData.OptionCode,linkedItemNumber:n.postData.LinkedItemNumber,linkedOptionNo:n.postData.LinkedOptionNo,listId:n.postData.ListId,eventId:i},o=t.subjects[f].subscribe(function(n){function
                        t(n){r.ProcessResponse(n,e)}i===n.eventId&&r.EventCallbackHandler(n,t,o)});t.subjects[u].next(h);return}}var i=Date.now().toString(),r=this;u()},n.prototype.Fill=function(n){switch(n){case"productPage":case"BeautyproductPage":case"productPageModal":this.FillFavouriteItems();this.FillStyleWithFavouriteItems();break;case"productListPage":case"searchResults":this.FillPLPFavouriteItems();break;case"sofas":case"beds":case"diningchairs":this.FillLinkedFavouriteItems();break;case"spread":this.FillVerticalSpreadPopupFavouriteItems();break;case"SocialPLP":this.FillFavouriteItems();this.FillPLPFavouriteItems();break;case"MobileSocialPLP":this.FillMobileSocialPLPFavouritesItems();this.FillMobileSocialPLPResponsivePLPFavouritesItems();break;case"homeWarePDP":this.FillHomewarePDPStylewithFavouritesItems();this.FillHomewarePDPMainFavouritesItems();this.FillFavouriteItems();this.FillStyleWithFavouriteItems()}},n.prototype.FillQuickBuyFavouriteItems=function(){},n.prototype.FillFavouriteItems=function(){},n.prototype.FillStyleWithFavouriteItems=function(){},n.prototype.FillPLPFavouriteItems=function(){},n.prototype.FillLinkedFavouriteItems=function(){},n.prototype.FillVerticalSpreadPopupFavouriteItems=function(){},n.prototype.FillMobileProductTrayFavouriteItems=function(){},n.prototype.FillResponsiveFavouriteItems=function(){},n.prototype.FillResponsiveStyleWithFavouriteItems=function(){},n.prototype.FillMobileSocialPLPFavouritesItems=function(){},n.prototype.FillMobileSocialPLPResponsivePLPFavouritesItems=function(){},n.prototype.FillHomewarePDPStylewithFavouritesItems=function(){},n.prototype.FillHomewarePDPMainFavouritesItems=function(){},n.prototype.NotifyErrors=function(){var
                        t,n;if(this.Errors.length)for(t="Favourites Error",ConsoleLog("Error were detected when receiving response from Favourites"),n=0;n
                        <this.Errors.length;n++){NextFavourites.SelectedHeart&&(NextFavourites.SelectedHeart.removeClass(
                            "loading-heart"),NextFavourites.SelectedHeart.hasClass( "remove-item-link")||this.ShowMessage( "error-tooltip"));try{ConsoleLog(t+ ": "+this.Errors[n].TextStatus+ " - "+this.Errors[n].ErrorThrown)}catch(i){}}},n.prototype.GetCookie=function(n){for(var
                            t,r=n+ "=",f=decodeURIComponent(document.cookie),u=f.split( ";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" " ;)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return ""},n.prototype.ReadItemFromQuickBuyTray=function(n,t){var
                            u=n.attr( "data-productid"),f=n.closest( "#quickBuyTray").find( "#tray-sizeselector option").length>1,i=n.closest("#quickBuyTray").find("#tray-sizeselector option:selected"),r="-1";i&&(r=f?i.val():"-1");t.ItemNumber=u;t.OptionNo=r},n}();n.Favourites=u;$(function(){var n=!1;dataLayer[2].monetate_enabled!=undefined&&(n=dataLayer[2].monetate_enabled);NextFavourites.pageType=dataLayer[0].page_type;window.location.href.indexOf("favourites")>-1&&NextFavourites.BindFLPEvents()})})(PlatMod||(PlatMod={}));__extends=this&&this.__extends||function(){var
                            n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new
                            r)}}(),function(n){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.FillFavouriteItems=function(){$("section.StyleCopy").each(function(){var i,o=$(this).parents("article").first(),t=$(this).find(".heart"),r,s;Next.Settings.Channel.IsHomewarePDPEnabled&&typeof
                            isHomewarePDPPage!="undefined"&&typeof isHomewarePDPPortrait!="undefined"&&isHomewarePDPPage&&!isHomewarePDPPortrait&&!isHomewarePDPSquareTemplate&&(t=$(".FavIconContainer .heart"));var u=o.data("targetitem"),f=$("select#Size-"+u+".Selector.SizeSelector.dk_option_current").first().val(),e=$(this).find("#dk_container_Size-"+u),n=o.attr("data-optionnumber"),h=e.find("ul
                            li").length;for(typeof f=="undefined"||f==""||typeof n!="undefined"&&n!=""?(r=e.find("ul li.dk_option_current").first(),s=(r.length===0||r.index(e.find("ul li"))==0)&&r.find("a.dk_dropdown_option").first().data("dk-dropdown-value")==""?!0:!1,s&&(n=r.find("a.dk_dropdown_option").first().data("dk-dropdown-value"))):n=f,(n===null||n==""||typeof
                            n=="undefined"||h==1)&&(n="-1"),t.hasClass("remove")&&(t.removeClass("remove"),t.addClass("add")),i=0;i
                            <NextFavourites.Data.ShoppingListItems.length;++i)u===NextFavourites.Data.ShoppingListItems[i].ItemNumber&&n===NextFavourites.Data.ShoppingListItems[i].OptionCode&&(t.removeClass(
                                "add"),t.addClass( "remove"))})},i.prototype.FillPLPFavouriteItems=function(){NextFavourites.Data.ShoppingLists&&$( "article.Item").each(function(){for(var t=$(this).find( ".heart"),i=$(this).attr( "data-itemnumber").match(/.{3}/g).join(
                                "-"),n=0;n<NextFavourites.Data.ShoppingListItems.length;++n)i===NextFavourites.Data.ShoppingListItems[n].ItemNumber&&NextFavourites.Data.ShoppingListItems[n].OptionCode==="-1" &&(t.removeClass( "add"),t.addClass( "remove"))})},i.prototype.FillLinkedFavouriteItems=function(){var
                                n,t,r;t=Next.Settings.Channel.EnableSofaBuilderRedesign!=undefined&&Next.Settings.Channel.EnableSofaBuilderRedesign?$( "section.accordianContent"):$( "section.tabbedContent");var i=t.find( ".heart"),u=t.find(
                                "#hdnItemNumber").val().match(/.{3}/g).join( "-"),f=t.find( "#hdnOptionCode").val(),e=t.find( "#hdnLinkedOptionCode").val();for(r=$( "#hdnLinkedItemNumber").val()?t.find( "#hdnLinkedItemNumber").val().match(/.{3}/g).join( "-"): "",i.hasClass(
                                "remove")&&(i.removeClass( "remove"),i.addClass( "add")),n=0;n<NextFavourites.Data.ShoppingListItems.length;++n)u===NextFavourites.Data.ShoppingListItems[n].ItemNumber&&f===NextFavourites.Data.ShoppingListItems[n].OptionCode&&r===NextFavourites.Data.ShoppingListItems[n].LinkedItemNumber&&e===NextFavourites.Data.ShoppingListItems[n].LinkedOptionNo&&(i.removeClass(
                                "add"),i.addClass( "remove"))},i.prototype.FillMobileProductTrayFavouriteItems=function(){var t=NextFavourites.Data.ShoppingListItems,n=$( "#quickBuyTray");if(t&&n&&t.length!==0){var r=n.find( "#mpt-colourselector"),i=n.find(
                                "#tray-sizeselector"),u=n.find( ".divFavouritesContainer a.heart").first();if(i&&r){var o=r.find( "option:selected").val(),s=i.find( "option").length>1,h=i.find("option:selected"),f=s?h.val():"-1",e=t.find(function(n){return n.ItemNumber===o&&n.OptionCode===f});e&&e.OptionCode===f?u.addClass("remove").removeClass("add"):u.removeClass("remove").addClass("add")}}},i.prototype.BindEvents=function(){function
                                f(){$(".heart.add, .style-with-heart.add, .heart.remove, .style-with-heart.remove").click(function(n){n.preventDefault();t=this.className.split(" ")[0];var u=$(this);return r(n,t,u,i)})}function r(n,t,i,r){if(NextFavourites.SelectedHeart=i,!NextFavourites.Busy)if(NextFavourites.Data.ShoppingLists!=undefined&&NextFavourites.Data.ShoppingLists!=null)i.addClass("loading-heart"),NextFavourites.ReadItem(t,i,r),u.AddRemoveFavourites(n,t,i,r);else
                                return NextFavourites.ShowMessage("error-tooltip"),!1}var u=this,t,i=new n.ShoppingListItem;if($(".heart.add,.style-with-heart.add, .heart.remove, .style-with-heart.remove, .nxbtn.tertiary.fav.heart.desktop").unbind(),typeof
                                userConsent!="undefined"&&!userConsent.isConsentFeatureAllowed(UserConsentModule.ConsentFeatures.EnableFavourites)){$(".heart.add,.style-with-heart.add, .heart.remove, .style-with-heart.remove, .nxbtn.tertiary.fav.heart.desktop").click(function(n){return
                                userConsent.handleConsentFeatureClickEvent(n)});return}Next.Settings.Channel.ModularPDP&&(NextFavourites.pageType==="productPage"||NextFavourites.pageType==="BeautyproductPage"||NextFavourites.pageType==="productPageModal"||NextFavourites.pageType==="homeWarePDP")?($(".nxbtn.tertiary.fav.heart.desktop").click(function(n){n.preventDefault();t=this.className.split("
                                ")[0];var u=$(this).find("div.heart");return r(n,t,u,i)}),$(".quick-view-fav.heart.add,.quick-view-fav.heart.remove").click(function(n){n.preventDefault();t=this.className.split(" ")[0];var u=$(this);return r(n,t,u,i)})):f();$(".nxbtn.tertiary.fav.heart.desktop").hover(function(n){if(NextFavourites.pageType==="productPage"||NextFavourites.pageType==="BeautyproductPage"||NextFavourites.pageType==="productPageModal"||NextFavourites.pageType==="homeWarePDP")if(n.preventDefault(),NextFavourites.SelectedHeart=$(this),NextFavourites.Data.ShoppingLists!=undefined&&NextFavourites.Data.ShoppingLists!=null)NextFavourites.isTouchDevice()||($(this).hasClass("add")?NextFavourites.ShowMessage("addfavouritehover"):NextFavourites.ShowMessage("removefavouritehover"));else
                                return NextFavourites.ShowMessage("error-tooltip"),!1},function(){var n=Next.Settings.Mobile.EnableUpgradedBootstrap?"dispose":"destroy";$(this).popover(n)})},i.prototype.AddRemoveFavourites=function(n,t,i,r){function u(n){if(n)switch(NextFavourites.pageType){case"favouritesListPage":NextFavourites.RemoveItemFromFLP(r);break;default:if(NextFavourites.ToggleFavourite(i,r),!NextFavourites.Data.HardLogoutPromptDisplayed&&NextFavourites.Data.IdentifiedUser){var
                                t="added to";i.hasClass("add")&&(t="removed from");NextFavourites.ShowMessage("authentication-tooltip",t)}else NextFavourites.Data.FavouriteLoginPromptDisplayed||NextFavourites.Data.SoftLoginFirstname||NextFavourites.ShowMessage("login-tooltip")}else
                                NextFavourites.Busy=!1,console.log("Error adding / removing favourite"),TrackGAEvent("Desktop "+NextFavourites.pageType+" Favourites","Click","Error Add/Remove Item to Favourites "+r.ItemNumber),i&&i.removeClass("loading-heart"),NextFavourites.pageType==="favouritesListPage"&&(i.siblings(".remove-loading-spinner").css("display","none"),$("#warning-notification").slideDown(),$("#warning-notification").find("#warning-notification-text-target").empty().append("There
                                was a problem removing the item from the list."),clearTimeout(NextFavourites.PopoverTimer),NextFavourites.PopoverTimer=setTimeout(function(){$("#warning-notification").slideUp("slow")},7e3))}var f=this;n.preventDefault();i&&(i.hasClass("add")?NextFavourites.AddItem(r,u):NextFavourites.RemoveItem(r,u))},i.prototype.ReadItem=function(n,t,i){function
                                e(){u=t.parents("article").first();r=t.parents("section.StyleCopy").first();Next.Settings.Channel.IsHomewarePDPEnabled&&typeof isHomewarePDPPage!="undefined"&&typeof isHomewarePDPPortrait!="undefined"&&isHomewarePDPPage&&!isHomewarePDPPortrait&&(u=$("article.Style").first(),r=$("section.StyleCopy").first());i.ItemNumber=u.data("targetitem");f=r.find("#dk_container_Size-"+i.ItemNumber);i.OptionNo=u.attr("data-optionnumber");var
                                e=f.find("ul li").length,n=f.find("ul li.dk_option_current").first(),o=(n.length===0||n.index(f.find("ul li"))==0)&&n.find("a.dk_dropdown_option").first().data("dk-dropdown-value")==""?!0:!1;o&&(i.OptionNo=n.find("a.dk_dropdown_option").first().data("dk-dropdown-value"));(i.OptionNo===null||i.OptionNo==""||typeof
                                i.OptionNo=="undefined"||e==1)&&(i.OptionNo="-1")}function o(){var n,f;u=t.parents("article.Item").first();r=t.parents("section.Details").first();n=u.attr("data-itemnumber");n!=undefined&&(n=n.substring(0,3)+"-"+n.substring(3));i.ItemNumber=n;f=u.find(".Title
                                a").first().attr("data-label");i.ItemDescription=f}function h(){r=Next.Settings.Channel.EnableSofaBuilderRedesign!=undefined&&Next.Settings.Channel.EnableSofaBuilderRedesign?$("section.accordianContent"):$("section.tabbedContent");var
                                n=r.find("#hdnStyle").val();i.ItemNumber=r.find("#hdnItemNumber").val().match(/.{3}/g).join("-");i.OptionNo=r.find("#hdnOptionCode").val();i.ItemDescription=n;i.SelectedSize=r.find("#hdnTitle").val();i.LinkedOptionNo=r.find("#hdnLinkedOptionCode").val();$("#hdnLinkedItemNumber").val()&&(i.LinkedItemNumber=r.find("#hdnLinkedItemNumber").val().match(/.{3}/g).join("-"))}function
                                c(){var r=t.parents(".item-placeholder").first();i.ListId=r.data("list-id");i.ItemNumber=r.data("item-number");i.OptionNo=n==="remove-favourite-item"?t.attr("data-option-code"):r.find("option:selected").val();i.LinkedItemNumber=r.attr("data-linked-item-number");i.LinkedOptionNo=r.attr("data-linked-option-code");i.ItemDescription=r.data("item-description");NextFavourites.OriginalOptionNo=r.attr("data-option-code");i.ItemCategory=r.attr("data-category");i.ItemColour=r.attr("data-colour");i.ItemBrand=r.attr("data-brand");i.ItemPrice=r.find(".item-details
                                > .item-price").text();i.ItemDepartment=r.attr("data-department");i.ItemGender=r.attr("data-gender")}var u,r,f,s=t.closest("#quickBuyTray.tray-show").length>0;if(s){this.ReadItemFromQuickBuyTray(t,i);return}switch(NextFavourites.pageType){case"productPage":case"homeWarePDP":case"BeautyproductPage":case"productPageModal":e();break;case"productListPage":case"searchResults":o();break;case"sofas":case"beds":case"diningchairs":h();break;case"favouritesListPage":c();break;case"SocialPLP":t.hasClass("plp")?o():e()}},i.prototype.RemoveItemFromFLP=function(n){NextFavourites.Data.ShoppingListItems.length===0?(n.LinkedItemNumber?Next.Settings.UI.DesktopFavouritesResponsiveEnabled?($("div[data-item-number='"+n.ItemNumber+"'][data-linked-item-number='"+n.LinkedItemNumber+"']").remove(),$(".empty-fav-list").fadeIn("slow")):$("div[data-item-number='"+n.ItemNumber+"'][data-linked-item-number='"+n.LinkedItemNumber+"']").fadeOut("slow",function(){$(".empty-fav-list").fadeIn("slow")}):Next.Settings.UI.DesktopFavouritesResponsiveEnabled?($("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"']").remove(),$(".empty-fav-list").fadeIn("slow")):$("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"']").fadeOut("slow",function(){$(".empty-fav-list").fadeIn("slow")}),$("#favouriteItemsCountTarget").text(NextFavourites.Data.ShoppingListItems.length),monetateEnabled&&(window.monetateQ.push(["setPageType",NextFavourites.pageType]),window.monetateQ.push(["addCategories",["desktop"]]),window.monetateQ.push(["setCustomVariables",[{name:"deviceType",value:"desktop"}]]),window.monetateQ.push(["trackData"]))):(n.LinkedItemNumber?Next.Settings.UI.DesktopFavouritesResponsiveEnabled?$("div[data-item-number='"+n.ItemNumber+"'][data-linked-item-number='"+n.LinkedItemNumber+"']").remove():$("div[data-item-number='"+n.ItemNumber+"'][data-linked-item-number='"+n.LinkedItemNumber+"']").fadeOut():Next.Settings.UI.DesktopFavouritesResponsiveEnabled?$("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"']").remove():$("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"']").fadeOut(),$("#favouriteItemsCountTarget").text(NextFavourites.Data.ShoppingListItems.length),NextFavourites.DisplayMaximumLimitBanner());NextFavourites.Busy=!1;TrackGAEvent("Desktop
                                "+NextFavourites.pageType+" Favourites","Click","Remove From FLP | Item Number "+n.ItemNumber)},i.prototype.MoveItemFromFLPToBag=function(n,t){function s(t){NextBasket&&NextBasket.BrowseOnlyMode&&(t=!1);t?NextFavourites.DisplayMoveNotification(n):(NextFavourites.Busy=!1,NextFavourites.DisplayMoveFailedNotification(n))}var
                                r,u,f=t.parents(".item-placeholder").first(),e=f.attr("data-chain"),o=0,i;NextBasket.Data!==null&&NextBasket.Data.Version!==null&&(o=NextBasket.Data.Version);i=new NextBasketItems(o);n.LinkedItemNumber?(r=n.ItemNumber.toString().replace("-",""),u=n.LinkedItemNumber.replace("-",""),n.OptionNo=f.attr("data-option-code"),r!=null&&r!=""&&n.OptionNo!=null&&n.OptionNo!=""&&u!=null&&u!=""&&i.ItemAdd(r,n.OptionNo,e,u),NextBasket.ItemAddMultiple(i,{},s)):(n.ItemNumber!=null&&n.OptionNo!=null&&n.OptionNo!=""&&i.ItemAdd(n.ItemNumber,n.OptionNo,e),NextBasket.ItemAddMultiple(i,{},s))},i.prototype.DisplayMoveNotification=function(n){function
                                r(t){t?(NextFavourites.RemoveMovedItem(n),NextFavourites.DisplayMaximumLimitBanner()):(NextFavourites.Busy=!1,$(".add-to-bag").removeClass("loading"),console.log("Error while removing favourite item after Add to Bag"),TrackGAEvent("Desktop
                                "+NextFavourites.pageType+" Favourites","Click","Error Remove From FLP | Item Number "+n.ItemNumber))}var t=$("#moved-to-bag-notification"),i=t.find("#notification-item-text-target");clearTimeout(NextFavourites.PopoverTimer);NextFavourites.PopoverTimer=setTimeout(function(){t.slideUp("slow")},7e3);n.OptionNo=NextFavourites.OriginalOptionNo;NextFavourites.RemoveItem(n,r);console.log("Favourite
                                item moved to bag successfully");TrackGAEvent("Desktop "+NextFavourites.pageType+" Favourites","Click","Add To Bag From FLP | Item Number "+n.ItemNumber);t.slideDown();i.empty();i.append(n.ItemDescription)},i.prototype.DisplayMoveFailedNotification=function(n){console.log("Error
                                while moving favourite item");TrackGAEvent("Desktop "+NextFavourites.pageType+" Favourites","Click","Error Add To Bag From FLP | Item Number "+n.ItemNumber);NextFavourites.SelectedHeart.removeClass("loading");var t=NextFavourites.SelectedHeart.find(".nx-spinner-light"),i=NextFavourites.SelectedHeart.find(".prompt");i.show();t.hide();$("#warning-notification").slideDown();$("#warning-notification").find("#warning-notification-text-target").empty().append("There
                                was a problem adding the item to your bag.");clearTimeout(NextFavourites.PopoverTimer);NextFavourites.PopoverTimer=setTimeout(function(){$("#warning-notification").slideUp("slow")},7e3)},i.prototype.RemoveMovedItem=function(n){console.log("Favourite
                                item removed successfully");TrackGAEvent("Desktop "+NextFavourites.pageType+" Favourites","Click","Remove From FLP | Item Number "+n.ItemNumber);NextFavourites.Data.ShoppingListItems.length===0?(Next.Settings.UI.DesktopFavouritesResponsiveEnabled?($("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"'][data-linked-item-number='"+n.LinkedItemNumber+"'][data-linked-option-code='"+n.LinkedOptionNo+"']").remove(),$(".empty-fav-list").fadeIn("slow")):$("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"'][data-linked-item-number='"+n.LinkedItemNumber+"'][data-linked-option-code='"+n.LinkedOptionNo+"']").fadeOut("slow",function(){$(".empty-fav-list").fadeIn("slow")}),$("#favouriteItemsCountTarget").text(NextFavourites.Data.ShoppingListItems.length),monetateEnabled&&(window.monetateQ.push(["setPageType",NextFavourites.pageType]),window.monetateQ.push(["addCategories",["desktop"]]),window.monetateQ.push(["setCustomVariables",[{name:"deviceType",value:"desktop"}]]),window.monetateQ.push(["trackData"]))):(Next.Settings.UI.DesktopFavouritesResponsiveEnabled?$("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"'][data-linked-item-number='"+n.LinkedItemNumber+"'][data-linked-option-code='"+n.LinkedOptionNo+"']").remove():$("div[data-item-number='"+n.ItemNumber+"'][data-option-code='"+n.OptionNo+"'][data-linked-item-number='"+n.LinkedItemNumber+"'][data-linked-option-code='"+n.LinkedOptionNo+"']").animate({height:"toggle",opacity:"toggle"},"slow"),$("#favouriteItemsCountTarget").text(NextFavourites.Data.ShoppingListItems.length));NextFavourites.Busy=!1},i.prototype.DisplayMaximumLimitBanner=function(){NextFavourites.Data.ExceededLimitCount=(NextFavourites.Data.MaximumLimit-NextFavourites.Data.ShoppingListItems.length)*-1;NextFavourites.Data.ExceededLimitCount===-1?$("#flpMaxLimitBanner").slideUp("slow"):$("#flpMaxLimitBanner").find("span").text(NextFavourites.Data.ExceededLimitCount+1)},i.prototype.BindFLPEvents=function(){function
                                f(n){var t=String(n.ItemNumber).replace("-",""),i=t+"-"+n.OptionNo+" | "+n.ItemSize,r={event:"ee-addToCart",ecommerce:{currencyCode:Next.Settings.Channel.CurrencyCode,add:{products:[{id:t,name:n.ItemDescription,OptionNo:n.OptionNo,price:n.ItemPrice,brand:n.ItemBrand,category:n.ItemCategory,variant:i,position:1,quantity:1,dimension21:n.ItemStockStatus,dimension22:"",dimension23:n.ItemDepartment,dimension24:n.ItemGender,dimension25:"",dimension26:"",dimension27:n.ItemBrand,dimension28:n.ItemColour}]}}};dataLayer.push(r)}var
                                u=$(".flp-size-selector"),i,r=new n.ShoppingListItem,t;u.change(function(){if(i=$(this).find("option:selected").text(),$(this).siblings("span").text(i),NextBasket&&NextBasket.BrowseOnlyMode)return i!==nxt.jstranslations.mobile.productpage.choosesize&&NextFavourites.FLPUpdatePrice($(this)),!1;t=$(this).find("option:selected").data("stockstatus");i===nxt.jstranslations.mobile.productpage.choosesize?($(this).siblings(".dk_toggle").addClass("error"),$(this).parents(".item-details").find(".add-to-bag").addClass("disabled"),$(this).parents(".item-details").find(".add-to-bag").removeClass("enabled")):t&&(t==="SoldOut"||t==="ComingSoon")?($(this).siblings(".dk_toggle").removeClass("error"),$(this).parents(".item-details").find(".add-to-bag").addClass("disabled"),$(this).parents(".item-details").find(".add-to-bag").removeClass("enabled")):($(this).siblings(".dk_toggle").removeClass("error"),$(this).parents(".item-details").find(".add-to-bag").addClass("enabled"),$(this).parents(".item-details").find(".add-to-bag").removeClass("disabled"),NextFavourites.FLPUpdatePrice($(this)))});$(".remove-item-link").click(function(n){n.preventDefault();NextFavourites.Busy||(NextFavourites.Busy=!0,NextFavourites.SelectedHeart=$(this),NextFavourites.SelectedHeart.siblings(".remove-loading-spinner").css("display","block"),NextFavourites.ReadItem("remove-favourite-item",$(this),r),NextFavourites.AddRemoveFavourites(n,"remove-favourite-item",$(this),r))});$(".add-to-bag").click(function(n){n.preventDefault();NextFavourites.SelectedHeart=$(this);i=$(this).siblings(".selectors").find("option:selected").text();t=$(this).siblings(".selectors").find("option:selected").data("stockstatus");r.ItemStockStatus=t;r.ItemSize=i;i===nxt.jstranslations.mobile.productpage.choosesize||$(this).hasClass("disabled")?$(this).parent().find(".dk_toggle").addClass("error"):t&&(t==="SoldOut"||t==="ComingSoon")?($(this).parent().find(".dk_toggle").removeClass("error"),$(this).addClass("disabled"),$(this).removeClass("enabled")):NextFavourites.Busy||($(this).addClass("loading"),NextFavourites.ReadItem("mode-favourite-item",$(this),r),Next.Settings.Channel.FavouritesDLAddToCartEvent&&f(r,$(this)),NextFavourites.MoveItemFromFLPToBag(r,$(this)),NextFavourites.Busy=!0)});$(window).on("scroll",function(){$(window).scrollTop()>200?$("a.flp-backToTop").hasClass("open")||$("a.flp-backToTop").hasClass("opening")||$("a.flp-backToTop").stop().removeClass("closing").css("display","block").addClass("open
                                opening").animate({bottom:60},600,"easeOutQuart",function(){$(this).removeClass("opening")}):$("a.flp-backToTop").hasClass("open")&&!$("a.flp-backToTop").hasClass("closing")&&$("a.flp-backToTop").stop().removeClass("open
                                opening").css("display","block").addClass("closing").animate({bottom:-51},600,"easeOutQuart",function(){$(this).removeClass("closing")})});$(".flp-size-selector").on("click",function(){dataLayer!=null&&($(this).hasClass("dk_open")?dataLayer.push({event:"TrackGAEvent",link_category:"Desktop
                                favouritesListPage Favourites",link_id:"Dropdown",link_name:"Size close",link_value:""}):dataLayer.push({event:"TrackGAEvent",link_category:"Desktop favouritesListPage Favourites",link_id:"Dropdown",link_name:"Size open",link_value:""}))});$(function(){$(".flp-size-selector").change(function(){var
                                n=$(document).find(".flp-size-selector :selected").text();$(this).val().length!==0&&dataLayer!=null&&dataLayer.push({event:"TrackGAEvent",link_category:"Desktop favouritesListPage Favourites",link_id:"Selected Size",link_name:n,link_value:""})})})},i}(n.Favourites);n.DesktopFavourites=t;$(function(){if(window.location.href.indexOf("favourites")>-1){$(".BreadcrumbNavigation").show();var
                                n=Next.Settings.Channel.TotalPlatformFeatures.AltFavouritesTitle;n?$(".BreadcrumbNavigation").find("ul.Breadcrumbs").append('
                                <li class="Breadcrumb lastBreadcrumb">'+n+"
                                    <\/li>"):$(".BreadcrumbNavigation").find("ul.Breadcrumbs").append('
                                        <li class="Breadcrumb lastBreadcrumb">Favourites
                                            <\/li>');Next.Settings.UI.DesktopFavouritesResponsiveEnabled&&$(window).width()>1280&&$("#FLP-container .item-description").each(function(){var n=$(this),t=n.text();for(n.attr("title",t);n.outerHeight(!0)>60;)n.text(function(n,t){return
                                                t.replace(/\W*\s(\S)*$/,"...")})})}})}(PlatMod||(PlatMod={}));NextFavourites=new PlatMod.DesktopFavourites;$(function(){NextFavourites.SubscribeToEvents()});+function(n){"use strict";var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'
                                                <div
                                                    class="tooltip">
                                                    <div class="tooltip-arrow">
                                                        <\/div>
                                                            <div class="tooltip-inner">
                                                                <\/div>
                                                                    <\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),f=this.options.trigger.split("
                                                                        "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return
                                                                        t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var
                                                                        t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return
                                                                        i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return
                                                                        i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)};t.prototype.show=function(){var h=n.Event("show.bs."+this.type),u,i,v,s;if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;u=this;i=this.tip();this.setContent();this.options.animation&&i.addClass("fade");var
                                                                        t=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(t);l&&(t=t.replace(c,"")||"top");i.detach().css({top:0,left:0,display:"block"}).addClass(t);this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var
                                                                        r=this.getPosition(),f=i[0].offsetWidth,e=i[0].offsetHeight;if(l){var o=this.$element.parent(),y=t,a=document.documentElement.scrollTop||document.body.scrollTop,p=this.options.container=="body"?window.innerWidth:o.outerWidth(),w=this.options.container=="body"?window.innerHeight:o.outerHeight(),b=this.options.container=="body"?0:o.offset().left;t=t=="bottom"&&r.top+r.height+e-a>w?"top":t=="top"&&r.top-a-e
                                                                        <0?
                                                                            "bottom":t=="right" &&r.right+f>p?"left":t=="left"&&r.left-f
                                                                            <b? "right":t;i.removeClass(y).addClass(t)}v=this.getCalculatedOffset(t,r,f,e);this.applyPlacement(v,t);this.hoverState=null;s=function(){u.$element.trigger(
                                                                                "shown.bs."+u.type)};n.support.transition&&this.$tip.hasClass( "fade")?i.one(n.support.transition.end,s).emulateTransitionEnd(150):s()}};t.prototype.applyPlacement=function(t,i){var c,r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css(
                                                                                "margin-top"),10),s=parseInt(r.css( "margin-left"),10),f,u,h;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass(
                                                                                "in");f=r[0].offsetWidth;u=r[0].offsetHeight;i=="top" &&u!=e&&(c=!0,t.top=t.top+e-u);/bottom|top/.test(i)?(h=0,t.left<0&&(h=t.left*-2,t.left=0,r.offset(t),f=r[0].offsetWidth,u=r[0].offsetHeight),this.replaceArrow(h-l+f,f,
                                                                                "left")):this.replaceArrow(u-e,u, "top");c&&r.offset(t)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i,n?50*(1-n/t)+ "%": "")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(
                                                                                ".tooltip-inner")[this.options.html? "html": "text"](t);n.removeClass( "fade in top bottom left right")};t.prototype.hide=function(){function u(){t.hoverState!="in" &&i.detach();t.$element.trigger(
                                                                                "hidden.bs."+t.type)}var t=this,i=this.tip(),r=n.Event( "hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return i.removeClass( "in"),n.support.transition&&this.$tip.hasClass(
                                                                                "fade")?i.one(n.support.transition.end,u).emulateTransitionEnd(150):u(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr( "title")||typeof n.attr(
                                                                                "data-original-title")!="string" )&&n.attr( "data-original-title",n.attr( "title")|| "").attr( "title", "")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(){var
                                                                                t=this.$element[0];return n.extend({},typeof t.getBoundingClientRect=="function" ?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())};t.prototype.getCalculatedOffset=function(n,t,i,r){return
                                                                                n=="bottom" ?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top" ?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left" ?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getTitle=function(){var
                                                                                t=this.$element,n=this.options;return t.attr( "data-original-title")||(typeof n.title=="function" ?n.title.call(t[0]):n.title)};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return
                                                                                this.$arrow=this.$arrow||this.tip().find( ".tooltip-arrow")};t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var
                                                                                i=t?n(t.currentTarget)[this.type](this.getDelegateOptions()).data( "bs."+this.type):this;i.tip().hasClass( "in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off(
                                                                                "."+this.type).removeData( "bs."+this.type)};i=n.fn.tooltip;n.fn.tooltip=function(i){return this.each(function(){var u=n(this),r=u.data( "bs.tooltip"),f=typeof i=="object" &&i;(r||i!="destroy"
                                                                                )&&(r||u.data( "bs.tooltip",r=new t(this,f)),typeof i=="string" &&r[i]())})};n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){
                                                                                "use strict";var t=function(n,t){this.init( "popover",n,t)},i;if(!n.fn.tooltip)throw new Error( "Popover requires tooltip.js");t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:
                                                                                "right",trigger: "click",content: "",template: '<div class="popover"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return
                                                                                t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find( ".popover-title")[this.options.html? "html": "text"](i);n.find(
                                                                                ".popover-content")[this.options.html?typeof t=="string" ? "html": "append": "text"](t);n.removeClass( "fade top bottom left right in");n.find( ".popover-title").html()||n.find(
                                                                                ".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr(
                                                                                "data-content")||(typeof n.content=="function" ?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find( ".arrow")};t.prototype.tip=function(){return
                                                                                this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=function(i){return this.each(function(){var u=n(this),r=u.data( "bs.popover"),f=typeof i=="object"
                                                                                &&i;(r||i!="destroy" )&&(r||u.data( "bs.popover",r=new t(this,f)),typeof i=="string" &&r[i]())})};n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery),function(n){n.fn.customPopover=function(t){var
                                                                                i={init:function(){},calculateArrowPosition:function(t){var i=n(t),r=i.offset(),u=n( ".popover").width(),f=r.left+i.outerWidth()/2;return f/u*100},adjustArrowPosition:function(){return
                                                                                2.5},callPopover:function(i){if(Next.Settings.Mobile.EnableUpgradedBootstrap){var u={placement:function(){var i=this;return setTimeout(function(){if(!n( "div.popover:visible").hasClass(
                                                                                "left", "right")){var t=NextFavourites.SelectedHeart,r=n(i.getTipElement()),l=t.offset().left-17,a=t.outerWidth(),e=parseInt(t.css( "paddingTop")),o=parseInt(t.css( "paddingBottom")),s=t.innerHeight()-e,h=Math.round(t.offset().top),f=parseInt(r.css(
                                                                                "marginTop")),c=r.outerHeight(!0),u=h;r.hasClass( "top")?u-=c-f:(u+=s,o>0&&(u+=f))}},0),t.placement}},r=function(n){t[n]&&(u[n]=t[n])};r("animation");r("container");r("content");r("delay");r("html");r("selector");r("title");r("trigger");r("viewport");r("template");n(i).popover(u);n(i).popover("show")}else
                                                                                n(i).popover({animation:t.animation,container:t.container,content:t.content,delay:t.delay,html:t.html,placement:function(){var i=this;return setTimeout(function(){var e;if(!n("div.popover:visible").hasClass("left","right")){var
                                                                                t=NextFavourites.SelectedHeart,r=i.$tip,o=t.offset().left-17,s=t.outerWidth(),h=parseInt(t.css("paddingTop")),c=parseInt(t.css("paddingBottom")),l=t.innerHeight()-h,a=Math.round(t.offset().top),f=parseInt(r.css("marginTop")),v=r.outerHeight(!0),u=a;r.hasClass("top")?u-=v-f:(u+=l,c>0&&(u+=f));r.css("top",u+"px");e=Math.round(o+s/2);i.$arrow.css("left",e+"px")}},0),t.placement},selector:t.selector,template:t.template,title:t.title,trigger:t.trigger,viewport:t.viewport}),n(i).popover("show")}};i.callPopover(this[0])}}(jQuery)